<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jon Brauer">
<meta name="dcterms.date" content="2024-02-26">
<meta name="description" content="Exposure-mediator interaction? No problem! Disentangle indirect and interaction effects with CMAverse in R">

<title>reluctant criminologists - Moderator Madness, Part 3</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-F0XQR72SS3"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-F0XQR72SS3', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/RC_banner.jpg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">reluctant criminologists</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog-posts.html"> 
<span class="menu-text">blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../course-materials.html"> 
<span class="menu-text">courses</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../supp/index.html"> 
<span class="menu-text">supplementary</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog-posts/[2]/favorite_links.html"> 
<span class="menu-text">links</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:reluctantcrim@gmail.com"> <i class="bi bi-envelope-fill" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jakeday4/reluctantcrim_website"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/reluctantcrim"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#do-i-really-need-to-learn-this" id="toc-do-i-really-need-to-learn-this" class="nav-link active" data-scroll-target="#do-i-really-need-to-learn-this">Do I really need to learn this?</a></li>
  <li><a href="#sec-readfirst" id="toc-sec-readfirst" class="nav-link" data-scroll-target="#sec-readfirst">Have you read Parts 1 and 2?</a></li>
  <li><a href="#sec-DAG" id="toc-sec-DAG" class="nav-link" data-scroll-target="#sec-DAG">DAG of simulated data-generating processes</a></li>
  <li><a href="#sec-assumptions" id="toc-sec-assumptions" class="nav-link" data-scroll-target="#sec-assumptions">“Causal mediation” assumptions</a></li>
  <li><a href="#sec-terms" id="toc-sec-terms" class="nav-link" data-scroll-target="#sec-terms">Terminology</a>
  <ul class="collapse">
  <li><a href="#sec-variables" id="toc-sec-variables" class="nav-link" data-scroll-target="#sec-variables">Variables</a></li>
  <li><a href="#sec-natural" id="toc-sec-natural" class="nav-link" data-scroll-target="#sec-natural">Controlled versus natural effects</a></li>
  <li><a href="#sec-pure" id="toc-sec-pure" class="nav-link" data-scroll-target="#sec-pure">Pure versus total effects</a></li>
  </ul></li>
  <li><a href="#sec-simulate" id="toc-sec-simulate" class="nav-link" data-scroll-target="#sec-simulate">Simulate data</a></li>
  <li><a href="#sec-plots" id="toc-sec-plots" class="nav-link" data-scroll-target="#sec-plots">Regressions &amp; interaction plots</a></li>
  <li><a href="#general-linear-interaction-model" id="toc-general-linear-interaction-model" class="nav-link" data-scroll-target="#general-linear-interaction-model">General linear interaction model</a></li>
  <li><a href="#generalized-linear-poisson-nonlinear-interaction-model" id="toc-generalized-linear-poisson-nonlinear-interaction-model" class="nav-link" data-scroll-target="#generalized-linear-poisson-nonlinear-interaction-model">Generalized linear Poisson (“nonlinear”) interaction model</a></li>
  <li><a href="#sec-indirect" id="toc-sec-indirect" class="nav-link" data-scroll-target="#sec-indirect">Whither the indirect effect?</a></li>
  <li><a href="#sec-traditional" id="toc-sec-traditional" class="nav-link" data-scroll-target="#sec-traditional">Traditional (<em>ab</em>) linear mediation model</a></li>
  <li><a href="#sec-CMAlin-noint" id="toc-sec-CMAlin-noint" class="nav-link" data-scroll-target="#sec-CMAlin-noint">Linear CMA model, no <em>EMint</em></a></li>
  <li><a href="#sec-CMAlin-int" id="toc-sec-CMAlin-int" class="nav-link" data-scroll-target="#sec-CMAlin-int">Linear CMA model, with <em>EMint</em></a></li>
  <li><a href="#sec-CMAnonlin-noint" id="toc-sec-CMAnonlin-noint" class="nav-link" data-scroll-target="#sec-CMAnonlin-noint">Nonlinear CMA model, no <em>EMint</em></a></li>
  <li><a href="#sec-CMAnonlin-int" id="toc-sec-CMAnonlin-int" class="nav-link" data-scroll-target="#sec-CMAnonlin-int">Nonlinear CMA model, with <em>EMint</em></a></li>
  <li><a href="#sec-curtaincall" id="toc-sec-curtaincall" class="nav-link" data-scroll-target="#sec-curtaincall">Curtain call</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Moderator Madness, Part 3</h1>
  <div class="quarto-categories">
    <div class="quarto-category">general</div>
    <div class="quarto-category">rstats</div>
    <div class="quarto-category">causality</div>
    <div class="quarto-category">moderation</div>
    <div class="quarto-category">mediation</div>
  </div>
  </div>

<div>
  <div class="description">
    Exposure-mediator interaction? No problem! Disentangle indirect and interaction effects with CMAverse in R
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jon Brauer </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 26, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="med-or-mod-cartoon2.jpg" class="img-fluid figure-img"></p>
<figcaption>Two lemmings confused by exposure-mediator interactions (with help from DALL-E)</figcaption>
</figure>
</div>
<p>This is the third and final entry in a three-part blog series on modeling moderators in criminological data. In <a href="https://reluctantcriminologists.com/blog-posts/%5B6%5D/modmadness-pt1.html">Part 1</a>, I covered issues related to estimating and interpreting interaction effects with binary or skewed count outcome variables. In <a href="https://reluctantcriminologists.com/blog-posts/%5B7%5D/modmadness-pt2.html">Part 2</a>, I introduced counterfactual causality, exposure-mediator interactions, and a potential outcomes framework for conducting a four-way decomposition of a total effect into controlled direct effect (<em>CDE</em>), pure indirect effect (<em>PIE</em>), reference interaction (<em>INT<sub>ref</sub></em>), and mediated interaction (<em>INT<sub>med</sub></em>) components.</p>
<p>In this final entry, I illustrate how to use the <code>CMAverse</code> software package in R to conduct “causal mediation” analysis, which relies on the 4-way potential outcomes decomposition introduced in <a href="https://reluctantcriminologists.com/blog-posts/%5B7%5D/modmadness-pt2.html">Part 2</a> to disentangle indirect and interaction effects in the presence of a potential exposure-mediator interaction. Along the way, I will also introduce the important assumptions required to interpret “causal mediation” results as estimates of causal effects.</p>
<section id="do-i-really-need-to-learn-this" class="level2">
<h2 class="anchored" data-anchor-id="do-i-really-need-to-learn-this">Do I really need to learn this?</h2>
<p>Do you ever examine interaction effects? If so, is it ever plausible that the hypothesized moderator also mediates the effect of the exposure (i.e., treatment or focal causal variable)?</p>
<p>Do you ever test for indirect effects? If so, is it ever plausible that the hypothesized mediator also interacts with the exposure (treatment or focal causal) variable? In other words, is it possible that the exposure variable’s effect could differ across levels of the mediator, or is it possible that the mediator’s effect could differ across exposed and unexposed groups?</p>
<p>Do you work with data (e.g., crime or delinquency counts) for which nonlinear modeling approaches (e.g., Poisson regression) are more appropriate than traditional linear regression procedures? When testing indirect effects with such data, do you find yourself making concessions (e.g., dichotomizing data or using linear models anyway) because the software programs you use to test for mediation are restricted to a limited set of specific (e.g., linear; logistic) distributions?</p>
<p>If you answered “YES” to any of the above questions, then you should probably learn about causal mediation procedures. If you said “NO” to the first two questions, consider the following footnote that I included in <a href="https://reluctantcriminologists.com/blog-posts/%5B7%5D/modmadness-pt2.html#fn2">Part 2</a> of this series:</p>
<blockquote class="blockquote">
<p>“At this point, you might be wondering: ‘Do I really need to do this? The [insert] theory I am testing does not predict such an interaction!’ Well, failure to examine and adjust for the possibility of an exposure-mediator interaction is equivalent to forcing your model of the data generating process to conform to a strong and potentially incorrect theoretical assumption about underlying data generating processes.<br>
In SEM parlance, it is equivalent to ‘fixing’ the effect of X on Y through M to be the same at all values of M. In situations where the effect of X on Y indeed varies across strata of M, failure to account for it could result in biased or incomplete inferences. In contrast, allowing for and decomposing a potential exposure-mediator interaction is, in SEM terms, akin to ‘freeing’ that parameter, thus permitting a test of that strong theoretical assumption. In situations where no such interaction exists, the magnitude of the interaction will approach zero, and traditional and ‘causal’ mediation approaches (e.g., ‘controlled’ and ‘natural’ effect estimates) will converge to the same values. In those situations, decomposition would be unnecessary yet nonetheless informative.<br>
In short, there is substantial upside and little downside apart from learning the skills to testing and accounting for exposure-mediator interactions whether or not one exists, yet there are potentially substantial inferential risks to <em>not</em> doing so when one exists. So, just how <em>a priori</em> confident are you in that likely imprecise and discursive theory of yours?”</p>
</blockquote>
<p>If you ever test moderation or mediation hypotheses, then it is generally <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6992469/">a good idea to incorporate the evaluation of exposure-mediator interactions</a> into your research workflow. The “causal mediation” approach I describe in this post is well-suited for this task. It is also generally applicable to a wide variety of data analytic situations and distributional types for exposures, mediators, and outcomes. For example, the <code>CMAverse</code> package in R introduced below <a href="https://bs1125.github.io/CMAverse/">can be applied to various combinations</a> of continuous, binary, count, nominal, ordinal, and survival data.</p>
</section>
<section id="sec-readfirst" class="level2">
<h2 class="anchored" data-anchor-id="sec-readfirst">Have you read Parts 1 and 2?</h2>
<p>At this point, I am assuming you read the first two entries in this series. In particular, I assume you understand the issues discussed in <a href="https://reluctantcriminologists.com/blog-posts/%5B6%5D/modmadness-pt1.html">Part 1</a> pertaining to the conditional or “interactive” nature of model coefficients when nonlinear link functions are specified in generalized linear models. I also assume you understand the four-way total effect decomposition components (<em>CDE</em>; <em>PIE</em>; <em>INT<sub>ref</sub></em>; <em>INT<sub>med</sub></em>) described in <a href="https://reluctantcriminologists.com/blog-posts/%5B7%5D/modmadness-pt2.html">Part 2</a>.</p>
<p>If so, then you are ready to move on to a more realistic example of total effect decomposition using simulated data in R. For this example, I will rely primarily on the <a href="https://bs1125.github.io/CMAverse/"><code>CMAverse</code> package</a>, which adopts a <a href="https://www.hsph.harvard.edu/tyler-vanderweele/tools-and-tutorials/">causal mediation approach</a> to disentangling indirect and interaction effects in the presence of an exposure-mediator interaction. Though we took a long and winding road to arrive here, as I explained at the beginning of my <a href="https://reluctantcriminologists.com/blog-posts/%5B6%5D/modmadness-pt1">Moderator Madness, Part 1 post</a>, this is the goal that initially motivated the three-part blog series.</p>
<p>Before diving in, I should also explain that I wrote this example with social scientists in mind that already have some familiarity with “traditional” (e.g., Baron &amp; Kenny steps; product of <em>ab</em> path coefficients) approaches to modeling mediation processes and are looking for a basic introduction to the <a href="https://pubmed.ncbi.nlm.nih.gov/34239282/">less well known yet generally preferred</a> “causal mediation” methods. If you find yourself in the position of testing or estimating indirect effects and unaware of the causal mediation approach, then I strongly encourage you to read more on the topic. There are lots of excellent <a href="https://www.publichealth.columbia.edu/research/population-health-methods/causal-mediation">summaries</a>, <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7853644/">overviews of software alternatives</a>, and introductory primers on <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10368791/">causal mediation</a> and on <a href="https://journals.lww.com/epidem/Fulltext/2021/09000/CMAverse__A_Suite_of_Functions_for_Reproducible.23.aspx">CMAverse specifically</a>. Additionally, the <a href="https://bs1125.github.io/CMAverse/articles/quickstart.html">CMAverse quickstart</a> website itself is a great place to start. If nothing else, I hope this entry serves as a segue for folks curious about advancing beyond traditional mediation tests by learning about causal mediation approaches.</p>
<p>Without further ado, let’s get to it!</p>
</section>
<section id="sec-DAG" class="level2">
<h2 class="anchored" data-anchor-id="sec-DAG">DAG of simulated data-generating processes</h2>
<p>For this illustration, I will generate simulated data that are very similar to those found in <a href="https://reluctantcriminologists.com/blog-posts/%5B6%5D/modmadness-pt1#outline-of-the-post">Example 2 from my “Moderator Madness: Part 1” post</a>. In that post, I stated:</p>
<blockquote class="blockquote">
<p>In the second example, I assume that the true data generating process underlying both imaginary papers (i.e., “paper 1” and “paper 2” in our example above) is an integrated causal model in which moral beliefs is both a mediating and moderating mechanism. That is, in the simulated data for the second example, there is a true indirect effect of <em>parental support</em> on delinquency through <em>strong moral beliefs</em> as well as a direct effect of <em>parental support</em> on <em>delinquency</em> that varies systematically across levels of (i.e., “interacts with”) <em>strong moral beliefs</em>.</p>
</blockquote>
<p>Thus, the simulated data here contain the same three focal variables. The exposure, <em>parental support</em> practices, is conceptualized as a variable measure of parental intervention(s) on youth attitudes and behaviors; it is generated here as a continuous, normally distributed, mean-centered variable. The mechanism, youths’ <em>strong moral beliefs</em>, is generated as a negatively skewed ordinal variable ranging from 0 to 5, which was created by reverse-scoring a truncated Poisson-distributed <em>weak moral beliefs</em> variable. The outcome, <em>delinquency</em>, is a positively skewed, Poisson-distributed event count variable ranging from 0 to a truncated theoretical maximum of 7.</p>
<p>Again, the simulated data will be generated using the following hypothetical causal mediation and moderation assumptions: <em>Parental support</em> practices are a somewhat effective cause of youth’s internalization of <em>strong moral beliefs</em>, and <em>strong moral beliefs</em> effectively cause fewer delinquent behavior events (i.e., they constrain temptations, promote resistance to, or encourage selection out of delinquency). Thus, the data generating processes include causal mediation or indirect effects of an exposure through a mechanism.</p>
<p>Additionally, <em>parental support</em> directly discourages or reduces involvement in youth delinquency.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> However, this effect varies across levels of the mechanism. Specifically, parental support’s negative effect on youth delinquency is most pronounced among youth with weak moral beliefs (i.e., low <em>strong moral beliefs</em> index scores); these youth are most at risk of engaging in delinquency, so effective parental interventions have the greatest potential to enact behavioral change among these youth. In contrast, youth with strong moral beliefs are highly unlikely to engage in delinquency irrespective of the degree of parental support they experience; therefore, parental support is largely ineffective among youth with the highest <em>strong moral beliefs</em> index scores. Since the effect of parental support on delinquency varies across levels of a mechanism (e.g., across youth with weak versus strong moral beliefs), then the data generating processes include moderation or interaction effects.</p>
<p>Moreover, since parental support both operates indirectly through and interacts with youth’s strong moral beliefs, I expect the operation of an underlying <em>exposure-mediator interaction</em> in the data generating process. Recall, when we expect the existence of an additive exposure-mediator interaction, then part of the total effect of parental support might be attributable to a <em>reference interaction</em>, which involves an additive interaction that would occur when the mediator is observed even the absence of the exposure (e.g., if some youth internalize strong moral beliefs even in the absence of high parental support). Additionally, since parental support also partly causes strong moral beliefs, then parental support may be partly responsible for setting the very levels across which it variably or conditionally affects delinquency. Thus, part of the total effect of parental support on delinquency also might be attributable to a <em>mediated interaction</em>.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>Now that the key variables and their underlying causal relationships have been discursively described, it is a good idea to generate a <a href="https://rpubs.com/NickCHK/DAGWorkshop2020"><em>directed acyclic graph</em></a> or DAG that concisely and formally communicates the causal assumptions about the data generating processes underlying our data simulation.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|echo=FALSE</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#explicitly set graphics device to png(type=cairo) to knit ggblend plots properly</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">dev =</span> <span class="st">"png"</span>, <span class="at">dev.args =</span> <span class="fu">list</span>(<span class="at">type =</span> <span class="st">"cairo-png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(simstudy)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># https://cran.r-project.org/web/packages/simstudy/vignettes/simstudy.html</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># https://kgoldfeld.github.io/simstudy/articles/simstudy.html</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># library(psych) #detach to ensure alpha works with ggplot</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># library(devtools)</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># install_github("jtextor/dagitty/r")</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dagitty)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdag)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(truncnorm)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(see)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># devtools::install_github("strengejacke/strengejacke")</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"sjPlot"</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ggthemes"</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"margins"</span>)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ggdist"</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(CMAverse)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggExtra)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggeffects)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggblend)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#function to shorten arrows (edges)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://stackoverflow.com/questions/65420136/how-do-you-adjust-the-arrows-in-a-ggplot-of-a-ggdag</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>shorten_dag_arrows <span class="ot">&lt;-</span> <span class="cf">function</span>(tidy_dag, proportion){</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Update underlying ggdag object</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>tidy_dag<span class="sc">$</span>data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(tidy_dag<span class="sc">$</span>data, </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">xend =</span> (<span class="dv">1</span><span class="sc">-</span>proportion<span class="sc">/</span><span class="dv">2</span>)<span class="sc">*</span>(xend <span class="sc">-</span> x) <span class="sc">+</span> x, </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>                             <span class="at">yend =</span> (<span class="dv">1</span><span class="sc">-</span>proportion<span class="sc">/</span><span class="dv">2</span>)<span class="sc">*</span>(yend <span class="sc">-</span> y) <span class="sc">+</span> y,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                             <span class="at">xstart =</span> (<span class="dv">1</span><span class="sc">-</span>proportion<span class="sc">/</span><span class="dv">2</span>)<span class="sc">*</span>(x <span class="sc">-</span> xend) <span class="sc">+</span> xend,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ystart =</span> (<span class="dv">1</span><span class="sc">-</span>proportion<span class="sc">/</span><span class="dv">2</span>)<span class="sc">*</span>(y<span class="sc">-</span>yend) <span class="sc">+</span> yend)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(tidy_dag)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># modified from Valeri &amp; VanderWeele 2013, Fig.2 </span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># causalDAG2 &lt;- dagify(</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   Y ~ A + M + C1 + C2,</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   M ~ A + C1 + C2,</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   A ~ C1,</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   exposure = "A",</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#   outcome = "Y",</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   coords=list(</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#     x=c(A=1, M=1.5, Y=2, C1=1.5, C2=1.9),</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#     y=c(A=1, M=2, Y=1, C1=1.4, C2=1.75)</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   )) %&gt;% tidy_dagitty() </span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co"># change to simplified version from </span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># https://bs1125.github.io/CMAverse/articles/quickstart.html</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>causalDAG2 <span class="ot">&lt;-</span> <span class="fu">dagify</span>(</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  Y <span class="sc">~</span> A <span class="sc">+</span> M <span class="sc">+</span> C,</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  M <span class="sc">~</span> A <span class="sc">+</span> C,</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  A <span class="sc">~</span> C,</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">"A"</span>,</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">"Y"</span>,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">coords=</span><span class="fu">list</span>(</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="fu">c</span>(<span class="at">A=</span><span class="dv">1</span>, <span class="at">M=</span><span class="fl">1.5</span>, <span class="at">Y=</span><span class="dv">2</span>, <span class="at">C=</span><span class="fl">1.5</span>),</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="fu">c</span>(<span class="at">A=</span><span class="dv">1</span>, <span class="at">M=</span><span class="dv">2</span>, <span class="at">Y=</span><span class="dv">1</span>, <span class="at">C=</span><span class="dv">3</span>)</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> <span class="fu">tidy_dagitty</span>()</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="co">#shorten edges</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>causalDAG2p <span class="ot">&lt;-</span> <span class="fu">shorten_dag_arrows</span>(causalDAG2, <span class="fl">0.08</span>)</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a><span class="co">#create factor variable to isolate edge of interest, permits specifying edge color</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>causalDAG2p <span class="ot">&lt;-</span> causalDAG2p <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">myedge1 =</span> <span class="fu">if_else</span>(causalDAG2p<span class="sc">$</span>data<span class="sc">$</span>name <span class="sc">==</span> <span class="st">"C"</span>, <span class="st">"yes"</span>, <span class="st">"no"</span>),</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># myedge1 = if_else(causalDAG2p$data$name == "C1" | causalDAG2p$data$name == "C2",</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                   "yes", "no"), </span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">modlinetype =</span> <span class="fu">ifelse</span>(myedge1 <span class="sc">==</span> <span class="st">"yes"</span>, <span class="st">"solid"</span>, <span class="st">"solid"</span>) <span class="co">#change 2nd "solid" to "dashed" if desired</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a><span class="co">#plot dag</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>fig4 <span class="ot">&lt;-</span> causalDAG2p <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">xend=</span>xend, <span class="at">yend=</span>yend)) <span class="sc">+</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_edges</span>(<span class="fu">aes</span>(<span class="at">x =</span> xstart, <span class="at">y =</span> ystart, <span class="at">edge_color=</span>myedge1, </span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>                     <span class="at">edge_linetype =</span> modlinetype), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_text</span>(<span class="at">label=</span><span class="fu">c</span>(<span class="st">"A</span><span class="sc">\n</span><span class="st">(Parental</span><span class="sc">\n</span><span class="st">Support)"</span>, <span class="st">"C</span><span class="sc">\n</span><span class="st">(Measured Confounders</span><span class="sc">\n</span><span class="st">Not Affected by Exposure)"</span>, <span class="st">"M</span><span class="sc">\n</span><span class="st">(Moral</span><span class="sc">\n</span><span class="st">Beliefs)"</span>, <span class="st">"Y</span><span class="sc">\n</span><span class="st">(Delinquency)"</span>), </span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>                <span class="at">color=</span><span class="st">"#56B4E9"</span>) <span class="sc">+</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dag</span>() <span class="sc">+</span> </span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">'none'</span>, <span class="at">color =</span> <span class="st">'none'</span>) <span class="sc">+</span></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult=</span><span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.2</span>))) <span class="sc">+</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    <span class="co">#change default expansion on y-axis min &amp; max</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ggtitle("Modified Figure 2 from Valeri &amp; VanderWeele 2013") + </span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_edge_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"darkgrey"</span>, <span class="st">"maroon"</span>)) <span class="sc">+</span> </span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/DAG4-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Figure 1. DAG illustrating simulated data-generating process and ‘no unmeasured confounding’ assumptions underlying causal mediation. (Modified from Fig.2 in Valeri &amp; VanderWeele 2013)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="sec-assumptions" class="level2">
<h2 class="anchored" data-anchor-id="sec-assumptions">“Causal mediation” assumptions</h2>
<p>The DAG above is a modified version of <a href="https://reluctantcriminologists.com/blog-posts/%5B6%5D/fig1.png">Part 1’s basic DAG</a>, with a couple notable changes. First, I added common “causal mediation” notations to variable names, such as exposure label “A” to “Parental Support” variable. Second, I added “measured confounders” to the DAG. I made this change with the hopes of reminding readers that making causal inferences from results of “causal mediation” models (and from traditional mediation models) requires important, and perhaps untenable, assumptions about the lack of unmeasured sources of confounding of the X-M, M-Y, or X-Y relationships.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> <a href="https://pubmed.ncbi.nlm.nih.gov/23379553/">Valeri and VanderWeele (2013)</a> succinctly describe these essential assumptions:</p>
<blockquote class="blockquote">
<p>“…controlled direct effects require (a) no unmeasured treatment– outcome confounding and (b) no unmeasured mediator–outcome confounding. Natural direct and indirect effects require these assumptions and also (c) no unmeasured treatment-mediator confounding and (d) no mediator–outcome confounder affected by treatment.” (p.140)</p>
</blockquote>
<p>They also describe a (regularly overlooked) challenge with meeting these assumptions even in randomized controlled trials:</p>
<blockquote class="blockquote">
<p>“It is important to note that randomizing the treatment is not enough to rule out confounding issues in mediation analysis. This is because randomization of the treatment rules out the problem of treatment–outcome and treatment-mediator confounding but does not guarantee that the assumption of no confounding of mediator– outcome relationship holds. This is because even if the treatment is randomized, the mediator generally will not be.” (p.140)</p>
</blockquote>
<p>Research designs in criminology often violate some or all of these assumptions, thereby calling into question the appropriateness of causal interpretations of results. At the very least, I think we owe it to readers to routinely acknowledge such necessary causal assumptions and to transparently identify those assumptions that we think may be plausibly violated in our research designs. Beyond this, researchers can also consider conducting <a href="https://www.hsph.harvard.edu/tyler-vanderweele/tools-and-tutorials/">sensitivity analyses</a> to determine the robustness of conclusions to assumption violations.</p>
<p>In this entry, I will not illustrate confounding adjustments or sensitivity checks. My primary goal here is to simply introduce the causal mediation approach as a generally preferred option over traditional (e.g., product of coefficients) approaches in situations where researchers have already decided that a mediation (or moderation) analysis is appropriate. Given these aims, the simulated example below is sufficiently complex for an introductory tutorial without also including confounding of the modeled relationships. However, once one is familiar with CMAverse code, terminology, and interpretation of results, it is pretty straightforward to extend this example by including and adjusting for measured confounders, and the various resources I have linked throughout will also provide readers with additional information about recommended sensitivity checks.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
</section>
<section id="sec-terms" class="level2">
<h2 class="anchored" data-anchor-id="sec-terms">Terminology</h2>
<p>Before getting to the simulation, it is probably a good idea to introduce some minor changes in terminology and basic notation that you will encounter when using CMAverse to perform effect decomposition.</p>
<section id="sec-variables" class="level3">
<h3 class="anchored" data-anchor-id="sec-variables">Variables</h3>
<p>First, the focal variables are labeled as follows:</p>
<p>Exposure == A (Alternatively referred to as “X” in <a href="https://reluctantcriminologists.com/blog-posts/%5B7%5D/modmadness-pt2.html">Part 2</a>)<br>
Mediator == M<br>
Outcome == Y<br>
Confounders == C (Ignored here, but <a href="https://reluctantcriminologists.com/blog-posts/%5B5%5D/colliders">choose wisely</a>)</p>
<p>Though I do not include confounders in this example, two types of outcome confounders are sometimes distinguished as C1 (exposure-outcome confounders) and C2 (mediator-outcome confounders). Note that there may also be potential confounding of the exposure-mediator relationship.</p>
</section>
<section id="sec-natural" class="level3">
<h3 class="anchored" data-anchor-id="sec-natural">Controlled versus natural effects</h3>
<p>Second, depending upon the model and options selected, the CMAverse output may contain terms that do not exactly match the four-way total effect decomposition components described in <a href="https://reluctantcriminologists.com/blog-posts/%5B7%5D/modmadness-pt2.html#sec-fourwaydecomp">Part 2</a>. I recommend reviewing those four components (<em>CDE</em>; <em>PIE</em>; <em>INT<sub>ref</sub></em>, <em>INT<sub>med</sub></em>) if needed as they are foundational to understanding CMAverse’s effect decomposition.</p>
<p>Direct Effects: You should recognize the <em>controlled direct effect</em> (<em>CDE</em>). However, the CMAverse output may also contain estimates for a <em>pure natural direct effect</em> (<em>PNDE</em>) and a <em>total natural direct effect</em> (<em>TNDE</em>).</p>
<p>Indirect Effects: Instead of encountering a <em>pure indirect effect</em> (<em>PIE</em>) estimate, the output might instead contain estimates for a <em>pure natural indirect effect</em> (<em>PNIE</em>) and a <em>total natural indirect effect</em> (<em>TNIE</em>).</p>
<p>Recall, controlled direct effects hold the mediator constant at a specific value (M=m). For example, a controlled direct effect (<em>CDE</em>) might contrast expected outcomes across A=0 and A=1 while holding the mechanism constant at a specific value like M=0.</p>
<p>Understanding natural effects requires comprehending and extending upon the counterfactual contrasts underlying the <em>CDE</em> described in Part 2. Remember that, in the presence of mediation, the mediator is expected to change as the exposure changes. So, setting the mediator to a constant value (e.g., M=0) may not provide a realistic or “natural” contrast. Natural effects allow the mediator to vary as it “naturally” would across exposure conditions, and they are then estimated by holding the mediator constant at specific counterfactual values that the mediator would be expected to take under specified exposure conditions.</p>
<p>For example, we might estimate a (pure) natural direct effect as a contrast in Y across exposure levels A=0 and A=1 when M is set to the level it is expected to be when we do[A=0] (i.e., M0). Modifying the notation used above, we can summarize this contrast as Y(do[A=1],do[M<sub>A=0</sub>]) - Y(do[A=0],do[M<sub>A=0</sub>]), or Y10 - Y00. You might notice that this overlaps with the notation presented in Part 2; however, that post presented simplified “natural” contrasts for the sake of clarity in explaining the basic decomposition components. It is important to realize, though, that do[M<sub>A=0</sub>] is not necessarily the same as setting M to m=0, <em>unless</em> the mechanism is expected to equal “0” when A=0.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="its-natural.jpg" class="img-fluid figure-img"></p>
<figcaption>“Natural” effects are estimated by allowing the mediator to vary as it naturally would across exposure conditions and then setting it to specific counterfactual values.</figcaption>
</figure>
</div>
<p>You can find <a href="https://www.publichealth.columbia.edu/research/population-health-methods/causal-mediation">more detailed descriptions elsewhere</a> of the differences between controlled and natural effects. Once you wrap your head around these important distinctions between counterfactual contrasts and their relations to natural and controlled effects, then you may find yourself beginning to comprehend other important issues underlying mediation, moderation, and total effect decomposition.</p>
<p>First, in a linear model without interactions (i.e., where <em>INT<sub>ref</sub></em>=0 and <em>INT<sub>med</sub></em>=0), the <em>CDE</em> estimates will not change across different values of M. Additionally, in such models, controlled and natural direct effects will converge on the same estimates. This is because doing A=1 (versus A=0) will have the same effect on Y at all values of M, so doing M=0 or doing M<sub>A=0</sub> will generate the same direct effect estimate. This should become apparent in the examples using simulated data below.</p>
<p>Second, as you have probably figured out by now, things are not as straightforward in more complex models with nonlinear link functions or exposure-mediator interactions. For instance, when the effect of the exposure varies across levels of the mechanism, as it would in the presence of an exposure-mediator interaction, controlled (Y1m - Y0m) and natural (e.g., Y10 - Y00) direct effect estimates may vary as well. This, too, should become apparent in the examples below.</p>
<p>Third, when there are nonlinearities or exposure-mediator interactions, one could conceivably estimate a different <em>CDE</em> for every possible value of M! This makes it impossible to perform effect decomposition in the presence of an interaction using controlled effects. However, the counterfactual contrasts underlying natural direct and indirect effect estimates are uniquely defined so there is a single value even in the presence of nonlinearities and exposure-mediator interactions. This permits us to perform effect decomposition even in those situations involving more complex causal relationships.</p>
<p>Put differently, given the same exposure contrasts (e.g., setting <code>astar=0</code> and <code>a=1</code> in CMAverse models), changing the mediator value (e.g, from <code>mval = list(0)</code> to <code>mval = list(1)</code>) may result in different controlled direct effect estimates, but it will not change natural direct effect estimates. This may not be apparent in the examples below, but you can easily test it yourself (e.g., by copying my code, setting <code>mval</code> to different mediator values, and comparing results).</p>
</section>
<section id="sec-pure" class="level3">
<h3 class="anchored" data-anchor-id="sec-pure">Pure versus total effects</h3>
<p>I just told you that there is only one natural direct and natural indirect effect. Yet, your CMAverse output will probably show more than one natural direct and indirect effect estimate! Do not lose trust in me just yet. It is more accurate to say that there is only one “pure” natural direct effect, and there is only one “total” natural direct effect estimate. So, what is the difference between “pure” and “total” effects?</p>
<p>Ultimately, the difference between “pure” and “total” effects comes down to the nonzero “mediated interaction” or <em>INT<sub>med</sub></em> estimate that we may find when there is an exposure-mediator interaction. Recall, the <em>INT<sub>med</sub></em> estimate describes how, in the presence of both mediation and moderation, we can contribute some differences in the effect of X on Y across different levels of M to the fact that X <em>causes</em> different levels of M. Well, when we decompose mediation and moderation components, should we attribute <em>INT<sub>med</sub></em> effects to mediation processes or to moderation processes?</p>
<p>That is, are <em>INT<sub>med</sub></em> effects best thought of as indirect effects, or are they best thought of as interaction effects? The secret to understanding the difference between “pure” and “total” effect estimates, and which specific ones you will want to interpret, lies in your answer to that question.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="catfight.jpg" class="img-fluid figure-img"></p>
<figcaption>When interpreting “pure” and “total” effects, remember the “total” cat won the fight over the <em>INT<sub>med</sub></em> component.</figcaption>
</figure>
</div>
<p>Fundamentally, <em>INT<sub>med</sub></em> effects are simultaneously indirect <em>and</em> interaction effects. However, depending upon your research question and estimand of interest, you may wish to attribute that <em>INT<sub>med</sub></em> component to the “direct” effect of X on Y at specific counterfactual values of M (i.e., absorbed into heterogeneous estimates of direct effects across values of M) or, instead, to the “indirect” effect of X on Y through M. In any case, there are a few important points to remember when interpreting these effects.</p>
<p>First, “pure” effects <em>do not</em> include the <em>INT<sub>med</sub></em> component, whereas “total” effects <em>do</em> include the <em>INT<sub>med</sub></em> component. So, for instance, a “pure direct effect” does not contain <em>any</em> mediation components; rather, it purely summarizes the effect of X on Y that is due to its controlled direct effect (CDE) and any heterogeneity across M that is not due to mediation (i.e.&nbsp;attributed to <em>INT<sub>ref</sub></em> but not <em>INT<sub>med</sub></em>). Meanwhile, a “total indirect effect” contains <em>all</em> indirect effect sources, including the “pure” indirect effect (<em>PIE</em>) of X on Y through M and any interaction component that is due to mediation (i.e., <em>INT<sub>med</sub></em>).</p>
<p>Second, we always pair the following effect estimates:</p>
<ul>
<li>Pure natural direct effect &amp; total natural indirect effect (<em>PNDE</em> &amp; <em>TNIE</em>)</li>
<li>Total natural direct effect &amp; pure natural direct effect (<em>TNDE</em> &amp; <em>PNIE</em>)</li>
</ul>
<p>These pairings ensure that: (1) all mediation and moderation components (<em>CDE</em>; <em>PIE</em>; <em>INT<sub>ref</sub></em>; <em>INT<sub>med</sub></em>) are accounted for in the given pair, and (2) that the <em>INT<sub>med</sub></em> component is always counted once and only once, either in the (total) direct effect estimate or in the (total) indirect effect estimate. The table below shows which of the four decomposition components are included in each of the pure and total direct and indirect effect estimates.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="effects-table.jpg" class="img-fluid figure-img"></p>
<figcaption>Relationship between 4-way effect decomposition and CMAverse effect estimates. Modified from Table 4 in Vanderweele 2014</figcaption>
</figure>
</div>
<p>Third, since all four components of a total effect are accounted for in each of these two pairings of pure and total effects, each paired direct and indirect effect estimate essentially sums to the total effect of an exposure on an outcome. In fact, in a linear model, the <em>PNDE</em> + <em>TNIE</em> estimates quite literally will sum to the same value as the <em>TNDE</em> + <em>PNIE</em> estimates, and each of these pairs will sum to the total effect estimate. The pair you choose to interpret, then, depends upon your research question, goals, and estimand of interest.</p>
<p>Fourth, in the absence of an exposure-mediator interaction - such as when the interaction term equals zero or when you ignore a nonzero interaction term by not including it in the model - then the <em>CDE</em>, <em>TNDE</em>, and <em>PNDE</em> estimates all will converge to the same value. This is because the <em>INT<sub>ref</sub></em> and <em>INT<sub>med</sub></em> components are essentially fixed to zero in these situations, either by the data or by the researcher.</p>
<p>That’s enough talking. Let’s start walking with a simulation.</p>
</section>
</section>
<section id="sec-simulate" class="level2">
<h2 class="anchored" data-anchor-id="sec-simulate">Simulate data</h2>
<p>I start by simulating n=3,000 observations, which should allow us to generate relatively precise estimates of each estimated component. We have more than enough going on; we do not need to deal simultaneously with issues related to particularly noisy estimates.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">0</span>, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate data (Sim.2)</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1138</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">3000</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>def2 <span class="ot">&lt;-</span> <span class="fu">defData</span>(<span class="at">varname =</span> <span class="st">"ParentSupport"</span>, <span class="at">dist =</span> <span class="st">"normal"</span>, </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">formula =</span> <span class="dv">0</span>, <span class="at">variance =</span> <span class="dv">1</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>def2 <span class="ot">&lt;-</span> <span class="fu">defData</span>(def2, <span class="at">varname =</span> <span class="st">"WeakMoralBlfs"</span>, <span class="at">dist =</span> <span class="st">"poisson"</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">formula =</span> <span class="st">"-.3 + (-.3)*ParentSupport"</span>, <span class="at">link =</span> <span class="st">"log"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>def2 <span class="ot">&lt;-</span> <span class="fu">defData</span>(def2, <span class="at">varname =</span> <span class="st">"Delinquency"</span>, <span class="at">dist =</span> <span class="st">"poisson"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">formula =</span> <span class="st">"-.7 + (-.25)*ParentSupport + .4*WeakMoralBlfs + </span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="st">    (-.15)*ParentSupport*WeakMoralBlfs"</span>, <span class="at">link =</span> <span class="st">"log"</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>def2 <span class="ot">&lt;-</span> <span class="fu">defData</span>(def2, <span class="at">varname =</span> <span class="st">"Delinquency2"</span>, <span class="at">dist =</span> <span class="st">"poisson"</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">formula =</span> <span class="st">"-.7 + (-.25)*ParentSupport + .4*WeakMoralBlfs + </span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="st">    (-.15)*ParentSupport*WeakMoralBlfs"</span>, <span class="at">link =</span> <span class="st">"log"</span>)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>simdat2 <span class="ot">&lt;-</span> <span class="fu">genData</span>(n, def2)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">#NOTE: Simulated alternative "Delinquency2" variable to illustrate interaction </span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># on linear estimation scale in nonlinear model</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co"># simdat2 %&gt;% sjPlot::view_df()</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co"># simdat2 %&gt;% </span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(x=WeakMoralBlfs, y=Delinquency)) +</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point()</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co"># cap LowMoral at 5 (0-5 item) - randomly replace oob values with values in bounds </span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>inds2 <span class="ot">&lt;-</span> simdat2<span class="sc">$</span>WeakMoralBlfs <span class="sc">&gt;</span> <span class="dv">5</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>simdat2<span class="sc">$</span>WeakMoralBlfs[inds2] <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">sum</span>(inds2), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>simdat2<span class="sc">$</span>StrgMoralBlfs <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="sc">-</span> simdat2<span class="sc">$</span>WeakMoralBlfs</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="co"># cap Delinquency at 7 (0-7 item) - randomly replace oob values with in bounds values</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>inds2 <span class="ot">&lt;-</span> simdat2<span class="sc">$</span>Delinquency <span class="sc">&gt;</span> <span class="dv">7</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>simdat2<span class="sc">$</span>Delinquency[inds2] <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">7</span>, <span class="fu">sum</span>(inds2), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a><span class="co"># inds3 &lt;- simdat2$Delinquency2 &gt; 7</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a><span class="co"># simdat2$Delinquency2[inds3] &lt;- sample(0:7, sum(inds3), replace = TRUE)</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Truncation minimizes relative interaction, so not truncate Delinquency2 </span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># increases relative differences on outcome scale for viz in final example</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a><span class="co"># simdat2 %&gt;% sjPlot::view_df()</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co"># simdat2 %&gt;%</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(x=WeakMoralBlfs, y=Delinquency)) +</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point()</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="co">#Even with n=10k, need to consider collapsing low values for StrgMoralBlfs and recenter to min=0</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a><span class="co">#Raise points re: rare events &amp; skewed data</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># out of n=10k, 18.1% of cases have StrgMoralBlfs &lt;=3 </span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>      <span class="co"># (nrow(subset(simdat2, StrgMoralBlfs &lt;=3))/10000)*100</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># out of n=10k, 1.02% (n=102) of cases have StrgMoralBlfs &lt;=1 </span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>      <span class="co"># (nrow(subset(simdat2, StrgMoralBlfs &lt;=1))/10000)*100</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># out of n=10k, 0.17% (n=17) of cases have StrgMoralBlfs &lt;=0 </span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>      <span class="co"># (nrow(subset(simdat2, StrgMoralBlfs &lt;=1))/10000)*100</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a><span class="co">#Collapse [0,1] values &amp; recenter StrgMoralBlfs from 0-4</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>simdat3 <span class="ot">&lt;-</span> simdat2 <span class="sc">%&gt;%</span> </span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">StrgMoralBlfs =</span> <span class="fu">if_else</span>(</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>      StrgMoralBlfs <span class="sc">&lt;=</span> <span class="dv">1</span>, <span class="dv">1</span>, StrgMoralBlfs), </span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">StrgMoralBlfs =</span> StrgMoralBlfs <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a><span class="co"># summary(simdat3$StrgMoralBlfs)</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(simdat3, <span class="fu">aes</span>(<span class="at">x =</span> ParentSupport, <span class="at">y =</span> StrgMoralBlfs)) <span class="sc">+</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">"#E69F00"</span>) <span class="sc">+</span></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Densigram</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a><span class="fu">ggMarginal</span>(p, <span class="at">type =</span> <span class="st">"densigram"</span>, </span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill=</span><span class="st">"#E69F00"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The plot above shows the joint distribution of the exposure (A=ParentSupport) and mechanism (M=StrgMoralBlfs). Notice the lack of observations in the bottom right of the plot, at the highest values of parental support (A&gt;2) and lowest values of strong moral beliefs (M=0). This pattern might be expected given the existence of mediation processes; that is, high parental support causes strong moral beliefs, so we might not expect to observe the lowest values of the mechanism at the highest exposure levels.</p>
<p>Note, too, that there are observations with high mechanism values (e.g., strong moral beliefs, or M=4) across a wide range of exposure levels (e.g., from -2SD to +3SD levels of parent support). This means a nonzero <em>INT<sub>ref</sub></em> component is possible, since a nonzero reference interaction requires that the mechanism be present even in the absence (or, in this case, at low levels) of the exposure.</p>
<p>Finally, there are relatively few observations at the lowest value (M=0) of the skewed, Poisson-distributed mechanism across the range of exposure levels. One consequence is that estimates of the causal effect of the exposure generated at the highest mechanism levels will be much noisier and more uncertain than those generated at the lowest mechanism levels. This is the case despite simulating a relatively large sample of n=3,000 observations. Assuming distributions of variables like moral beliefs and delinquency tend to be similarly skewed in the real world (and they are), you can imagine how much noisier and more uncertain such estimates might be in smaller real-world criminological samples.</p>
</section>
<section id="sec-plots" class="level2">
<h2 class="anchored" data-anchor-id="sec-plots">Regressions &amp; interaction plots</h2>
<p>Now that I have simulated data resembling real-world self-reported criminological data, my next step will be to build regression models and then estimate and plot marginal effects of parental support on delinquency at different levels of strong moral beliefs to visualize any exposure-mediator interactions in these data.</p>
<p>As I explained in <a href="https://reluctantcriminologists.com/blog-posts/%5B6%5D/modmadness-pt1.html">Part 1</a>, I will want to build a generalized linear model with a nonlinear link function that can flexibly describe the data generating processes causing the skewed distributions and nonlinearities observed in the simulated data. Additionally, I will want to add an interaction term to that model to account for the possibility of an exposure-mediator interaction on the estimation scale.</p>
<p>Yet, I will start by presenting results from a simple linear interaction model. Why? Well, because so many researchers in our field seem to be most comfortable, if not outright obsessed, with simple linear models. What else explains our field’s collective unwillingness to move on from them?</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Sim.2 linear model</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>lm2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Delinquency <span class="sc">~</span> ParentSupport <span class="sc">*</span> StrgMoralBlfs, <span class="at">data=</span>simdat3)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Sim.2 nonlinear model</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>glm2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(Delinquency <span class="sc">~</span> ParentSupport <span class="sc">*</span> StrgMoralBlfs, <span class="at">data=</span>simdat3, <span class="at">family=</span><span class="st">"poisson"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># function for custom p-values</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>roundp <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">if_else</span>(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(x), </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NA_character_</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">if_else</span>(x <span class="sc">&lt;</span> <span class="fl">0.001</span>, <span class="fu">format</span>(x, <span class="at">digits =</span> <span class="dv">3</span>, <span class="at">scientific =</span> <span class="cn">TRUE</span>), <span class="fu">format</span>(<span class="fu">round</span>(x, <span class="dv">3</span>), <span class="at">scientific =</span> F))</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  } </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co"># function for reg output w/custom p-values</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>regsum <span class="ot">&lt;-</span> <span class="cf">function</span>(mymod) {</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(mymod, <span class="at">intercept=</span><span class="cn">TRUE</span>, <span class="at">pvalue_fun =</span> roundp) <span class="sc">%&gt;%</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_significance_stars</span>(</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">hide_se =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">hide_ci =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">hide_p =</span> <span class="cn">FALSE</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression output</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>Ex2tab1 <span class="ot">&lt;-</span> <span class="fu">regsum</span>(lm2) <span class="sc">%&gt;%</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Linear regression predicting delinquency values"</span>)</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>Ex2tab2 <span class="ot">&lt;-</span> <span class="fu">regsum</span>(glm2) <span class="sc">%&gt;%</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Poisson regression predicting delinquency event rates"</span>)</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot interactions </span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>  <span class="co">#plot at all four values: minimum (0), (1), median (2), and maximum (3) strong moral beliefs</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">#show x-axis from approx -2sd to 2sd parental support</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>plot_lm2 <span class="ot">&lt;-</span> <span class="fu">plot_model</span>(lm2, <span class="at">type =</span> <span class="st">"pred"</span>, <span class="at">show.data =</span> <span class="cn">FALSE</span>,   </span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>                       <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"ParentSupport"</span>, <span class="st">"StrgMoralBlfs [0,2,4]"</span>)) <span class="sc">+</span> </span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">7</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="dv">2</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_colorblind</span>() <span class="sc">+</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Parental Support"</span>, </span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Delinquency"</span>,</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Predicted conditional marginal effects of parent support on delinquency"</span>, </span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Plotted at minimum (0), scale midpoint (2), &amp; maximum (4) strong moral beliefs</span><span class="sc">\n</span><span class="st">(Linear regression, n=3k simulated observations)"</span>)  </span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>plot_glm2 <span class="ot">&lt;-</span> <span class="fu">plot_model</span>(glm2, <span class="at">type =</span> <span class="st">"pred"</span>,  <span class="at">show.data=</span><span class="cn">FALSE</span>,</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>                       <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"ParentSupport"</span>, <span class="st">"StrgMoralBlfs [0,2,4]"</span>)) <span class="sc">+</span> </span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">7</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="dv">2</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">8</span>)) <span class="sc">+</span> </span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_colorblind</span>() <span class="sc">+</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Parental Support"</span>, </span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Delinquency"</span>,</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Predicted conditional marginal effects of parent support on delinquency"</span>, </span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Plotted at minimum (0), scale midpoint (2), &amp; maximum (4) strong moral beliefs</span><span class="sc">\n</span><span class="st">(Poisson regression, n=3k simulated observations)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="general-linear-interaction-model" class="level2">
<h2 class="anchored" data-anchor-id="general-linear-interaction-model">General linear interaction model</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">General linear interaction model results</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Prediction plots</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Prediction plots with data</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Prediction plots (min-to-max ParentSupport)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false">Prediction plots with data (M=0 only)</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Ex2tab1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="wrxfwrmosu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#wrxfwrmosu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wrxfwrmosu thead, #wrxfwrmosu tbody, #wrxfwrmosu tfoot, #wrxfwrmosu tr, #wrxfwrmosu td, #wrxfwrmosu th {
  border-style: none;
}

#wrxfwrmosu p {
  margin: 0;
  padding: 0;
}

#wrxfwrmosu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wrxfwrmosu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wrxfwrmosu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wrxfwrmosu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wrxfwrmosu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wrxfwrmosu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wrxfwrmosu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wrxfwrmosu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wrxfwrmosu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wrxfwrmosu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wrxfwrmosu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wrxfwrmosu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wrxfwrmosu .gt_spanner_row {
  border-bottom-style: hidden;
}

#wrxfwrmosu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wrxfwrmosu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wrxfwrmosu .gt_from_md > :first-child {
  margin-top: 0;
}

#wrxfwrmosu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wrxfwrmosu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wrxfwrmosu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wrxfwrmosu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wrxfwrmosu .gt_row_group_first td {
  border-top-width: 2px;
}

#wrxfwrmosu .gt_row_group_first th {
  border-top-width: 2px;
}

#wrxfwrmosu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrxfwrmosu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wrxfwrmosu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wrxfwrmosu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wrxfwrmosu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrxfwrmosu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wrxfwrmosu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wrxfwrmosu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wrxfwrmosu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wrxfwrmosu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wrxfwrmosu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrxfwrmosu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wrxfwrmosu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrxfwrmosu .gt_left {
  text-align: left;
}

#wrxfwrmosu .gt_center {
  text-align: center;
}

#wrxfwrmosu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wrxfwrmosu .gt_font_normal {
  font-weight: normal;
}

#wrxfwrmosu .gt_font_bold {
  font-weight: bold;
}

#wrxfwrmosu .gt_font_italic {
  font-style: italic;
}

#wrxfwrmosu .gt_super {
  font-size: 65%;
}

#wrxfwrmosu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wrxfwrmosu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wrxfwrmosu .gt_indent_1 {
  text-indent: 5px;
}

#wrxfwrmosu .gt_indent_2 {
  text-indent: 10px;
}

#wrxfwrmosu .gt_indent_3 {
  text-indent: 15px;
}

#wrxfwrmosu .gt_indent_4 {
  text-indent: 20px;
}

#wrxfwrmosu .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Linear regression predicting delinquency values</th>
</tr>
<tr class="odd gt_col_headings">
<th id="<strong>Characteristic</strong>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="<strong>Beta</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Beta</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
<th id="<strong>SE</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>SE</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span></th>
<th id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span></th>
<th id="<strong>p-value</strong>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>p-value</strong></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">(Intercept)</td>
<td class="gt_row gt_center" headers="estimate">2.1***</td>
<td class="gt_row gt_center" headers="std.error">0.068</td>
<td class="gt_row gt_center" headers="ci">2.0, 2.3</td>
<td class="gt_row gt_center" headers="p.value">1.11e-190</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">ParentSupport</td>
<td class="gt_row gt_center" headers="estimate">-1.2***</td>
<td class="gt_row gt_center" headers="std.error">0.063</td>
<td class="gt_row gt_center" headers="ci">-1.3, -1.1</td>
<td class="gt_row gt_center" headers="p.value">1.46e-72</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">StrgMoralBlfs</td>
<td class="gt_row gt_center" headers="estimate">-0.42***</td>
<td class="gt_row gt_center" headers="std.error">0.020</td>
<td class="gt_row gt_center" headers="ci">-0.46, -0.38</td>
<td class="gt_row gt_center" headers="p.value">9.17e-91</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">ParentSupport * StrgMoralBlfs</td>
<td class="gt_row gt_center" headers="estimate">0.26***</td>
<td class="gt_row gt_center" headers="std.error">0.019</td>
<td class="gt_row gt_center" headers="ci">0.23, 0.30</td>
<td class="gt_row gt_center" headers="p.value">9.07e-43</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="even">
<td colspan="5" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> *p&lt;0.05; **p&lt;0.01; ***p&lt;0.001</td>
</tr>
<tr class="odd">
<td colspan="5" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> SE = Standard Error, CI = Confidence Interval</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>plot_lm2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot_lm2 &amp; </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(legend.position = 'bottom',</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#         legend.direction = 'horizontal') </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#dev = "png" </span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.args = list(type = "cairo-png")</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#use ggeffects::ggpredict() to save plot_model data for use in ggplot </span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>lm2df <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(lm2, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"ParentSupport"</span>, <span class="st">"StrgMoralBlfs [0,2,4]"</span>))</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#save subsets of simdat3 to plot observations where StrgMoralBlfs in (0,2,4)</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>simdat3sub <span class="ot">&lt;-</span> simdat3 <span class="sc">%&gt;%</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(StrgMoralBlfs <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">StrgMoralBlfs =</span> <span class="fu">as_factor</span>(StrgMoralBlfs))</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># prediction plot with data subset - use ggblend to improve overlap viz</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>predplot1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>simdat3sub, <span class="fu">aes</span>(<span class="at">x=</span>ParentSupport, <span class="at">y=</span>Delinquency, </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color=</span>StrgMoralBlfs, <span class="at">group=</span>StrgMoralBlfs)) <span class="sc">+</span> </span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">7</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_point(data=simdat3sub[simdat3sub$StrgMoralBlfs == 0], alpha=0.4)  +</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_point(data=simdat3sub[simdat3sub$StrgMoralBlfs %in% c(2,4)], alpha=0.1) +</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">|&gt;</span> <span class="fu">partition</span>(<span class="fu">vars</span>(StrgMoralBlfs)) <span class="sc">|&gt;</span> <span class="fu">blend</span>(<span class="st">"lighten"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blend</span>(<span class="st">"multiply"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>)<span class="sc">+</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_colorblind</span>() <span class="sc">+</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="dv">2</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">8</span>)) <span class="sc">+</span> </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span>lm2df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted,</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>                             <span class="at">linetype=</span>group, <span class="at">color=</span>group), <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span>  </span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>lm2df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted, </span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>                               <span class="at">ymin=</span>conf.low, <span class="at">ymax=</span>conf.high, <span class="at">fill=</span>group), </span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha=</span><span class="fl">0.3</span>, <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"solid"</span>, <span class="st">"solid"</span>, <span class="st">"solid"</span>)) <span class="sc">+</span> </span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">linetype=</span><span class="st">"none"</span>, <span class="at">fill=</span><span class="st">"none"</span>) <span class="sc">+</span> </span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Parental Support"</span>,</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Delinquency"</span>,</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Predicted conditional marginal effects of parent support on delinquency"</span>, </span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Plotted at minimum (0), scale midpoint (2), &amp; maximum (4) strong moral beliefs</span><span class="sc">\n</span><span class="st">(Poisson regression, n=3k simulated observations)"</span>) </span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>predplot1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>plot_lm2 <span class="sc">+</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(simdat3<span class="sc">$</span>ParentSupport), <span class="fu">max</span>(simdat3<span class="sc">$</span>ParentSupport)), </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="dv">9</span>)) <span class="sc">+</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Parental Support"</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Delinquency"</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Predicted conditional marginal effects of parent support on delinquency"</span>, </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Plotted across full range (min-to-max) of parental support values and</span><span class="sc">\n</span><span class="st">at minimum (0), scale midpoint (2), &amp; maximum (4) strong moral beliefs</span><span class="sc">\n</span><span class="st">(Poisson regression, n=3k simulated observations)"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>simdat3sub, <span class="fu">aes</span>(<span class="at">x=</span>ParentSupport, <span class="at">y=</span>Delinquency, </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color=</span>StrgMoralBlfs, <span class="at">group=</span>StrgMoralBlfs)) <span class="sc">+</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">7</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>simdat3sub[simdat3sub<span class="sc">$</span>StrgMoralBlfs <span class="sc">==</span> <span class="dv">0</span>], <span class="at">alpha=</span><span class="fl">0.4</span>)  <span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_colorblind</span>() <span class="sc">+</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="dv">2</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">8</span>)) <span class="sc">+</span> </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span>lm2df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">linetype=</span>group, <span class="at">color=</span>group), <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span>  </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>lm2df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted, </span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                               <span class="at">ymin=</span>conf.low, <span class="at">ymax=</span>conf.high, <span class="at">fill=</span>group), </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha=</span><span class="fl">0.3</span>, <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"solid"</span>, <span class="st">"solid"</span>, <span class="st">"solid"</span>)) <span class="sc">+</span> </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">linetype=</span><span class="st">"none"</span>, <span class="at">fill=</span><span class="st">"none"</span>) <span class="sc">+</span> </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Parental Support"</span>,</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Delinquency"</span>,</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Predicted conditional marginal effects of parent support on delinquency"</span>, </span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Plotted at minimum (0) strong moral beliefs</span><span class="sc">\n</span><span class="st">(Poisson regression, n=3k simulated observations)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Hey, the linear interaction model detected a substantial interaction between parental support and moral beliefs! So far, so good, right? Not so fast. How well do you think the linear regression slopes describe the data and underlying data generating processes?</p>
<p>I attempt to visualize this in the second figure above (third tab, entitled “Prediction Plots with Data”), which overlays the marginal effect prediction lines with a scatterplot of the relevant data (i.e., a subset of Strong Moral Beliefs values equal to “0”, “2”, and “4”). Close examination of this figure appears to reveal some areas of poor fit between the model’s linear predictions and the underlying data. Of particular concern are some out of bounds predictions below “0” on predicted delinquency counts (bottom right side of the plot). Of course, you expected some problems with a linear model because you read <a href="https://reluctantcriminologists.com/blog-posts/%5B6%5D/modmadness-pt1.html">Part 1</a> entry.</p>
<p>Yet, what would happen if I were to use this particular linear interaction model to make predictions about delinquency values at higher exposure levels? After all, our maximum observed ParentSupport score is 3.6, but we are only plotting from about -2SD to +2SD values on this variable in the first figure. You can see what happens when I extend the prediction plot to the full observed (minimum to maximum) range of ParentSupport scores in the third figure (fourth tab) above.</p>
<p>Perhaps unsurprisingly, the crossover interaction appears even more pronounced in this version of the plot. With the exception of predictions at the highest mechanism values (M=4), this model predicts <em>negative</em> delinquency counts at high observed exposure levels; of course, negative outcome scores were not observed and are not even logically possible in this case. As discussed in Part 1, these sorts of problematic model predictions are routinely generated as artifacts of inappropriately applying a linear model to nonlinear data.</p>
<p>Speaking of model issues, I often think regression results like these convey an illusory degree of precision around model-based estimates and predictions. To illustrate, check out the fourth figure (fifth tab) above, which overlays marginal predictions with a scatterplot of only the subset of observations for which M=0.</p>
<p>In this plot, notice the relative lack of observations at M=0 despite a relatively large sample (n=3,000 total)? I referenced this issue earlier after simulating the data. Now, look at the spread of the relatively sparse observations where M=0 (black dots), and compare the confidence interval bands for the M=0 prediction line (black line). Given the scarcity of data at this mechanism level and the fit of that line to the data points in the scatterplot, do you feel that these confidence bands effectively communicate the degree of uncertainty we should have with the predictions implied by that line? Perhaps you do, and I am simply a curmudgeon. In any case, this is another topic for a different entry.</p>
<p>Now, let’s compare these results with those generated by a generalized linear model specifying a Poisson distributed outcome with a log link (aka, a “nonlinear” model).</p>
</section>
<section id="generalized-linear-poisson-nonlinear-interaction-model" class="level2">
<h2 class="anchored" data-anchor-id="generalized-linear-poisson-nonlinear-interaction-model">Generalized linear Poisson (“nonlinear”) interaction model</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Nonlinear interaction model results</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Prediction plots</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Prediction plots with data</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Prediction plots with data (M=0 only)</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Ex2tab2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="zcfhdpajps" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zcfhdpajps table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zcfhdpajps thead, #zcfhdpajps tbody, #zcfhdpajps tfoot, #zcfhdpajps tr, #zcfhdpajps td, #zcfhdpajps th {
  border-style: none;
}

#zcfhdpajps p {
  margin: 0;
  padding: 0;
}

#zcfhdpajps .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zcfhdpajps .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zcfhdpajps .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zcfhdpajps .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zcfhdpajps .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zcfhdpajps .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zcfhdpajps .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zcfhdpajps .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zcfhdpajps .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zcfhdpajps .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zcfhdpajps .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zcfhdpajps .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zcfhdpajps .gt_spanner_row {
  border-bottom-style: hidden;
}

#zcfhdpajps .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zcfhdpajps .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zcfhdpajps .gt_from_md > :first-child {
  margin-top: 0;
}

#zcfhdpajps .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zcfhdpajps .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zcfhdpajps .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zcfhdpajps .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zcfhdpajps .gt_row_group_first td {
  border-top-width: 2px;
}

#zcfhdpajps .gt_row_group_first th {
  border-top-width: 2px;
}

#zcfhdpajps .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcfhdpajps .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zcfhdpajps .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zcfhdpajps .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zcfhdpajps .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcfhdpajps .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zcfhdpajps .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zcfhdpajps .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zcfhdpajps .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zcfhdpajps .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zcfhdpajps .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcfhdpajps .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zcfhdpajps .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcfhdpajps .gt_left {
  text-align: left;
}

#zcfhdpajps .gt_center {
  text-align: center;
}

#zcfhdpajps .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zcfhdpajps .gt_font_normal {
  font-weight: normal;
}

#zcfhdpajps .gt_font_bold {
  font-weight: bold;
}

#zcfhdpajps .gt_font_italic {
  font-style: italic;
}

#zcfhdpajps .gt_super {
  font-size: 65%;
}

#zcfhdpajps .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zcfhdpajps .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zcfhdpajps .gt_indent_1 {
  text-indent: 5px;
}

#zcfhdpajps .gt_indent_2 {
  text-indent: 10px;
}

#zcfhdpajps .gt_indent_3 {
  text-indent: 15px;
}

#zcfhdpajps .gt_indent_4 {
  text-indent: 20px;
}

#zcfhdpajps .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Poisson regression predicting delinquency event rates</th>
</tr>
<tr class="odd gt_col_headings">
<th id="<strong>Characteristic</strong>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="<strong>log(IRR)</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1,2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>log(IRR)</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1,2</sup></span></th>
<th id="<strong>SE</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>SE</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span></th>
<th id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span></th>
<th id="<strong>p-value</strong>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>p-value</strong></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">(Intercept)</td>
<td class="gt_row gt_center" headers="estimate">0.99***</td>
<td class="gt_row gt_center" headers="std.error">0.064</td>
<td class="gt_row gt_center" headers="ci">0.86, 1.1</td>
<td class="gt_row gt_center" headers="p.value">9.75e-54</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">ParentSupport</td>
<td class="gt_row gt_center" headers="estimate">-0.38***</td>
<td class="gt_row gt_center" headers="std.error">0.047</td>
<td class="gt_row gt_center" headers="ci">-0.47, -0.29</td>
<td class="gt_row gt_center" headers="p.value">1.08e-15</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">StrgMoralBlfs</td>
<td class="gt_row gt_center" headers="estimate">-0.42***</td>
<td class="gt_row gt_center" headers="std.error">0.021</td>
<td class="gt_row gt_center" headers="ci">-0.46, -0.38</td>
<td class="gt_row gt_center" headers="p.value">1.88e-90</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">ParentSupport * StrgMoralBlfs</td>
<td class="gt_row gt_center" headers="estimate">0.00</td>
<td class="gt_row gt_center" headers="std.error">0.016</td>
<td class="gt_row gt_center" headers="ci">-0.03, 0.03</td>
<td class="gt_row gt_center" headers="p.value">0.963</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="even">
<td colspan="5" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> *p&lt;0.05; **p&lt;0.01; ***p&lt;0.001</td>
</tr>
<tr class="odd">
<td colspan="5" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> IRR = Incidence Rate Ratio, SE = Standard Error, CI = Confidence Interval</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>plot_glm2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#use ggeffects::ggpredict() to save plot_model data for use in ggplot </span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>glm2df <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(glm2, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"ParentSupport"</span>, <span class="st">"StrgMoralBlfs [0,2,4]"</span>))</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#prediction plot with data subset &amp; ggblend</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>predplot2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>simdat3sub, <span class="fu">aes</span>(<span class="at">x=</span>ParentSupport, <span class="at">y=</span>Delinquency, </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color=</span>StrgMoralBlfs, <span class="at">group=</span>StrgMoralBlfs)) <span class="sc">+</span> </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">7</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_point(data=simdat3sub[simdat3sub$StrgMoralBlfs == 0], alpha=0.4)  +</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_point(data=simdat3sub[simdat3sub$StrgMoralBlfs %in% c(2,4)], alpha=0.1) +</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">|&gt;</span> <span class="fu">partition</span>(<span class="fu">vars</span>(StrgMoralBlfs)) <span class="sc">|&gt;</span> <span class="fu">blend</span>(<span class="st">"lighten"</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blend</span>(<span class="st">"multiply"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_colorblind</span>() <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="dv">2</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">8</span>)) <span class="sc">+</span> </span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span>glm2df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">linetype=</span>group, <span class="at">color=</span>group), <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span>  </span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>glm2df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted, </span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>                               <span class="at">ymin=</span>conf.low, <span class="at">ymax=</span>conf.high, <span class="at">fill=</span>group), </span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha=</span><span class="fl">0.4</span>, <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"solid"</span>, <span class="st">"solid"</span>, <span class="st">"solid"</span>)) <span class="sc">+</span> </span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">linetype=</span><span class="cn">FALSE</span>, <span class="at">fill=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Parental Support"</span>,</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Delinquency"</span>,</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Predicted conditional marginal effects of parent support on delinquency"</span>, </span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Plotted at minimum (0), scale midpoint (2), &amp; maximum (4) strong moral beliefs</span><span class="sc">\n</span><span class="st">(Poisson regression, n=3k simulated observations)"</span>) </span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>predplot2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#prediction plot with data subset &amp; ggblend</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>predplot2b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>simdat3sub, <span class="fu">aes</span>(<span class="at">x=</span>ParentSupport, <span class="at">y=</span>Delinquency, </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color=</span>StrgMoralBlfs, <span class="at">group=</span>StrgMoralBlfs)) <span class="sc">+</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">7</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>simdat3sub[simdat3sub<span class="sc">$</span>StrgMoralBlfs <span class="sc">==</span> <span class="dv">0</span>], <span class="at">alpha=</span><span class="fl">0.4</span>)  <span class="sc">+</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_colorblind</span>() <span class="sc">+</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="dv">2</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">8</span>)) <span class="sc">+</span> </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span>glm2df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">linetype=</span>group, <span class="at">color=</span>group), <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span>  </span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>glm2df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted, </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>                               <span class="at">ymin=</span>conf.low, <span class="at">ymax=</span>conf.high, <span class="at">fill=</span>group), </span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha=</span><span class="fl">0.4</span>, <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"solid"</span>, <span class="st">"solid"</span>, <span class="st">"solid"</span>)) <span class="sc">+</span> </span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">linetype=</span><span class="cn">FALSE</span>, <span class="at">fill=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Parental Support"</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Delinquency"</span>,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Predicted conditional marginal effects of parent support on delinquency"</span>, </span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Plotted at minimum (0) strong moral beliefs</span><span class="sc">\n</span><span class="st">(Poisson regression, n=3k simulated observations)"</span>) </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>predplot2b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The first thing you might notice is that the results tables show a statistically non-significant interaction term that is near-zero in magnitude on the estimation scale (logged delinquency event rates) in this model. Of course, after reading Part 1, you know better than to rely on the sign and significance of an interaction term from a generalized regression model with a nonlinear link function to draw inferences about model predictions on the outcome scale. Rather, you know it is a good idea to estimate and plot marginal effects, which I also do here.</p>
<p>Second, as with the linear model results, examination of marginal prediction plots appears to reveal an additive interaction pattern on the outcome scale (delinquency event rates). However, unlike the linear model results, the greater flexibility and appropriateness of the nonlinear functional form specified in this model permits a better fit between the marginal predictions and the data while also avoiding illogical negative delinquency predictions. The model is not perfect; for instance, we might wish to account for a threshold effect or censoring at the highest delinquency observations. Still, this model should be good enough for our purposes here.</p>
</section>
<section id="sec-indirect" class="level2">
<h2 class="anchored" data-anchor-id="sec-indirect">Whither the indirect effect?</h2>
<p>Now, for some in our field, documenting an additive interaction like this, whether generated with linear or nonlinear model specifications, would be deemed sufficient grounds for declaring a contribution to existing literature and for publishing a manuscript in a peer-reviewed journal. (Remember the <a href="https://reluctantcriminologists.com/blog-posts/%5B6%5D/modmadness-pt1#two-papers-walk-into-a-bar">hypothetical paper #2</a> from Part 1?)</p>
<p><a href="fake_paper2.jpg"><img src="fake_paper2.jpg" class="img-fluid"></a></p>
<p><a href="fake_paper2.jpg">Part 1’s “Imaginary Paper #2”</a></p>
<p>Yet, note that this model does not seem to account for the possibility of an indirect effect of parental support on delinquency through the moderating mechanism. Moreover, since the exposure causes the mechanism, is the observed interaction an example of a “mediated interaction” (<em>INT<sub>med</sub></em>)? Or, is this an example of a reference interaction (<em>INT<sub>ref</sub></em>), or perhaps both? We will use CMAverse to answer this question soon, but you might be able to intuit the answer from prediction plots and with an understanding of what these two components represent that you gained from the toe-stubbing example in Part 2.</p>
<p>Before using CMAverse, I want to first illustrate a “traditional” approach to testing for indirect effects. Commonly, researchers in our field might use what is popularly known as the classic <a href="https://www.psych.mcgill.ca/perpg/fac/falk/tutorials/mediation/methods/#baron-kenny-1986">“Baron and Kenny” (1986) causal steps approach</a> to detecting indirect effects. This “traditional” approach to testing mediation hypotheses usually involves estimating a series of regression models and then, depending upon the specific procedures adopted, estimating a “difference in coefficients” or “product of coefficients” representing causal path estimates (e.g., <em>ab</em> paths) paired with a test of significance. (See <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2819363/">MacKinnon and colleagues’ 2002</a> paper, and especially their Table 1, for a summary of these traditional approaches).<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<p>For this illustration, I will use <code>psych::mediate()</code> to estimate “traditional” direct and indirect effects of parental support on delinquency through moral beliefs. This package by default relies upon the “product of coefficients” estimation approach with bootstrapped standard errors, which is a very popular method in social sciences due perhaps to its status for years as the default method for testing indirect effects in <a href="https://www.statmodel.com/download/Causal.pdf">SEM programs like Mplus</a> as well as the increasing popularity of <a href="https://processmacro.org/index.html">PROCESS modeling</a>.</p>
</section>
<section id="sec-traditional" class="level2">
<h2 class="anchored" data-anchor-id="sec-traditional">Traditional (<em>ab</em>) linear mediation model</h2>
<p>Traditional product of coefficients approach</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">mediate</span>(Delinquency <span class="sc">~</span> ParentSupport <span class="sc">+</span> (StrgMoralBlfs), <span class="at">data =</span> simdat3, <span class="at">n.iter =</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">short =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Mediation/Moderation Analysis 
Call: psych::mediate(y = Delinquency ~ ParentSupport + (StrgMoralBlfs), 
    data = simdat3, n.iter = 2000)

The DV (Y) was  Delinquency . The IV (X) was  ParentSupport . The mediating variable(s) =  StrgMoralBlfs .

Total effect(c) of  ParentSupport  on  Delinquency  =  -0.43   S.E. =  0.02  t  =  -21.6  df=  2998   with p =  9.9e-97
Direct effect (c') of  ParentSupport  on  Delinquency  removing  StrgMoralBlfs  =  -0.33   S.E. =  0.02  t  =  -17.7  df=  2997   with p =  1.5e-66
Indirect effect (ab) of  ParentSupport  on  Delinquency  through  StrgMoralBlfs   =  -0.1 
Mean bootstrapped indirect effect =  -0.1  with standard error =  0.01  Lower CI =  -0.12    Upper CI =  -0.08
R = 0.53 R2 = 0.28   F = 580 on 2 and 2997 DF   p-value:  4.04e-297 

 To see the longer output, specify short = FALSE in the print statement or ask for the summary</code></pre>
</div>
</div>
<p>Results from the “traditional” mediation analysis show an indirect effect estimate of -0.10. You can calculate the indirect effect estimate yourself from the path diagram by multiplying the so-called <em>a</em> and <em>b</em> path coefficients, or (0.20)x(-0.48) = -0.10, hence the “product of coefficients” terminology.</p>
<p>The estimate is also statistically significant. Of course, with a simulated sample size of n=3,000, even modest non-zero estimates will be significant. You will rarely find us pointing to statistical significance as a useful information signal in our blog entries; that is a topic for another time.</p>
<p>To me, a better question here might be whether, given a causal indirect effect of this estimated magnitude, a change in exposure (e.g., from “0” to “1”) would be predicted to generate differences of substantively meaningful magnitudes on the outcome scale indirectly through a mechanistic change in the mediator. You might notice that our interaction plots above depicting predicted marginal effects provide us substantially greater leverage for answering this type of question.</p>
<p>Still, we are on a mission here, so I will avoid the temptation to embark on a yet another tangent, this time about effect sizes. Instead, I will simply note that this indirect effect output and path diagram might be viewed as sufficient in our field to declare another contribution and submit yet another paper to the publication pile. (Remember <a href="https://reluctantcriminologists.com/blog-posts/%5B6%5D/modmadness-pt1#two-papers-walk-into-a-bar">hypothetical paper #1</a> from Part 1?)</p>
<p><a href="fake_paper1.jpg"><img src="fake_paper1.jpg" class="img-fluid"></a></p>
<p><a href="fake_paper1.jpg">Part 1’s “Imaginary Paper #1”</a></p>
<p>Let’s move to <code>CMAverse</code>, starting with a simple linear mediation model that reproduces key results from the “traditional” mediation approach.</p>
</section>
<section id="sec-CMAlin-noint" class="level2">
<h2 class="anchored" data-anchor-id="sec-CMAlin-noint">Linear CMA model, no <em>EMint</em></h2>
<p>Below, I use the <code>cmest()</code> function from the <code>CMAverse</code> R package. Specifying the mediator and outcome distributions (<code>mreg</code> and <code>yreg</code>) as “linear” and setting the exposure-mediator coefficient (<code>EMint</code>) to “FALSE” makes this model equivalent to the traditional mediation model above.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1138</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>est2 <span class="ot">&lt;-</span> <span class="fu">cmest</span>(<span class="at">data =</span> simdat3, <span class="at">model =</span> <span class="st">"rb"</span>, <span class="at">outcome =</span> <span class="st">"Delinquency"</span>, <span class="at">exposure =</span> <span class="st">"ParentSupport"</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">mediator =</span> <span class="st">"StrgMoralBlfs"</span>, <span class="at">EMint =</span> <span class="cn">FALSE</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">mreg =</span> <span class="fu">list</span>(<span class="st">"linear"</span>), <span class="at">yreg =</span> <span class="st">"linear"</span>,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">astar =</span> <span class="dv">0</span>, <span class="at">a =</span> <span class="dv">1</span>, <span class="at">mval =</span> <span class="fu">list</span>(<span class="dv">0</span>),</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">estimation =</span> <span class="st">"imputation"</span>, <span class="at">inference =</span> <span class="st">"bootstrap"</span>, <span class="at">nboot =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Results: linear no EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Default plot: linear no EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Full output: linear no EMint</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>est2dat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(est2<span class="sc">$</span>effect.pe) <span class="sc">%&gt;%</span> <span class="fu">rownames_to_column</span>(<span class="st">"CMA_est"</span>) </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>est2dattab <span class="ot">&lt;-</span> est2dat <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">trad_est =</span> <span class="fu">c</span>(<span class="st">"direct"</span>, <span class="st">"--"</span>, <span class="st">"--"</span>, <span class="st">"indirect"</span>, <span class="st">"--"</span>, <span class="st">"total"</span>, <span class="st">"prop_med"</span>), </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate =</span> <span class="fu">c</span>(<span class="sc">-</span>.<span class="dv">33</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="sc">-</span>.<span class="dv">10</span>, <span class="cn">NA</span>, <span class="sc">-</span>.<span class="dv">43</span>, .<span class="dv">23</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"linear_noEM"</span> <span class="ot">=</span> <span class="st">"est2$effect.pe"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(trad_est, estimate) </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>est2dattab <span class="sc">%&gt;%</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"CMAverse&lt;br&gt;(linear)"</span>), <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"CMA_est"</span>, <span class="st">"linear_noEM"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"Traditional&lt;br&gt;(linear)"</span>), <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"trad_est"</span>,<span class="st">"estimate"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_add</span>(<span class="st">'blank'</span> <span class="ot">=</span> <span class="st">''</span>, <span class="at">.after =</span> <span class="st">'estimate'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_label</span>(<span class="st">'blank'</span> <span class="ot">=</span> <span class="fu">md</span>(<span class="st">'&amp;emsp;&amp;emsp;&amp;emsp;'</span>),</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">trad_est =</span> <span class="st">"effect"</span>, </span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">CMA_est =</span> <span class="st">"effect"</span>,</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">estimate =</span> <span class="st">"estimate"</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">linear_noEM =</span> <span class="fu">html</span>(<span class="st">"No_EMint&lt;br&gt;estimate"</span>)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>               )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="babjvbhiev" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#babjvbhiev table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#babjvbhiev thead, #babjvbhiev tbody, #babjvbhiev tfoot, #babjvbhiev tr, #babjvbhiev td, #babjvbhiev th {
  border-style: none;
}

#babjvbhiev p {
  margin: 0;
  padding: 0;
}

#babjvbhiev .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#babjvbhiev .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#babjvbhiev .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#babjvbhiev .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#babjvbhiev .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#babjvbhiev .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#babjvbhiev .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#babjvbhiev .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#babjvbhiev .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#babjvbhiev .gt_spanner_row {
  border-bottom-style: hidden;
}

#babjvbhiev .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#babjvbhiev .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#babjvbhiev .gt_from_md > :first-child {
  margin-top: 0;
}

#babjvbhiev .gt_from_md > :last-child {
  margin-bottom: 0;
}

#babjvbhiev .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#babjvbhiev .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#babjvbhiev .gt_row_group_first td {
  border-top-width: 2px;
}

#babjvbhiev .gt_row_group_first th {
  border-top-width: 2px;
}

#babjvbhiev .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#babjvbhiev .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#babjvbhiev .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_left {
  text-align: left;
}

#babjvbhiev .gt_center {
  text-align: center;
}

#babjvbhiev .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#babjvbhiev .gt_font_normal {
  font-weight: normal;
}

#babjvbhiev .gt_font_bold {
  font-weight: bold;
}

#babjvbhiev .gt_font_italic {
  font-style: italic;
}

#babjvbhiev .gt_super {
  font-size: 65%;
}

#babjvbhiev .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#babjvbhiev .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#babjvbhiev .gt_indent_1 {
  text-indent: 5px;
}

#babjvbhiev .gt_indent_2 {
  text-indent: 10px;
}

#babjvbhiev .gt_indent_3 {
  text-indent: 15px;
}

#babjvbhiev .gt_indent_4 {
  text-indent: 20px;
}

#babjvbhiev .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th colspan="2" id="Traditional<br>(linear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Traditional<br>
(linear)</span></th>
<th rowspan="2" id="   " class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">   </th>
<th colspan="2" id="CMAverse<br>(linear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">CMAverse<br>
(linear)</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">estimate</th>
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="No_EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">No_EMint<br>
estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">direct</td>
<td class="gt_row gt_right" headers="estimate">-0.33</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">cde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">pnde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">tnde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">indirect</td>
<td class="gt_row gt_right" headers="estimate">-0.10</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">pnie</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.101</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">tnie</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.101</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">total</td>
<td class="gt_row gt_right" headers="estimate">-0.43</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">te</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.428</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">prop_med</td>
<td class="gt_row gt_right" headers="estimate">0.23</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">pm</td>
<td class="gt_row gt_right" headers="linear_noEM">0.235</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcmest</span>(est2) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">vjust =</span> <span class="fl">0.8</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(est2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Causal Mediation Analysis

# Outcome regression:

Call:
glm(formula = Delinquency ~ ParentSupport + StrgMoralBlfs, family = gaussian(), 
    data = getCall(x$reg.output$yreg)$data, weights = getCall(x$reg.output$yreg)$weights)

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     2.4282     0.0668    36.4   &lt;2e-16 ***
ParentSupport  -0.3273     0.0185   -17.7   &lt;2e-16 ***
StrgMoralBlfs  -0.4890     0.0200   -24.4   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for gaussian family taken to be 0.969)

    Null deviance: 4028.6  on 2999  degrees of freedom
Residual deviance: 2904.8  on 2997  degrees of freedom
AIC: 8425

Number of Fisher Scoring iterations: 2


# Mediator regressions: 

Call:
glm(formula = StrgMoralBlfs ~ ParentSupport, family = gaussian(), 
    data = getCall(x$reg.output$mreg[[1L]])$data, weights = getCall(x$reg.output$mreg[[1L]])$weights)

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     3.2145     0.0164   195.9   &lt;2e-16 ***
ParentSupport   0.2061     0.0165    12.5   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for gaussian family taken to be 0.807)

    Null deviance: 2546.9  on 2999  degrees of freedom
Residual deviance: 2420.6  on 2998  degrees of freedom
AIC: 7876

Number of Fisher Scoring iterations: 2


# Effect decomposition on the mean difference scale via the regression-based approach
 
Direct counterfactual imputation estimation with 
 bootstrap standard errors, percentile confidence intervals and p-values 
 
     Estimate Std.error  95% CIL 95% CIU  P.val    
cde  -0.32727   0.02071 -0.35504  -0.285 &lt;2e-16 ***
pnde -0.32727   0.02071 -0.35504  -0.285 &lt;2e-16 ***
tnde -0.32727   0.02071 -0.35504  -0.285 &lt;2e-16 ***
pnie -0.10078   0.01025 -0.11819  -0.084 &lt;2e-16 ***
tnie -0.10078   0.01025 -0.11819  -0.084 &lt;2e-16 ***
te   -0.42805   0.02439 -0.46258  -0.371 &lt;2e-16 ***
pm    0.23545   0.01995  0.20332   0.275 &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(cde: controlled direct effect; pnde: pure natural direct effect; tnde: total natural direct effect; pnie: pure natural indirect effect; tnie: total natural indirect effect; te: total effect; pm: overall proportion mediated)

Relevant variable values: 
$a
[1] 1

$astar
[1] 0

$mval
$mval[[1]]
[1] 0</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>First, looking at the results, you will notice that all the CMAverse direct effect estimates are equivalent (i.e., <em>CDE</em> = <em>PNDE</em> = <em>TNDE</em>), and that both indirect effect estimates are equivalent as well (<em>PNIE</em> = <em>TNIE</em>). This is because we set <code>EMint=FALSE</code>, which means we did not specify an exposure-mediator interaction. Of course, this does not mean there is no exposure-mediator interaction in the data. On the contrary, we simulated the data to include one! Rather, it just means we ignored the possibility by essentially fixing the exposure-mediator interaction parameter to equal “0” in our model.</p>
<p>This is also what happens by default in the traditional “product of coefficients” mediation approach. In fact, you can see the estimates from both approaches converge in this case; that is, the “traditional” direct, indirect, and total effect estimates are equivalent to the comparable <em>CDE</em>, <em>PNIE</em>, and <em>TE</em> effect estimates from the CMAverse model.</p>
<p>The “pm” or “prop_med” estimates refer to “proportion mediated” or the proportion of the total effect attributable to mediation. Though they are included here to show equivalence across traditional and CMAverse output, as explained later, I will not focus much on proportion measures in this entry.</p>
<p>Also, with an exposure variable with more than two levels, note that I could have defined different meaningful contrasts (e.g., -1SD vs.&nbsp;1SD; max vs.&nbsp;min). Recall that ParentSupport is simulated as a standardized exposure variable, so by setting <code>astar=0</code> and <code>a=1</code>, I am specifying the exposure contrast as the predicted difference in Y at mean parental support values (ParentSupport=0) and +1SD parental support values (ParentSupport=1). The setting <code>mval = list(0)</code> indicates that I want controlled direct effect estimates to be calculated at m=0 (StrgMoralBlfs=0).</p>
<p>You might also wonder why confidence intervals are asymmetric around point estimates in these tables and plots. This is because “bootstrap” is the default inference method for estimating standard errors and confidence intervals <a href="https://bs1125.github.io/CMAverse/reference/cmest.html">in CMAverse</a>. Unlike the well-known “delta” method (available for some models), which calculates confidence intervals using approximations to a normal distribution, this method estimates percentile-based confidence intervals using the standard deviations of estimates from bootstrapped samples. Since indirect effect estimators (e.g., <a href="https://journals.sagepub.com/doi/full/10.1177/0956797613480187?casa_token=lnKZD-5ujc0AAAAA%3AqL5l3aA8B2BgzQ7cKoBvqkNAx8BA7T7G-ZUR3JwLffMuJn3ensuaDZF3tSn3kmiZny-zhMFAumSPysA"><em>ab</em> product term</a> or <a href="https://imai.fas.harvard.edu/research/files/BaronKenny.pdf">potential outcomes resampling procedures</a>) are known to generate non-normally distributed estimates, bootstrapped confidence intervals are <a href="https://www.frontiersin.org/journals/psychology/articles/10.3389/fpsyg.2014.01549/full#B7a">generally preferred in mediation tests</a> because they better represent the asymptotic distributions generated by indirect effect estimators.</p>
</section>
<section id="sec-CMAlin-int" class="level2">
<h2 class="anchored" data-anchor-id="sec-CMAlin-int">Linear CMA model, with <em>EMint</em></h2>
<p>Now, let’s estimate another linear model in CMAverse but instead allow for the possibility of an exposure-mediator interaction by setting <code>EMint=TRUE</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1138</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>est3 <span class="ot">&lt;-</span> <span class="fu">cmest</span>(<span class="at">data =</span> simdat3, <span class="at">model =</span> <span class="st">"rb"</span>, <span class="at">outcome =</span> <span class="st">"Delinquency"</span>, <span class="at">exposure =</span> <span class="st">"ParentSupport"</span>,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">mediator =</span> <span class="st">"StrgMoralBlfs"</span>, <span class="at">EMint =</span> <span class="cn">TRUE</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">mreg =</span> <span class="fu">list</span>(<span class="st">"linear"</span>), <span class="at">yreg =</span> <span class="st">"linear"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">astar =</span> <span class="dv">0</span>, <span class="at">a =</span> <span class="dv">1</span>, <span class="at">mval =</span> <span class="fu">list</span>(<span class="dv">0</span>),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">estimation =</span> <span class="st">"imputation"</span>, <span class="at">inference =</span> <span class="st">"bootstrap"</span>, <span class="at">nboot =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Results: linear with EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Default plot: linear with EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Custom plot: linear with EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false">Full output: linear with EMint</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>est3dat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(est3<span class="sc">$</span>effect.pe) <span class="sc">%&gt;%</span> <span class="fu">rownames_to_column</span>(<span class="st">"CMA_est"</span>) </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>est3dattab <span class="ot">&lt;-</span> <span class="fu">full_join</span>(est2dattab, est3dat, <span class="at">by=</span><span class="st">"CMA_est"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"linear_EM"</span> <span class="ot">=</span> <span class="st">"est3$effect.pe"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CMA_est <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"cde(prop)"</span>, <span class="st">"intref(prop)"</span>, <span class="st">"intmed(prop)"</span>, </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"pnie(prop)"</span>, <span class="st">"pm"</span>, <span class="st">"int"</span>, <span class="st">"pe"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">trad_est =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(trad_est), <span class="st">"--"</span>, trad_est)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>est3dattab <span class="sc">%&gt;%</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"CMAverse&lt;br&gt;(linear)"</span>), </span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"CMA_est"</span>, <span class="st">"linear_noEM"</span>, <span class="st">"linear_EM"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"Traditional&lt;br&gt;(linear)"</span>), <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"trad_est"</span>,<span class="st">"estimate"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_add</span>(<span class="st">'blank'</span> <span class="ot">=</span> <span class="st">''</span>, <span class="at">.after =</span> <span class="st">'estimate'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_label</span>(<span class="st">'blank'</span> <span class="ot">=</span> <span class="fu">md</span>(<span class="st">'&amp;emsp;&amp;emsp;&amp;emsp;'</span>),</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">trad_est =</span> <span class="st">"effect"</span>, </span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">CMA_est =</span> <span class="st">"effect"</span>,</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">estimate =</span> <span class="st">"estimate"</span>,</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">linear_noEM =</span> <span class="fu">html</span>(<span class="st">"No_EMint&lt;br&gt;estimate"</span>),</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">linear_EM =</span> <span class="fu">html</span>(<span class="st">"EMint&lt;br&gt;estimate"</span>)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>               )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="babjvbhiev" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#babjvbhiev table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#babjvbhiev thead, #babjvbhiev tbody, #babjvbhiev tfoot, #babjvbhiev tr, #babjvbhiev td, #babjvbhiev th {
  border-style: none;
}

#babjvbhiev p {
  margin: 0;
  padding: 0;
}

#babjvbhiev .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#babjvbhiev .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#babjvbhiev .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#babjvbhiev .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#babjvbhiev .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#babjvbhiev .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#babjvbhiev .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#babjvbhiev .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#babjvbhiev .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#babjvbhiev .gt_spanner_row {
  border-bottom-style: hidden;
}

#babjvbhiev .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#babjvbhiev .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#babjvbhiev .gt_from_md > :first-child {
  margin-top: 0;
}

#babjvbhiev .gt_from_md > :last-child {
  margin-bottom: 0;
}

#babjvbhiev .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#babjvbhiev .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#babjvbhiev .gt_row_group_first td {
  border-top-width: 2px;
}

#babjvbhiev .gt_row_group_first th {
  border-top-width: 2px;
}

#babjvbhiev .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#babjvbhiev .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#babjvbhiev .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_left {
  text-align: left;
}

#babjvbhiev .gt_center {
  text-align: center;
}

#babjvbhiev .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#babjvbhiev .gt_font_normal {
  font-weight: normal;
}

#babjvbhiev .gt_font_bold {
  font-weight: bold;
}

#babjvbhiev .gt_font_italic {
  font-style: italic;
}

#babjvbhiev .gt_super {
  font-size: 65%;
}

#babjvbhiev .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#babjvbhiev .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#babjvbhiev .gt_indent_1 {
  text-indent: 5px;
}

#babjvbhiev .gt_indent_2 {
  text-indent: 10px;
}

#babjvbhiev .gt_indent_3 {
  text-indent: 15px;
}

#babjvbhiev .gt_indent_4 {
  text-indent: 20px;
}

#babjvbhiev .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th colspan="2" id="Traditional<br>(linear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Traditional<br>
(linear)</span></th>
<th rowspan="2" id="   " class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">   </th>
<th colspan="3" id="CMAverse<br>(linear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">CMAverse<br>
(linear)</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">estimate</th>
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="No_EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">No_EMint<br>
estimate</th>
<th id="EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">EMint<br>
estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">direct</td>
<td class="gt_row gt_right" headers="estimate">-0.33</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">cde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
<td class="gt_row gt_right" headers="linear_EM">-1.1747</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">pnde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
<td class="gt_row gt_right" headers="linear_EM">-0.3325</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">tnde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
<td class="gt_row gt_right" headers="linear_EM">-0.2784</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">indirect</td>
<td class="gt_row gt_right" headers="estimate">-0.10</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">pnie</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.101</td>
<td class="gt_row gt_right" headers="linear_EM">-0.0864</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">tnie</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.101</td>
<td class="gt_row gt_right" headers="linear_EM">-0.0322</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">total</td>
<td class="gt_row gt_right" headers="estimate">-0.43</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">te</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.428</td>
<td class="gt_row gt_right" headers="linear_EM">-0.3647</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">intref</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">0.8422</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">intmed</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">0.0541</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcmest</span>(est3) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">vjust =</span> <span class="fl">0.8</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#save estimates and intervals data</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>est3dat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(est3[<span class="dv">9</span><span class="sc">:</span><span class="dv">12</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">"CMA_est"</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># drop proportion estimates</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>est3dat <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CMA_est <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"pm"</span>, <span class="st">"pe"</span>, <span class="st">"pnie(prop)"</span>, <span class="st">"intref(prop)"</span>,<span class="st">"intmed(prop)"</span>,<span class="st">"cde(prop)"</span>, <span class="st">"int"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CMA_est =</span> <span class="fu">factor</span>(CMA_est, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"intmed"</span>, <span class="st">"intref"</span>, <span class="st">"te"</span>, <span class="st">"tnie"</span>, <span class="st">"pnie"</span>, <span class="st">"tnde"</span>, <span class="st">"pnde"</span>, <span class="st">"cde"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reorder the coefficients so that the largest is at the top of the plot</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(term = fct_reorder(CMA_est, effect.pe)) %&gt;%</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(effect.pe, CMA_est)) <span class="sc">+</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> effect.ci.low, <span class="at">xmax =</span> effect.ci.high), <span class="at">height =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add in a dotted line at zero</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated effects on linear difference scale"</span>,</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Effect estimates from causal mediation decomposition"</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(est3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Causal Mediation Analysis

# Outcome regression:

Call:
glm(formula = Delinquency ~ ParentSupport + StrgMoralBlfs + ParentSupport * 
    StrgMoralBlfs, family = gaussian(), data = getCall(x$reg.output$yreg)$data, 
    weights = getCall(x$reg.output$yreg)$weights)

Coefficients:
                            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                   2.1496     0.0678    31.7   &lt;2e-16 ***
ParentSupport                -1.1747     0.0634   -18.5   &lt;2e-16 ***
StrgMoralBlfs                -0.4190     0.0200   -20.9   &lt;2e-16 ***
ParentSupport:StrgMoralBlfs   0.2626     0.0189    13.9   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for gaussian family taken to be 0.911)

    Null deviance: 4028.6  on 2999  degrees of freedom
Residual deviance: 2728.2  on 2996  degrees of freedom
AIC: 8239

Number of Fisher Scoring iterations: 2


# Mediator regressions: 

Call:
glm(formula = StrgMoralBlfs ~ ParentSupport, family = gaussian(), 
    data = getCall(x$reg.output$mreg[[1L]])$data, weights = getCall(x$reg.output$mreg[[1L]])$weights)

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     3.2145     0.0164   195.9   &lt;2e-16 ***
ParentSupport   0.2061     0.0165    12.5   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for gaussian family taken to be 0.807)

    Null deviance: 2546.9  on 2999  degrees of freedom
Residual deviance: 2420.6  on 2998  degrees of freedom
AIC: 7876

Number of Fisher Scoring iterations: 2


# Effect decomposition on the mean difference scale via the regression-based approach
 
Direct counterfactual imputation estimation with 
 bootstrap standard errors, percentile confidence intervals and p-values 
 
              Estimate Std.error   95% CIL 95% CIU  P.val    
cde          -1.174713  0.111557 -1.393855  -1.036 &lt;2e-16 ***
pnde         -0.332465  0.016572 -0.354123  -0.297 &lt;2e-16 ***
tnde         -0.278356  0.013193 -0.295906  -0.252 &lt;2e-16 ***
pnie         -0.086354  0.007336 -0.098157  -0.074 &lt;2e-16 ***
tnie         -0.032245  0.006340 -0.037651  -0.018 &lt;2e-16 ***
te           -0.364710  0.014081 -0.380222  -0.331 &lt;2e-16 ***
intref        0.842248  0.099992  0.722433   1.046 &lt;2e-16 ***
intmed        0.054109  0.008268  0.042002   0.067 &lt;2e-16 ***
cde(prop)     3.220949  0.264090  2.949594   3.800 &lt;2e-16 ***
intref(prop) -2.309362  0.249934 -2.851880  -2.049 &lt;2e-16 ***
intmed(prop) -0.148362  0.020618 -0.180025  -0.120 &lt;2e-16 ***
pnie(prop)    0.236775  0.018755  0.209000   0.273 &lt;2e-16 ***
pm            0.088413  0.018417  0.047611   0.107 &lt;2e-16 ***
int          -2.457724  0.267019 -3.026326  -2.169 &lt;2e-16 ***
pe           -2.220949  0.264090 -2.800203  -1.950 &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(cde: controlled direct effect; pnde: pure natural direct effect; tnde: total natural direct effect; pnie: pure natural indirect effect; tnie: total natural indirect effect; te: total effect; intref: reference interaction; intmed: mediated interaction; cde(prop): proportion cde; intref(prop): proportion intref; intmed(prop): proportion intmed; pnie(prop): proportion pnie; pm: overall proportion mediated; int: overall proportion attributable to interaction; pe: overall proportion eliminated)

Relevant variable values: 
$a
[1] 1

$astar
[1] 0

$mval
$mval[[1]]
[1] 0</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>First, a comparison of the tabled results reveals substantial differences in estimates across the linear models with and without an “EMint” term. This is a signal that there is a non-negligible exposure-mediator interaction in these simulated data. Recall, the initial <code>EMint=FALSE</code> specification forced our model to fit a constant effect of parental support on delinquency across all values of moral beliefs. In contrast, specifying <code>EMint=TRUE</code> made the model more flexible by permitting it to fit different conditional average linear effects of parental support on delinquency across values of strong moral beliefs. If no such differences in effects had existed in the data, the linear interaction term would have been near zero, and both sets of linear model results would have converged.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<p>Second, when we ignored the exposure-mediator interaction (i.e, by using traditional <em>ab</em> method or by setting <code>EMint=FALSE</code> in CMAverse), the “proportion mediated” estimate was about 24%. After allowing for the possibility of a nonzero exposure-mediator interaction (with <code>EMint=TRUE</code>), the proportion mediated estimate dropped to 7.2%. What happened? Did the indirect effect shrink after including the interaction term?</p>
<p>To understand what is happening here, recall the “<em>TNIE</em>” component, which represents the “total” indirect effect of X on Y through M, is a composite measure of the total indirect effect comprised of both the “pure” indirect effect component (<em>PNIE</em>) and the part of an exposure-mediator interaction that is due to mediation (<em>INT<sub>med</sub></em>). Now, check out the <em>PNIE</em> and <em>INT<sub>med</sub></em> effect estimates, which are similar in magnitude but in opposite directions. As a result, these two indirect effect components largely cancel each other out (-0.09 vs.&nbsp;0.06), resulting in a very small “total” natural indirect effect estimate (<em>TNIE</em>) and, likewise, a small proportion mediated estimated (<em>PM</em> = <em>TNIE</em>/<em>TE</em>). Meanwhile, the proportion of the total effect that is due to the pure indirect effect (<em>PNIE</em>) remains approximately 24%.</p>
<p>Similarly, the results also show negative direct effect estimates (<em>CDE</em>; <em>PNDE</em>) and a positive reference interaction (<em>INT<sub>ref</sub></em>) effect. The presence of such non-monotonic effect estimates, or effects operating in different directions, undermines the utility of “proportion mediated” estimates. While proportion mediated estimators can be useful for interpreting relative contributions of components under certain assumptions and conditions (e.g., no opposite-signed direct or indirect effects), too often those assumptions are untenable and, when they are, the properties of these estimators become unreliable. For this reason and others,<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> I will exclude most proportion estimates (except proportion mediated or <em>PM</em>) in custom tables and plots and will largely avoid discussing proportion estimates moving forward.</p>
<p>Third, notice that the <em>CDE</em>(M=0) estimate is much larger and is no longer equivalent to the <em>PNDE</em> or <em>TNDE</em> estimates in the linear model with <code>EMint=TRUE</code>. This is because the effect of parental support varies across values of the mediator, and we estimated the <em>CDE</em> at M=0, or at the lowest value of strong moral beliefs, where the effect of parental support is strongest. You can see this in the regression prediction plots presented earlier. In fact, if you look closely at the linear prediction plot, you will notice that the slope of the “M=0” line is equivalent to the <em>CDE</em> estimate from this model (<em>CDE</em> = -1.17); that is, with a ParentSupport change from “0” to “1” units, delinquency is predicted to change by -1.17 units. To help visualize this, I regenerated the linear prediction plot from earlier and added lines to help visualize the slope of this <em>CDE</em> estimate.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>segdat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x1 =</span> <span class="dv">0</span>, <span class="at">x2 =</span> <span class="dv">1</span>, <span class="at">x3 =</span> .<span class="dv">55</span>, <span class="at">x4 =</span> .<span class="dv">05</span>, </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y1 =</span> .<span class="dv">8</span>, <span class="at">y2 =</span> <span class="fl">2.03</span>, <span class="at">y3 =</span> <span class="fl">2.45</span>, <span class="at">y4 =</span> <span class="fl">1.6</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>plot_lm2 <span class="sc">+</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> segdat<span class="sc">$</span>x1, <span class="at">y =</span> segdat<span class="sc">$</span>y1, <span class="at">xend =</span> segdat<span class="sc">$</span>x2, <span class="at">yend =</span> segdat<span class="sc">$</span>y1), </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"maroon"</span>, <span class="at">linewidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span> </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> segdat<span class="sc">$</span>x1, <span class="at">y =</span> segdat<span class="sc">$</span>y1, <span class="at">xend =</span> segdat<span class="sc">$</span>x1, <span class="at">yend =</span> segdat<span class="sc">$</span>y2),</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">col =</span> <span class="st">"maroon"</span>, <span class="at">linewidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span> </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> segdat<span class="sc">$</span>x3, <span class="at">y =</span> segdat<span class="sc">$</span>y3, <span class="at">xend =</span> segdat<span class="sc">$</span>x4, <span class="at">yend =</span> segdat<span class="sc">$</span>y4),</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">col =</span> <span class="st">"maroon"</span>, <span class="at">linewidth =</span> .<span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span>.<span class="dv">6</span>, <span class="at">y=</span><span class="fl">2.5</span>, <span class="at">label=</span> <span class="st">"CDE(M=0) = -1.17"</span>, <span class="at">col =</span> <span class="st">"maroon"</span>, </span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">hjust=</span><span class="dv">0</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looking at this plot, I am hoping it is clear that the magnitude of the <em>CDE</em> estimate would have been much smaller or even negligible if we had instead estimated it at a different level of strong moral beliefs (e.g., M=4).</p>
<p>Unlike the <em>CDE</em>, the <em>PNDE</em> estimate remains largely unchanged across the linear models that do and do not specify an exposure-mediator interaction. Substantively, the <em>PNDE</em> indicates that doing <code>a=1</code> instead of <code>astar=0</code>, or increasing from mean levels of parental support to one-SD unit above the mean levels of parental support, is predicted to reduce delinquency by -0.33 units on the linear difference scale in the absence of the exposure. However, recall that <em>PNDE</em> is estimating Y1M<sub>A=0</sub> - Y0M<sub>A=0</sub> or setting M to value it is expected to be when A=0. So, changing the exposure contrast, say, to <code>astar=-1</code> and <code>a=0</code>, would change the <em>PNDE</em> because it would change the value at which M is set (e.g., estimating Y1M<sub>X=-1</sub> - Y0M<sub>X=-1</sub> instead); in contrast, changing the exposure contrast would have no effect on the <em>CDE</em>(M=0) in a linear model.</p>
<p>Fourth, recall that in a linear model, the sum of <em>PIE</em> and <em>TNIE</em> estimates should equal the sum of the <em>TNDE</em> and <em>PNIE</em> estimates, and each of these sums should equal to the total effect (<em>TE</em>) estimate. I explained this before; you can check to see that it holds true here.</p>
<p>Fifth, notice how small in magnitude the pure indirect (<em>PNIE</em>) and mediated interaction (<em>INT<sub>med</sub></em>) components are relative to the pure natural direct (<em>PNDE</em>) and reference interaction (<em>INT<sub>ref</sub></em>) components. Though there is some evidence of mediation in these simulated data, it would seem that parental support primarily causes delinquency directly and conditionally via unmediated interaction with strong moral beliefs.</p>
<p>Finally, I hope one lesson is apparent by now: If you wish to interpret any of these estimates, or indirect and interaction effects generally, then it is important to know precisely what each estimate means,<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> which causal contrasts you do (and do not) wish to make, and what assumptions your model and you are making if interpreting them as causal effects. Such determinations require an understanding of the various decomposition components described earlier and careful consideration of which components align best with your causal estimand of interest.</p>
</section>
<section id="sec-CMAnonlin-noint" class="level2">
<h2 class="anchored" data-anchor-id="sec-CMAnonlin-noint">Nonlinear CMA model, no <em>EMint</em></h2>
<p>Now, we already know the linear model does not provide a good approximation for the data generating processes underlying these simulated data. This is frequently the case when analyzing real-world criminological data as well. Yet, given the familiarity that many readers will likely have with linear models, my hope is that the relatively poor-fitting linear models above will help ease the transition to better-fitting but more complex nonlinear models.</p>
<p>Below, I conclude by briefly presenting CMAverse models with and without EM interactions again but, this time, I will specify a Poisson distribution for the outcome variable. This means that the predicted contrasts will be described on the event rate ratio scale instead of the linear difference scale.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> As you will soon see, the output and interpretations get a bit more complicated with nonlinear models due to changes in the outcome scale (and related issues like <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7986756/">noncollapsibility</a> of certain estimates).</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1138</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>est4 <span class="ot">&lt;-</span> <span class="fu">cmest</span>(<span class="at">data =</span> simdat3, <span class="at">model =</span> <span class="st">"rb"</span>, <span class="at">outcome =</span> <span class="st">"Delinquency"</span>, <span class="at">exposure =</span> <span class="st">"ParentSupport"</span>,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">mediator =</span> <span class="st">"StrgMoralBlfs"</span>, <span class="at">EMint =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">mreg =</span> <span class="fu">list</span>(<span class="st">"linear"</span>), <span class="at">yreg =</span> <span class="st">"poisson"</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">astar =</span> <span class="dv">0</span>, <span class="at">a =</span> <span class="dv">1</span>, <span class="at">mval =</span> <span class="fu">list</span>(<span class="dv">0</span>),</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">estimation =</span> <span class="st">"imputation"</span>, <span class="at">inference =</span> <span class="st">"bootstrap"</span>, <span class="at">nboot =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Results: nonlinear no EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Default plot: nonlinear no EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Full output: nonlinear no EMint</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>est4dat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(est4<span class="sc">$</span>effect.pe) <span class="sc">%&gt;%</span> <span class="fu">rownames_to_column</span>(<span class="st">"CMA_est2"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rcde"</span>,<span class="st">"cde"</span>,CMA_est2),</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rpnde"</span>,<span class="st">"pnde"</span>,CMA_est), </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rtnde"</span>,<span class="st">"tnde"</span>,CMA_est),</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rpnie"</span>,<span class="st">"pnie"</span>,CMA_est),</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rtnie"</span>,<span class="st">"tnie"</span>,CMA_est),</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rte"</span>,<span class="st">"te"</span>,CMA_est)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>est4dattab <span class="ot">&lt;-</span> <span class="fu">left_join</span>(est3dattab, est4dat, <span class="fu">join_by</span>(<span class="st">"CMA_est"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"nonlin_noEM"</span> <span class="ot">=</span> <span class="st">"est4$effect.pe"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">CMA_est2 =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(CMA_est2), <span class="st">"--"</span>, CMA_est2)</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>est4dattab <span class="sc">%&gt;%</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"CMAverse&lt;br&gt;(nonlinear)"</span>), </span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>                <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"CMA_est2"</span>, <span class="st">"nonlin_noEM"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"CMAverse&lt;br&gt;(linear)"</span>), </span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"CMA_est"</span>, <span class="st">"linear_noEM"</span>, <span class="st">"linear_EM"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"Traditional&lt;br&gt;(linear)"</span>), <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"trad_est"</span>,<span class="st">"estimate"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_add</span>(<span class="st">'blank'</span> <span class="ot">=</span> <span class="st">''</span>, <span class="at">.after =</span> <span class="st">'estimate'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_label</span>(<span class="st">'blank'</span> <span class="ot">=</span> <span class="fu">md</span>(<span class="st">'&amp;emsp;&amp;emsp;&amp;emsp;'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_add</span>(<span class="st">'blank2'</span> <span class="ot">=</span> <span class="st">''</span>, <span class="at">.before =</span> <span class="st">'CMA_est2'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_label</span>(<span class="st">'blank2'</span> <span class="ot">=</span> <span class="fu">md</span>(<span class="st">'&amp;emsp;&amp;emsp;&amp;emsp;'</span>), </span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>               <span class="at">trad_est =</span> <span class="st">"effect"</span>, </span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>               <span class="at">CMA_est =</span> <span class="st">"effect"</span>,</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>               <span class="at">CMA_est2 =</span> <span class="st">"effect"</span>,</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>               <span class="at">estimate =</span> <span class="st">"estimate"</span>,</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">linear_noEM =</span> <span class="fu">html</span>(<span class="st">"No_EMint&lt;br&gt;estimate"</span>),</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>               <span class="at">linear_EM =</span> <span class="fu">html</span>(<span class="st">"EMint&lt;br&gt;estimate"</span>),</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>               <span class="at">nonlin_noEM =</span> <span class="fu">html</span>(<span class="st">"No_EMint&lt;br&gt;estimate"</span>)</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>               )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="babjvbhiev" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#babjvbhiev table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#babjvbhiev thead, #babjvbhiev tbody, #babjvbhiev tfoot, #babjvbhiev tr, #babjvbhiev td, #babjvbhiev th {
  border-style: none;
}

#babjvbhiev p {
  margin: 0;
  padding: 0;
}

#babjvbhiev .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#babjvbhiev .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#babjvbhiev .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#babjvbhiev .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#babjvbhiev .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#babjvbhiev .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#babjvbhiev .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#babjvbhiev .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#babjvbhiev .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#babjvbhiev .gt_spanner_row {
  border-bottom-style: hidden;
}

#babjvbhiev .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#babjvbhiev .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#babjvbhiev .gt_from_md > :first-child {
  margin-top: 0;
}

#babjvbhiev .gt_from_md > :last-child {
  margin-bottom: 0;
}

#babjvbhiev .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#babjvbhiev .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#babjvbhiev .gt_row_group_first td {
  border-top-width: 2px;
}

#babjvbhiev .gt_row_group_first th {
  border-top-width: 2px;
}

#babjvbhiev .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#babjvbhiev .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#babjvbhiev .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_left {
  text-align: left;
}

#babjvbhiev .gt_center {
  text-align: center;
}

#babjvbhiev .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#babjvbhiev .gt_font_normal {
  font-weight: normal;
}

#babjvbhiev .gt_font_bold {
  font-weight: bold;
}

#babjvbhiev .gt_font_italic {
  font-style: italic;
}

#babjvbhiev .gt_super {
  font-size: 65%;
}

#babjvbhiev .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#babjvbhiev .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#babjvbhiev .gt_indent_1 {
  text-indent: 5px;
}

#babjvbhiev .gt_indent_2 {
  text-indent: 10px;
}

#babjvbhiev .gt_indent_3 {
  text-indent: 15px;
}

#babjvbhiev .gt_indent_4 {
  text-indent: 20px;
}

#babjvbhiev .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th colspan="2" id="Traditional<br>(linear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Traditional<br>
(linear)</span></th>
<th rowspan="2" id="   " class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">   </th>
<th colspan="3" id="CMAverse<br>(linear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">CMAverse<br>
(linear)</span></th>
<th rowspan="2" id="   " class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">   </th>
<th colspan="2" id="CMAverse<br>(nonlinear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">CMAverse<br>
(nonlinear)</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">estimate</th>
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="No_EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">No_EMint<br>
estimate</th>
<th id="EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">EMint<br>
estimate</th>
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="No_EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">No_EMint<br>
estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">direct</td>
<td class="gt_row gt_right" headers="estimate">-0.33</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">cde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
<td class="gt_row gt_right" headers="linear_EM">-1.1747</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rcde</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.683</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">pnde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
<td class="gt_row gt_right" headers="linear_EM">-0.3325</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rpnde</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.683</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">tnde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
<td class="gt_row gt_right" headers="linear_EM">-0.2784</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rtnde</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.683</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">indirect</td>
<td class="gt_row gt_right" headers="estimate">-0.10</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">pnie</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.101</td>
<td class="gt_row gt_right" headers="linear_EM">-0.0864</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rpnie</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.917</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">tnie</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.101</td>
<td class="gt_row gt_right" headers="linear_EM">-0.0322</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rtnie</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.917</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">total</td>
<td class="gt_row gt_right" headers="estimate">-0.43</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">te</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.428</td>
<td class="gt_row gt_right" headers="linear_EM">-0.3647</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rte</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.626</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">intref</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">0.8422</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">--</td>
<td class="gt_row gt_right" headers="nonlin_noEM">NA</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">intmed</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">0.0541</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">--</td>
<td class="gt_row gt_right" headers="nonlin_noEM">NA</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcmest</span>(est4) <span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">vjust =</span> <span class="fl">0.8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(est4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Causal Mediation Analysis

# Outcome regression:

Call:
glm(formula = Delinquency ~ ParentSupport + StrgMoralBlfs, family = poisson(), 
    data = getCall(x$reg.output$yreg)$data, weights = getCall(x$reg.output$yreg)$weights)

Coefficients:
              Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)     0.9880     0.0540    18.3   &lt;2e-16 ***
ParentSupport  -0.3816     0.0202   -18.9   &lt;2e-16 ***
StrgMoralBlfs  -0.4178     0.0175   -23.8   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 4367.7  on 2999  degrees of freedom
Residual deviance: 3219.5  on 2997  degrees of freedom
AIC: 6788

Number of Fisher Scoring iterations: 5


# Mediator regressions: 

Call:
glm(formula = StrgMoralBlfs ~ ParentSupport, family = gaussian(), 
    data = getCall(x$reg.output$mreg[[1L]])$data, weights = getCall(x$reg.output$mreg[[1L]])$weights)

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     3.2145     0.0164   195.9   &lt;2e-16 ***
ParentSupport   0.2061     0.0165    12.5   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for gaussian family taken to be 0.807)

    Null deviance: 2546.9  on 2999  degrees of freedom
Residual deviance: 2420.6  on 2998  degrees of freedom
AIC: 7876

Number of Fisher Scoring iterations: 2


# Effect decomposition on the rate ratio scale via the regression-based approach
 
Direct counterfactual imputation estimation with 
 bootstrap standard errors, percentile confidence intervals and p-values 
 
      Estimate Std.error  95% CIL 95% CIU  P.val    
Rcde  0.682781  0.013782 0.664411   0.711 &lt;2e-16 ***
Rpnde 0.682781  0.013782 0.664411   0.711 &lt;2e-16 ***
Rtnde 0.682781  0.013782 0.664411   0.711 &lt;2e-16 ***
Rpnie 0.917494  0.006533 0.906926   0.928 &lt;2e-16 ***
Rtnie 0.917494  0.006533 0.906926   0.928 &lt;2e-16 ***
Rte   0.626448  0.013760 0.607616   0.654 &lt;2e-16 ***
pm    0.150804  0.012626 0.131287   0.177 &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Rcde: controlled direct effect rate ratio; Rpnde: pure natural direct effect rate ratio; Rtnde: total natural direct effect rate ratio; Rpnie: pure natural indirect effect rate ratio; Rtnie: total natural indirect effect rate ratio; Rte: total effect rate ratio; pm: overall proportion mediated)

Relevant variable values: 
$a
[1] 1

$astar
[1] 0

$mval
$mval[[1]]
[1] 0</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>It should be immediately apparent that the estimates from this model look different from the estimates reported with the linear models - each estimate is now designated with an “R” prefix (e.g., “Rcde”). This is because the nonlinear model estimates describe relative effects on the rate ratio scale (or risk ratio for logistic outcome models) instead of effects on the linear difference scale.</p>
<p>You can find various accessible discussions of interpreting risk and rate ratio estimates online; for a couple examples, see <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8351073/">here</a>, <a href="https://sphweb.bumc.bu.edu/otlt/mph-modules/ep/ep713_association/ep713_association_print.html">here</a>, and <a href="https://sph.unc.edu/wp-content/uploads/sites/112/2015/07/nciph_ERIC7.pdf">here</a>. Briefly, rate ratio estimates less than one indicate negative effects; estimates equal to one indicate null effects; and estimates greater than one indicate positive effects.</p>
<p>So, this model predicts a moderate direct effect of parental support on delinquency; increasing parental support from its mean (astar=0) to one standard deviation above its mean (a=1) is predicted to directly reduce delinquency to 0.68 times the rate at the mean (i.e., at astar=0). In comparison, the model predicts a modest indirect effect of parental support on delinquency through moral beliefs; similarly increasing parental support from astar=0 to a=1 is predicted to indirectly reduce delinquency to 0.92 times the rate at the mean (i.e., at astar=0).</p>
<p>Though the outcome scale and resulting estimates changed, some patterns should be familiar by now. For instance, all the direct effect estimates are equivalent (i.e., <em>CDE</em> = <em>PNDE</em> = <em>TNDE</em>), as are the indirect effect estimates (<em>PNIE</em> = <em>TNIE</em>). Also, the results lack any <em>INT<sub>med</sub></em> or <em>INT<sub>ref</sub></em> estimates. Again, these patterns are expected because we set <code>EMint=FALSE</code>, which means we constrained the model to ignore any exposure-mediator interaction by essentially fixing the interaction parameter to zero. In the final model below, I relax this constraint by specifying <code>EMint = TRUE</code> to include an exposure-mediator interaction term on the estimation scale.</p>
</section>
<section id="sec-CMAnonlin-int" class="level2">
<h2 class="anchored" data-anchor-id="sec-CMAnonlin-int">Nonlinear CMA model, with <em>EMint</em></h2>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1138</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>est5 <span class="ot">&lt;-</span> <span class="fu">cmest</span>(<span class="at">data =</span> simdat3, <span class="at">model =</span> <span class="st">"rb"</span>, <span class="at">outcome =</span> <span class="st">"Delinquency"</span>, <span class="at">exposure =</span> <span class="st">"ParentSupport"</span>,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">mediator =</span> <span class="st">"StrgMoralBlfs"</span>, <span class="at">EMint =</span> <span class="cn">TRUE</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">mreg =</span> <span class="fu">list</span>(<span class="st">"linear"</span>), <span class="at">yreg =</span> <span class="st">"poisson"</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">astar =</span> <span class="dv">0</span>, <span class="at">a =</span> <span class="dv">1</span>, <span class="at">mval =</span> <span class="fu">list</span>(<span class="dv">0</span>),</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">estimation =</span> <span class="st">"imputation"</span>, <span class="at">inference =</span> <span class="st">"bootstrap"</span>, <span class="at">nboot =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Results: nonlinear with EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Default plot: nonlinear with EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">Risk ratio plot: nonlinear with EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false">Excess risk plot: nonlinear, with EMint</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-5" role="tab" aria-controls="tabset-6-5" aria-selected="false">Full output: nonlinear with EMint</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>est5dat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(est5<span class="sc">$</span>effect.pe) <span class="sc">%&gt;%</span> <span class="fu">rownames_to_column</span>(<span class="st">"CMA_est2"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rcde"</span>,<span class="st">"cde"</span>,CMA_est2),</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rpnde"</span>,<span class="st">"pnde"</span>,CMA_est), </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rtnde"</span>,<span class="st">"tnde"</span>,CMA_est),</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rpnie"</span>,<span class="st">"pnie"</span>,CMA_est),</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rtnie"</span>,<span class="st">"tnie"</span>,CMA_est),</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rte"</span>,<span class="st">"te"</span>,CMA_est)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>est5dattab <span class="ot">&lt;-</span> <span class="fu">full_join</span>(est4dattab, est5dat, <span class="fu">join_by</span>(<span class="st">"CMA_est2"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"nonlin_EM"</span> <span class="ot">=</span> <span class="st">"est5$effect.pe"</span>,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>         <span class="st">"CMA_est"</span> <span class="ot">=</span> <span class="st">"CMA_est.x"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>CMA_est.y) <span class="sc">%&gt;%</span> </span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CMA_est2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ERcde(prop)"</span>, <span class="st">"ERintref(prop)"</span>, <span class="st">"ERintmed(prop)"</span>, </span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"ERpnie(prop)"</span>, <span class="st">"pm"</span>, <span class="st">"int"</span>, <span class="st">"pe"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">trad_est =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(trad_est), <span class="st">"--"</span>, trad_est), </span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">CMA_est =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(CMA_est), <span class="st">"--"</span>, CMA_est)</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>est5dattab <span class="sc">%&gt;%</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"CMAverse&lt;br&gt;(nonlinear)"</span>), </span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>                <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"CMA_est2"</span>, <span class="st">"nonlin_noEM"</span>, <span class="st">"nonlin_EM"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"CMAverse&lt;br&gt;(linear)"</span>), </span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>                <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"CMA_est"</span>, <span class="st">"linear_noEM"</span>, <span class="st">"linear_EM"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"Traditional&lt;br&gt;(linear)"</span>), <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"trad_est"</span>,<span class="st">"estimate"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_add</span>(<span class="st">'blank'</span> <span class="ot">=</span> <span class="st">''</span>, <span class="at">.after =</span> <span class="st">'estimate'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_label</span>(<span class="st">'blank'</span> <span class="ot">=</span> <span class="fu">md</span>(<span class="st">'&amp;emsp;&amp;emsp;&amp;emsp;'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_add</span>(<span class="st">'blank2'</span> <span class="ot">=</span> <span class="st">''</span>, <span class="at">.before =</span> <span class="st">'CMA_est2'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_label</span>(<span class="st">'blank2'</span> <span class="ot">=</span> <span class="fu">md</span>(<span class="st">'&amp;emsp;&amp;emsp;&amp;emsp;'</span>), </span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">trad_est =</span> <span class="st">"effect"</span>, </span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>               <span class="at">CMA_est =</span> <span class="st">"effect"</span>,</span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a>               <span class="at">CMA_est2 =</span> <span class="st">"effect"</span>,</span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>               <span class="at">estimate =</span> <span class="st">"estimate"</span>,</span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>               <span class="at">linear_noEM =</span> <span class="fu">html</span>(<span class="st">"No_EMint&lt;br&gt;estimate"</span>),</span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>               <span class="at">linear_EM =</span> <span class="fu">html</span>(<span class="st">"EMint&lt;br&gt;estimate"</span>),</span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a>               <span class="at">nonlin_noEM =</span> <span class="fu">html</span>(<span class="st">"No_EMint&lt;br&gt;estimate"</span>),</span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>               <span class="at">nonlin_EM =</span> <span class="fu">html</span>(<span class="st">"EMint&lt;br&gt;estimate"</span>)</span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a>               )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="babjvbhiev" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#babjvbhiev table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#babjvbhiev thead, #babjvbhiev tbody, #babjvbhiev tfoot, #babjvbhiev tr, #babjvbhiev td, #babjvbhiev th {
  border-style: none;
}

#babjvbhiev p {
  margin: 0;
  padding: 0;
}

#babjvbhiev .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#babjvbhiev .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#babjvbhiev .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#babjvbhiev .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#babjvbhiev .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#babjvbhiev .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#babjvbhiev .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#babjvbhiev .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#babjvbhiev .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#babjvbhiev .gt_spanner_row {
  border-bottom-style: hidden;
}

#babjvbhiev .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#babjvbhiev .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#babjvbhiev .gt_from_md > :first-child {
  margin-top: 0;
}

#babjvbhiev .gt_from_md > :last-child {
  margin-bottom: 0;
}

#babjvbhiev .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#babjvbhiev .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#babjvbhiev .gt_row_group_first td {
  border-top-width: 2px;
}

#babjvbhiev .gt_row_group_first th {
  border-top-width: 2px;
}

#babjvbhiev .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#babjvbhiev .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#babjvbhiev .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_left {
  text-align: left;
}

#babjvbhiev .gt_center {
  text-align: center;
}

#babjvbhiev .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#babjvbhiev .gt_font_normal {
  font-weight: normal;
}

#babjvbhiev .gt_font_bold {
  font-weight: bold;
}

#babjvbhiev .gt_font_italic {
  font-style: italic;
}

#babjvbhiev .gt_super {
  font-size: 65%;
}

#babjvbhiev .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#babjvbhiev .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#babjvbhiev .gt_indent_1 {
  text-indent: 5px;
}

#babjvbhiev .gt_indent_2 {
  text-indent: 10px;
}

#babjvbhiev .gt_indent_3 {
  text-indent: 15px;
}

#babjvbhiev .gt_indent_4 {
  text-indent: 20px;
}

#babjvbhiev .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th colspan="2" id="Traditional<br>(linear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Traditional<br>
(linear)</span></th>
<th rowspan="2" id="   " class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">   </th>
<th colspan="3" id="CMAverse<br>(linear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">CMAverse<br>
(linear)</span></th>
<th rowspan="2" id="   " class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">   </th>
<th colspan="3" id="CMAverse<br>(nonlinear)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">CMAverse<br>
(nonlinear)</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">estimate</th>
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="No_EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">No_EMint<br>
estimate</th>
<th id="EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">EMint<br>
estimate</th>
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="No_EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">No_EMint<br>
estimate</th>
<th id="EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">EMint<br>
estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">direct</td>
<td class="gt_row gt_right" headers="estimate">-0.33</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">cde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
<td class="gt_row gt_right" headers="linear_EM">-1.1747</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rcde</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.683</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.6841</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">pnde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
<td class="gt_row gt_right" headers="linear_EM">-0.3325</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rpnde</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.683</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.6827</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">tnde</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.327</td>
<td class="gt_row gt_right" headers="linear_EM">-0.2784</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rtnde</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.683</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.6826</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">indirect</td>
<td class="gt_row gt_right" headers="estimate">-0.10</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">pnie</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.101</td>
<td class="gt_row gt_right" headers="linear_EM">-0.0864</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rpnie</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.917</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.9174</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">tnie</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.101</td>
<td class="gt_row gt_right" headers="linear_EM">-0.0322</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rtnie</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.917</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.9173</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">total</td>
<td class="gt_row gt_right" headers="estimate">-0.43</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">te</td>
<td class="gt_row gt_right" headers="linear_noEM">-0.428</td>
<td class="gt_row gt_right" headers="linear_EM">-0.3647</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">Rte</td>
<td class="gt_row gt_right" headers="nonlin_noEM">0.626</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.6262</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">intref</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">0.8422</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">--</td>
<td class="gt_row gt_right" headers="nonlin_noEM">NA</td>
<td class="gt_row gt_right" headers="nonlin_EM">NA</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">intmed</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">0.0541</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">--</td>
<td class="gt_row gt_right" headers="nonlin_noEM">NA</td>
<td class="gt_row gt_right" headers="nonlin_EM">NA</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">--</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">NA</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">ERcde</td>
<td class="gt_row gt_right" headers="nonlin_noEM">NA</td>
<td class="gt_row gt_right" headers="nonlin_EM">-1.1268</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">--</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">NA</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">ERintref</td>
<td class="gt_row gt_right" headers="nonlin_noEM">NA</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.8094</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">--</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">NA</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">ERintmed</td>
<td class="gt_row gt_right" headers="nonlin_noEM">NA</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.0261</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="trad_est">--</td>
<td class="gt_row gt_right" headers="estimate">NA</td>
<td class="gt_row gt_right" headers="blank"></td>
<td class="gt_row gt_left" headers="CMA_est">--</td>
<td class="gt_row gt_right" headers="linear_noEM">NA</td>
<td class="gt_row gt_right" headers="linear_EM">NA</td>
<td class="gt_row gt_right" headers="blank2"></td>
<td class="gt_row gt_left" headers="CMA_est2">ERpnie</td>
<td class="gt_row gt_right" headers="nonlin_noEM">NA</td>
<td class="gt_row gt_right" headers="nonlin_EM">-0.0826</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcmest</span>(est5) <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">vjust =</span> <span class="fl">0.8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#save estimates and intervals data</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>est5dat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(est5[<span class="dv">9</span><span class="sc">:</span><span class="dv">12</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">"CMA_est"</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co"># drop proportion estimates</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>est5dat <span class="sc">%&gt;%</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CMA_est <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"pm"</span>, <span class="st">"pe"</span>, <span class="st">"ERpnie(prop)"</span>, <span class="st">"ERintref(prop)"</span>,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"ERintmed(prop)"</span>,<span class="st">"ERcde(prop)"</span>, <span class="st">"int"</span>, </span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"ERpnie"</span>, <span class="st">"ERintmed"</span>, <span class="st">"ERintref"</span>, <span class="st">"ERcde"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CMA_est =</span> <span class="fu">factor</span>(CMA_est, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Rte"</span>, <span class="st">"Rtnie"</span>, <span class="st">"Rpnie"</span>, <span class="st">"Rtnde"</span>, <span class="st">"Rpnde"</span>, <span class="st">"Rcde"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reorder the coefficients so that the largest is at the top of the plot</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(term = fct_reorder(CMA_est, effect.pe)) %&gt;%</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(effect.pe, CMA_est)) <span class="sc">+</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> effect.ci.low, <span class="at">xmax =</span> effect.ci.high), <span class="at">height =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add in a dotted line at zero</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">lty =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated effects on risk ratio scale"</span>,</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Effect estimates from causal mediation decomposition (risk ratios)"</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop proportion estimates</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>est5dat <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CMA_est <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"pm"</span>, <span class="st">"pe"</span>, <span class="st">"ERpnie(prop)"</span>, <span class="st">"ERintref(prop)"</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"ERintmed(prop)"</span>,<span class="st">"ERcde(prop)"</span>, <span class="st">"int"</span>, </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Rte"</span>, <span class="st">"Rtnie"</span>, <span class="st">"Rpnie"</span>, <span class="st">"Rtnde"</span>, <span class="st">"Rpnde"</span>, <span class="st">"Rcde"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CMA_est =</span> <span class="fu">factor</span>(CMA_est, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"ERpnie"</span>, <span class="st">"ERintmed"</span>, <span class="st">"ERintref"</span>, <span class="st">"ERcde"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reorder the coefficients so that the largest is at the top of the plot</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(term = fct_reorder(CMA_est, effect.pe)) %&gt;%</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(effect.pe, CMA_est)) <span class="sc">+</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> effect.ci.low, <span class="at">xmax =</span> effect.ci.high), <span class="at">height =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add in a dotted line at zero</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated effects on excess risks scale"</span>,</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Effect estimates from causal mediation decomposition (excess risks)"</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-5-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(est5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Causal Mediation Analysis

# Outcome regression:

Call:
glm(formula = Delinquency ~ ParentSupport + StrgMoralBlfs + ParentSupport * 
    StrgMoralBlfs, family = poisson(), data = getCall(x$reg.output$yreg)$data, 
    weights = getCall(x$reg.output$yreg)$weights)

Coefficients:
                             Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                  0.989580   0.064119   15.43  &lt; 2e-16 ***
ParentSupport               -0.379579   0.047346   -8.02  1.1e-15 ***
StrgMoralBlfs               -0.418358   0.020744  -20.17  &lt; 2e-16 ***
ParentSupport:StrgMoralBlfs -0.000758   0.016197   -0.05     0.96    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 4367.7  on 2999  degrees of freedom
Residual deviance: 3219.5  on 2996  degrees of freedom
AIC: 6790

Number of Fisher Scoring iterations: 5


# Mediator regressions: 

Call:
glm(formula = StrgMoralBlfs ~ ParentSupport, family = gaussian(), 
    data = getCall(x$reg.output$mreg[[1L]])$data, weights = getCall(x$reg.output$mreg[[1L]])$weights)

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     3.2145     0.0164   195.9   &lt;2e-16 ***
ParentSupport   0.2061     0.0165    12.5   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for gaussian family taken to be 0.807)

    Null deviance: 2546.9  on 2999  degrees of freedom
Residual deviance: 2420.6  on 2998  degrees of freedom
AIC: 7876

Number of Fisher Scoring iterations: 2


# Effect decomposition on the rate ratio scale via the regression-based approach
 
Direct counterfactual imputation estimation with 
 bootstrap standard errors, percentile confidence intervals and p-values 
 
                Estimate Std.error   95% CIL 95% CIU  P.val    
Rcde            0.684149  0.037105  0.598769   0.725 &lt;2e-16 ***
Rpnde           0.682662  0.013715  0.665171   0.712 &lt;2e-16 ***
Rtnde           0.682556  0.014239  0.662567   0.713 &lt;2e-16 ***
Rpnie           0.917396  0.006654  0.906475   0.930 &lt;2e-16 ***
Rtnie           0.917253  0.008195  0.905841   0.935 &lt;2e-16 ***
Rte             0.626174  0.014402  0.605906   0.657 &lt;2e-16 ***
ERcde          -1.126777  0.112203 -1.376355  -1.018 &lt;2e-16 ***
ERintref        0.809439  0.109402  0.698336   1.050 &lt;2e-16 ***
ERintmed        0.026115  0.002870  0.021995   0.031 &lt;2e-16 ***
ERpnie         -0.082604  0.006654 -0.093525  -0.070 &lt;2e-16 ***
ERcde(prop)     3.014176  0.318260  2.663009   3.694 &lt;2e-16 ***
ERintref(prop) -2.165285  0.311553 -2.828061  -1.814 &lt;2e-16 ***
ERintmed(prop) -0.069860  0.007046 -0.080692  -0.060 &lt;2e-16 ***
ERpnie(prop)    0.220968  0.016263  0.195328   0.251 &lt;2e-16 ***
pm              0.151108  0.014391  0.122961   0.174 &lt;2e-16 ***
int            -2.235145  0.316424 -2.901838  -1.875 &lt;2e-16 ***
pe             -2.014176  0.318260 -2.693672  -1.663 &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Rcde: controlled direct effect rate ratio; Rpnde: pure natural direct effect rate ratio; Rtnde: total natural direct effect rate ratio; Rpnie: pure natural indirect effect rate ratio; Rtnie: total natural indirect effect rate ratio; Rte: total effect rate ratio; ERcde: excess relative rate due to controlled direct effect; ERintref: excess relative rate due to reference interaction; ERintmed: excess relative rate due to mediated interaction; ERpnie: excess relative rate due to pure natural indirect effect; ERcde(prop): proportion ERcde; ERintref(prop): proportion ERintref; ERintmed(prop): proportion ERintmed; ERpnie(prop): proportion ERpnie; pm: overall proportion mediated; int: overall proportion attributable to interaction; pe: overall proportion eliminated)

Relevant variable values: 
$a
[1] 1

$astar
[1] 0

$mval
$mval[[1]]
[1] 0</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>By this point, we have covered most everything you should need to know to be able to interpret results of this final causal mediation model. I will only make a couple additional points.</p>
<p>First, along with the rate ratio measures (“R” prefix, e.g., Rcde), these results include a new set of estimates with an “ER” prefix (e.g., ERcde), or the “excess rate ratio” (or “excess risk ratio” in logistic regressions) attributable to particular components of a total effect. The <em>sign</em> or <em>direction</em> of an excess relative rate or risk estimate can be helpful for determining the direction of an interaction and, in particular, for inferring which group might be especially affected by an intervention. However, caution is warranted if attempting to interpret the <em>magnitude</em> of estimates on an excess relative rate or risk scale because estimation of excess rates depends upon baseline rates. The issue here is that baseline rates often vary across groups, but the estimates themselves do not communicate those baseline rates. As such, it is easy to misinterpret magnitudes of excess relative risk estimates unless interpretations also specifically reference associated differences in baseline and absolute rates or risks.</p>
<p>This raises a more general issue about relative rate or risk estimates. Though they are widely used to describe effects in nonlinear models, any estimate of <em>relative</em> rates or risks is potentially susceptible to misinterpretation or misleading inferences if not also paired with corresponding information about differences in baseline and <a href="https://academic.oup.com/ndt/article/32/suppl_2/ii13/3056571"><em>absolute</em> rates or risks</a>. This is another reason why I recommend also estimating and plotting marginal effects on the outcome scale, as it can help with identifying, communicating, and visualizing these important differences on an absolute scale. In combination, a thorough understanding of the decomposition of a total effect into its constituent components can help you communicate precisely what information is being conveyed in specific relative effect estimates and may help you better comprehend and communicate about your marginal effect estimates and plots as well.</p>
<p>For more information about relative excess ratio estimates, see <a href="https://www.hsph.harvard.edu/tyler-vanderweele/wp-content/uploads/sites/603/2018/04/AttributingInt_Ep.pdf">VanderWeele and Tchetgen Tchetgen (2014)</a>. Additionally, <a href="https://www.hsph.harvard.edu/wp-content/uploads/sites/603/2018/04/InteractionTutorial_EM.pdf">VanderWeele and Knol’s 2014</a> tutorial on interaction is especially helpful on this topic (see especially p.39 and footnote #1). That manuscript also contains a wealth of information that may be new to readers in our field about estimating and interpreting interactions, including distinctions between concepts such as <em>statistical</em>, <em>mechanistic</em>, and <em>sufficient cause</em> interactions.</p>
<p>As a final point, compare results from the CMAverse nonlinear interaction model with those from the CMAverse linear interaction model. Recall, the linear model suggested the existence of a substantial exposure-mediator interaction, which we were clued into by the notable differences in estimates across the two linear models with and without an EM interaction term. In contrast, the nonlinear model does not appear to show a sizeable exposure mediator interaction; again, we can infer this from an EM interaction coefficient of negligible magnitude and from the fact that the estimates barely changed after including the <em>EMint</em> term.</p>
<p>Recall, the additive interaction in the data is on the outcome scale, or delinquency event rates, which is also the scale of estimation for the linear model. However, this is not the estimation scale for the nonlinear model, which generates estimates on the <em>logged</em> delinquency event rate scale. Put differently, the linear model shows a statistically significant nonzero interaction term because its predictions are on the linear outcome scale, so the interaction term grants the model flexibility to fit conditional exposure effects on delinquency event rates that potentially vary across levels of the mechanism.</p>
<p>Meanwhile, the estimates from a generalized linear model with a Poisson-distributed outcome and log link function (aka, a nonlinear model) already are conditional on covariates. That is, these estimates already build conditional variability across mechanism levels into the model, so they are flexible enough to capture a similar additive interaction on the delinquency event rate outcome scale without the need for an interaction on estimation scale.</p>
<p>If there <em>had</em> been a non-negligible exposure-mediator interaction in the nonlinear model, such that estimates changed when we switched from <code>EMint = FALSE</code> to <code>EMint = TRUE</code>, then this would have signaled the existence of an interaction on the estimation scale, or in <em>logged</em> delinquency rates and differences in relative effects across mechanism levels. Plotting such changes in predicted effects on the outcome scale might have shown, for instance, a growth or a reduction across mechanism levels in the predicted differences in delinquency rates attributed to the exposure’s effect.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p>
<p>When simulating the data, I actually included an alternative outcome variable (<em>Delinquency2</em>) to provide an example of such a non-negligible interaction on the logged delinquency rate scale. If you are curious, click the expandable link below to view tabled results and plots from nonlinear models predicting this alternative variable. In particular, the prediction plots (second tab) help visualize how this specific interaction on the estimation scale translates into differences in the relative magnitude of the exposure effect across mechanism levels on the delinquency rate outcome scale.</p>
<details>
<summary>
Example interaction in nonlinear model
</summary>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sim.2 nonlinear model (alt DV)</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>glm3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(Delinquency2 <span class="sc">~</span> ParentSupport <span class="sc">*</span> StrgMoralBlfs, <span class="at">data=</span>simdat3, <span class="at">family=</span><span class="st">"poisson"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>Ex2tab3 <span class="ot">&lt;-</span> <span class="fu">regsum</span>(glm3) <span class="sc">%&gt;%</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Poisson regression predicting delinquency2 event rates"</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1138</span>)</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>est6 <span class="ot">&lt;-</span> <span class="fu">cmest</span>(<span class="at">data =</span> simdat3, <span class="at">model =</span> <span class="st">"rb"</span>, <span class="at">outcome =</span> <span class="st">"Delinquency2"</span>, <span class="at">exposure =</span> <span class="st">"ParentSupport"</span>,</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">mediator =</span> <span class="st">"StrgMoralBlfs"</span>, <span class="at">EMint =</span> <span class="cn">TRUE</span>,</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">mreg =</span> <span class="fu">list</span>(<span class="st">"linear"</span>), <span class="at">yreg =</span> <span class="st">"poisson"</span>,</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">astar =</span> <span class="dv">0</span>, <span class="at">a =</span> <span class="dv">1</span>, <span class="at">mval =</span> <span class="fu">list</span>(<span class="dv">0</span>),</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">estimation =</span> <span class="st">"imputation"</span>, <span class="at">inference =</span> <span class="st">"bootstrap"</span>, <span class="at">nboot =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">GLM: Results</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">GLM: Prediction plot with data</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">CMA: Results (nonlinear; EMint; alt DV)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false">CMA: Default plot (nonlinear; EMint; alt DV)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-5" role="tab" aria-controls="tabset-7-5" aria-selected="false">CMA: Risk ratio plot (nonlinear; EMint; alt DV)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-6" role="tab" aria-controls="tabset-7-6" aria-selected="false">CMA: Excess risk plot (nonlinear; EMint; alt DV)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-7" role="tab" aria-controls="tabset-7-7" aria-selected="false">Full output: nonlinear with EMint</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sim.2 nonlinear model (alt DV)</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>Ex2tab3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="babjvbhiev" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#babjvbhiev table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#babjvbhiev thead, #babjvbhiev tbody, #babjvbhiev tfoot, #babjvbhiev tr, #babjvbhiev td, #babjvbhiev th {
  border-style: none;
}

#babjvbhiev p {
  margin: 0;
  padding: 0;
}

#babjvbhiev .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#babjvbhiev .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#babjvbhiev .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#babjvbhiev .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#babjvbhiev .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#babjvbhiev .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#babjvbhiev .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#babjvbhiev .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#babjvbhiev .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#babjvbhiev .gt_spanner_row {
  border-bottom-style: hidden;
}

#babjvbhiev .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#babjvbhiev .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#babjvbhiev .gt_from_md > :first-child {
  margin-top: 0;
}

#babjvbhiev .gt_from_md > :last-child {
  margin-bottom: 0;
}

#babjvbhiev .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#babjvbhiev .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#babjvbhiev .gt_row_group_first td {
  border-top-width: 2px;
}

#babjvbhiev .gt_row_group_first th {
  border-top-width: 2px;
}

#babjvbhiev .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#babjvbhiev .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#babjvbhiev .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#babjvbhiev .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#babjvbhiev .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#babjvbhiev .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#babjvbhiev .gt_left {
  text-align: left;
}

#babjvbhiev .gt_center {
  text-align: center;
}

#babjvbhiev .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#babjvbhiev .gt_font_normal {
  font-weight: normal;
}

#babjvbhiev .gt_font_bold {
  font-weight: bold;
}

#babjvbhiev .gt_font_italic {
  font-style: italic;
}

#babjvbhiev .gt_super {
  font-size: 65%;
}

#babjvbhiev .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#babjvbhiev .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#babjvbhiev .gt_indent_1 {
  text-indent: 5px;
}

#babjvbhiev .gt_indent_2 {
  text-indent: 10px;
}

#babjvbhiev .gt_indent_3 {
  text-indent: 15px;
}

#babjvbhiev .gt_indent_4 {
  text-indent: 20px;
}

#babjvbhiev .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Poisson regression predicting delinquency2 event rates</th>
</tr>
<tr class="odd gt_col_headings">
<th id="<strong>Characteristic</strong>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="<strong>log(IRR)</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1,2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>log(IRR)</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1,2</sup></span></th>
<th id="<strong>SE</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>SE</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span></th>
<th id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span></th>
<th id="<strong>p-value</strong>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>p-value</strong></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">(Intercept)</td>
<td class="gt_row gt_center" headers="estimate">0.79***</td>
<td class="gt_row gt_center" headers="std.error">0.065</td>
<td class="gt_row gt_center" headers="ci">0.66, 0.91</td>
<td class="gt_row gt_center" headers="p.value">1.57e-33</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">ParentSupport</td>
<td class="gt_row gt_center" headers="estimate">-1.1***</td>
<td class="gt_row gt_center" headers="std.error">0.036</td>
<td class="gt_row gt_center" headers="ci">-1.2, -1.0</td>
<td class="gt_row gt_center" headers="p.value">2.15e-209</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">StrgMoralBlfs</td>
<td class="gt_row gt_center" headers="estimate">-0.37***</td>
<td class="gt_row gt_center" headers="std.error">0.021</td>
<td class="gt_row gt_center" headers="ci">-0.41, -0.33</td>
<td class="gt_row gt_center" headers="p.value">4.87e-69</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">ParentSupport * StrgMoralBlfs</td>
<td class="gt_row gt_center" headers="estimate">0.20***</td>
<td class="gt_row gt_center" headers="std.error">0.013</td>
<td class="gt_row gt_center" headers="ci">0.17, 0.22</td>
<td class="gt_row gt_center" headers="p.value">1.81e-54</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="even">
<td colspan="5" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> *p&lt;0.05; **p&lt;0.01; ***p&lt;0.001</td>
</tr>
<tr class="odd">
<td colspan="5" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> IRR = Incidence Rate Ratio, SE = Standard Error, CI = Confidence Interval</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|message=FALSE </span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co">#use ggeffects::ggpredict() to save plot_model data for use in ggplot </span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>glm3df <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(glm3, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"ParentSupport"</span>, <span class="st">"StrgMoralBlfs [0,2,4]"</span>))</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co">#prediction plot with data subset &amp; ggblend</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>predplot3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>simdat3sub, <span class="fu">aes</span>(<span class="at">x=</span>ParentSupport, <span class="at">y=</span>Delinquency2, </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color=</span>StrgMoralBlfs, <span class="at">group=</span>StrgMoralBlfs)) <span class="sc">+</span> </span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">|&gt;</span> <span class="fu">partition</span>(<span class="fu">vars</span>(StrgMoralBlfs)) <span class="sc">|&gt;</span> <span class="fu">blend</span>(<span class="st">"lighten"</span>) <span class="sc">|&gt;</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">blend</span>(<span class="st">"multiply"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_colorblind</span>() <span class="sc">+</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_hline(yintercept=7, linetype="dashed") +</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="dv">2</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span>glm3df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted,</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">linetype=</span>group, <span class="at">color=</span>group), <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span>  </span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>glm3df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted, </span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>                               <span class="at">ymin=</span>conf.low, <span class="at">ymax=</span>conf.high, <span class="at">fill=</span>group), </span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha=</span><span class="fl">0.4</span>, <span class="at">inherit.aes=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"solid"</span>, <span class="st">"solid"</span>, <span class="st">"solid"</span>)) <span class="sc">+</span> </span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">linetype=</span><span class="cn">FALSE</span>, <span class="at">fill=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Parental Support"</span>,</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Delinquency2"</span>,</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Predicted conditional marginal effects of parent support on delinquency2"</span>, </span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Plotted at minimum (0), scale midpoint (2), &amp; maximum (4) strong moral beliefs</span><span class="sc">\n</span><span class="st">(Poisson regression, n=3k simulated observations)"</span>) </span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>predplot3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>est6dat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(est6<span class="sc">$</span>effect.pe) <span class="sc">%&gt;%</span> <span class="fu">rownames_to_column</span>(<span class="st">"CMA_est2"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rcde"</span>,<span class="st">"cde"</span>,CMA_est2),</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rpnde"</span>,<span class="st">"pnde"</span>,CMA_est), </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rtnde"</span>,<span class="st">"tnde"</span>,CMA_est),</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rpnie"</span>,<span class="st">"pnie"</span>,CMA_est),</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rtnie"</span>,<span class="st">"tnie"</span>,CMA_est),</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">CMA_est =</span> <span class="fu">if_else</span>(CMA_est2<span class="sc">==</span><span class="st">"Rte"</span>,<span class="st">"te"</span>,CMA_est)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>est6dattab <span class="ot">&lt;-</span> est6dat <span class="sc">%&gt;%</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"nonlin_EM"</span> <span class="ot">=</span> <span class="st">"est6$effect.pe"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>CMA_est) <span class="sc">%&gt;%</span> </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CMA_est2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ERcde(prop)"</span>, <span class="st">"ERintref(prop)"</span>, <span class="st">"ERintmed(prop)"</span>, </span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"ERpnie(prop)"</span>, <span class="st">"pm"</span>, <span class="st">"int"</span>, <span class="st">"pe"</span>)) </span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>est6dattab <span class="sc">%&gt;%</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(<span class="at">label =</span> <span class="fu">html</span>(<span class="st">"CMAverse&lt;br&gt;(nonlinear, alt DV)"</span>), </span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>                <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"CMA_est2"</span>, <span class="st">"nonlin_EM"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_label</span>(<span class="at">CMA_est2 =</span> <span class="st">"effect"</span>,</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">nonlin_EM =</span> <span class="fu">html</span>(<span class="st">"EMint&lt;br&gt;estimate"</span>)</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>               )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="dsvgaztkvn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dsvgaztkvn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dsvgaztkvn thead, #dsvgaztkvn tbody, #dsvgaztkvn tfoot, #dsvgaztkvn tr, #dsvgaztkvn td, #dsvgaztkvn th {
  border-style: none;
}

#dsvgaztkvn p {
  margin: 0;
  padding: 0;
}

#dsvgaztkvn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dsvgaztkvn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dsvgaztkvn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dsvgaztkvn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dsvgaztkvn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dsvgaztkvn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dsvgaztkvn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dsvgaztkvn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dsvgaztkvn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dsvgaztkvn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dsvgaztkvn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dsvgaztkvn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dsvgaztkvn .gt_spanner_row {
  border-bottom-style: hidden;
}

#dsvgaztkvn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dsvgaztkvn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dsvgaztkvn .gt_from_md > :first-child {
  margin-top: 0;
}

#dsvgaztkvn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dsvgaztkvn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dsvgaztkvn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dsvgaztkvn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dsvgaztkvn .gt_row_group_first td {
  border-top-width: 2px;
}

#dsvgaztkvn .gt_row_group_first th {
  border-top-width: 2px;
}

#dsvgaztkvn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dsvgaztkvn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dsvgaztkvn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dsvgaztkvn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dsvgaztkvn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dsvgaztkvn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dsvgaztkvn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dsvgaztkvn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dsvgaztkvn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dsvgaztkvn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dsvgaztkvn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dsvgaztkvn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dsvgaztkvn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dsvgaztkvn .gt_left {
  text-align: left;
}

#dsvgaztkvn .gt_center {
  text-align: center;
}

#dsvgaztkvn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dsvgaztkvn .gt_font_normal {
  font-weight: normal;
}

#dsvgaztkvn .gt_font_bold {
  font-weight: bold;
}

#dsvgaztkvn .gt_font_italic {
  font-style: italic;
}

#dsvgaztkvn .gt_super {
  font-size: 65%;
}

#dsvgaztkvn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dsvgaztkvn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dsvgaztkvn .gt_indent_1 {
  text-indent: 5px;
}

#dsvgaztkvn .gt_indent_2 {
  text-indent: 10px;
}

#dsvgaztkvn .gt_indent_3 {
  text-indent: 15px;
}

#dsvgaztkvn .gt_indent_4 {
  text-indent: 20px;
}

#dsvgaztkvn .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th colspan="2" id="CMAverse<br>(nonlinear, alt DV)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">CMAverse<br>
(nonlinear, alt DV)</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="effect" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">effect</th>
<th id="EMint<br>estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">EMint<br>
estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="CMA_est2">Rcde</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.3338</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="CMA_est2">Rpnde</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.5997</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="CMA_est2">Rtnde</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.6244</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="CMA_est2">Rpnie</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.9272</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="CMA_est2">Rtnie</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.9654</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="CMA_est2">Rte</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.5790</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="CMA_est2">ERcde</td>
<td class="gt_row gt_right" headers="nonlin_EM">-2.0461</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="CMA_est2">ERintref</td>
<td class="gt_row gt_right" headers="nonlin_EM">1.6458</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="CMA_est2">ERintmed</td>
<td class="gt_row gt_right" headers="nonlin_EM">0.0520</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="CMA_est2">ERpnie</td>
<td class="gt_row gt_right" headers="nonlin_EM">-0.0728</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcmest</span>(est6) <span class="sc">+</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">vjust =</span> <span class="fl">0.8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-5-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#save estimates and intervals data</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>est6dat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(est5[<span class="dv">9</span><span class="sc">:</span><span class="dv">12</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">"CMA_est"</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co"># drop proportion estimates</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>est6dat <span class="sc">%&gt;%</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CMA_est <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"pm"</span>, <span class="st">"pe"</span>, <span class="st">"ERpnie(prop)"</span>, <span class="st">"ERintref(prop)"</span>,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"ERintmed(prop)"</span>,<span class="st">"ERcde(prop)"</span>, <span class="st">"int"</span>, </span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"ERpnie"</span>, <span class="st">"ERintmed"</span>, <span class="st">"ERintref"</span>, <span class="st">"ERcde"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CMA_est =</span> <span class="fu">factor</span>(CMA_est, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Rte"</span>, <span class="st">"Rtnie"</span>, <span class="st">"Rpnie"</span>, <span class="st">"Rtnde"</span>, <span class="st">"Rpnde"</span>, <span class="st">"Rcde"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reorder the coefficients so that the largest is at the top of the plot</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(term = fct_reorder(CMA_est, effect.pe)) %&gt;%</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(effect.pe, CMA_est)) <span class="sc">+</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> effect.ci.low, <span class="at">xmax =</span> effect.ci.high), <span class="at">height =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add in a dotted line at zero</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">lty =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated effects on risk ratio scale"</span>,</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Effect estimates from causal mediation decomposition (risk ratios)"</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-6-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop proportion estimates</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>est6dat <span class="sc">%&gt;%</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CMA_est <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"pm"</span>, <span class="st">"pe"</span>, <span class="st">"ERpnie(prop)"</span>, <span class="st">"ERintref(prop)"</span>,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"ERintmed(prop)"</span>,<span class="st">"ERcde(prop)"</span>, <span class="st">"int"</span>, </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Rte"</span>, <span class="st">"Rtnie"</span>, <span class="st">"Rpnie"</span>, <span class="st">"Rtnde"</span>, <span class="st">"Rpnde"</span>, <span class="st">"Rcde"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CMA_est =</span> <span class="fu">factor</span>(CMA_est, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"ERpnie"</span>, <span class="st">"ERintmed"</span>, <span class="st">"ERintref"</span>, <span class="st">"ERcde"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reorder the coefficients so that the largest is at the top of the plot</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(term = fct_reorder(CMA_est, effect.pe)) %&gt;%</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(effect.pe, CMA_est)) <span class="sc">+</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> effect.ci.low, <span class="at">xmax =</span> effect.ci.high), <span class="at">height =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add in a dotted line at zero</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated effects on excess risks scale"</span>,</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Effect estimates from causal mediation decomposition (excess risks)"</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="modmadness-pt3_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-7-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(est6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Causal Mediation Analysis

# Outcome regression:

Call:
glm(formula = Delinquency2 ~ ParentSupport + StrgMoralBlfs + 
    ParentSupport * StrgMoralBlfs, family = poisson(), data = getCall(x$reg.output$yreg)$data, 
    weights = getCall(x$reg.output$yreg)$weights)

Coefficients:
                            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                   0.7882     0.0653    12.1   &lt;2e-16 ***
ParentSupport                -1.0971     0.0355   -30.9   &lt;2e-16 ***
StrgMoralBlfs                -0.3666     0.0209   -17.6   &lt;2e-16 ***
ParentSupport:StrgMoralBlfs   0.1958     0.0126    15.5   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 7750.2  on 2999  degrees of freedom
Residual deviance: 4249.6  on 2996  degrees of freedom
AIC: 7832

Number of Fisher Scoring iterations: 5


# Mediator regressions: 

Call:
glm(formula = StrgMoralBlfs ~ ParentSupport, family = gaussian(), 
    data = getCall(x$reg.output$mreg[[1L]])$data, weights = getCall(x$reg.output$mreg[[1L]])$weights)

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     3.2145     0.0164   195.9   &lt;2e-16 ***
ParentSupport   0.2061     0.0165    12.5   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for gaussian family taken to be 0.807)

    Null deviance: 2546.9  on 2999  degrees of freedom
Residual deviance: 2420.6  on 2998  degrees of freedom
AIC: 7876

Number of Fisher Scoring iterations: 2


# Effect decomposition on the rate ratio scale via the regression-based approach
 
Direct counterfactual imputation estimation with 
 bootstrap standard errors, percentile confidence intervals and p-values 
 
                Estimate Std.error   95% CIL 95% CIU  P.val    
Rcde            0.333837  0.035640  0.276100   0.399 &lt;2e-16 ***
Rpnde           0.599703  0.050694  0.535054   0.683 &lt;2e-16 ***
Rtnde           0.624391  0.053477  0.557103   0.715 &lt;2e-16 ***
Rpnie           0.927231  0.008316  0.916611   0.944 &lt;2e-16 ***
Rtnie           0.965403  0.009502  0.954753   0.984 &lt;2e-16 ***
Rte             0.578955  0.046486  0.520907   0.659 &lt;2e-16 ***
ERcde          -2.046113  0.181242 -2.454288  -1.776 &lt;2e-16 ***
ERintref        1.645817  0.198858  1.336259   2.069 &lt;2e-16 ***
ERintmed        0.052021  0.004102  0.044078   0.058 &lt;2e-16 ***
ERpnie         -0.072769  0.008316 -0.083389  -0.056 &lt;2e-16 ***
ERcde(prop)     4.859609  0.788595  3.891345   6.695 &lt;2e-16 ***
ERintref(prop) -3.908887  0.805974 -5.772869  -2.911 &lt;2e-16 ***
ERintmed(prop) -0.123552  0.019938 -0.167576  -0.098 &lt;2e-16 ***
ERpnie(prop)    0.172829  0.036256  0.119480   0.237 &lt;2e-16 ***
pm              0.049278  0.020259  0.019565   0.084 &lt;2e-16 ***
int            -4.032438  0.821021 -5.929947  -3.017 &lt;2e-16 ***
pe             -3.859609  0.788595 -5.695418  -2.891 &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Rcde: controlled direct effect rate ratio; Rpnde: pure natural direct effect rate ratio; Rtnde: total natural direct effect rate ratio; Rpnie: pure natural indirect effect rate ratio; Rtnie: total natural indirect effect rate ratio; Rte: total effect rate ratio; ERcde: excess relative rate due to controlled direct effect; ERintref: excess relative rate due to reference interaction; ERintmed: excess relative rate due to mediated interaction; ERpnie: excess relative rate due to pure natural indirect effect; ERcde(prop): proportion ERcde; ERintref(prop): proportion ERintref; ERintmed(prop): proportion ERintmed; ERpnie(prop): proportion ERpnie; pm: overall proportion mediated; int: overall proportion attributable to interaction; pe: overall proportion eliminated)

Relevant variable values: 
$a
[1] 1

$astar
[1] 0

$mval
$mval[[1]]
[1] 0</code></pre>
</div>
</div>
</div>
</div>
</div>
</details>
</section>
<section id="sec-curtaincall" class="level2">
<h2 class="anchored" data-anchor-id="sec-curtaincall">Curtain call</h2>
<p>I hope this three-part series has helped you better appreciate the challenges of analyzing moderation processes with criminological data and the importance of checking for exposure-mediator interactions and, where they exist, of decomposing total effects into its constituent interaction and indirect effect components.</p>
<p>In closing, the next time you stub your toe, I hope I have not caused you to think of me. Blame the curtains instead.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="thatsallfolks.jpg" class="img-fluid figure-img"></p>
<figcaption>That’s all folks!</figcaption>
</figure>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Of course, in many situations, a “direct effect” estimate itself may (and likely does) represent an aggregate or composite summary of other indirect effects operating through unmeasured mechanisms.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>In causal mediation decomposition using potential outcomes, the <em>mediated interaction</em> component is typically attributed variously to quantities representing the direct effect of the exposure or, instead, to quantities representing the indirect effect through the mechanism. The specific estimates that a researcher chooses to report will depend upon one’s focal research questions and estimand of interest. I will try to explain this partitioning of the mediated interaction component (out of “pure” or into “total” effect estimates) in more detail later.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Again, traditional and causal mediation approaches both rest upon similar confounding assumptions. In addition to these assumptions, there are lots of other considerations as well when deciding whether a mediation model is appropriate for your situation. Too often, <a href="https://journals.sagepub.com/doi/10.1177/25152459221095827">a mediation model may not be appropriate</a>, but researchers use them anyway. Still, even in situations where the appropriateness of their assumptions are dubious, I think most social scientific research would benefit from careful thinking about and transparent statements of the assumptions required to make causal inferences from data - whether those causal inferences are from mediation models or otherwise. Likewise, reading more about causal mediation methods may help towards these ends, as the explicit and formal statement of assumptions necessary to generate valid causal inferences from mediation models is an important area of emphasis in the causal mediation literature.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Given these aims, I also do not address other detailed issues or advanced modeling options here, such as differences between <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10368791/">regression-based</a>, <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4214081/">weighting-based</a>, <em>g-formula</em>, or <a href="https://bs1125.github.io/CMAverse/articles/overview.html">other estimation methods</a> available in CMAverse. However, note that some available methods may be better suited for your particular modeling situation, and some choices may be better than others <a href="https://www.tandfonline.com/doi/full/10.1080/10705511.2022.2104287">depending upon your specific causal estimand of interest</a>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Note, too, that the Y(do[A=1],do[M<sub>A=0</sub>]) may be an unobservable counterfactual condition (e.g., in the presence of mediation). We cannot in fact simultaneously observe Y with X set to =1 and M set to equal its expected value when A=0. After all, if we do A=1 and X has an effect on M, then M would also change to its (population average) value at A=1; M would not stay at its expected value when A=0! <a href="https://www.nimhd.nih.gov/docs/hd-workshop/day1/roleWorkInHD-2020_10_kaufman_mediationAnalysesToRacialEthnic.pdf">These slides</a> (especially slide 12) offer a concise description of this issue.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>If you have not read it yourself, then you might be unaware that <a href="https://psycnet.apa.org/doiLanding?doi=10.1037%2F0022-3514.51.6.1173">Baron &amp; Kenny’s (1986) classic paper</a> was actually about distinguishing between mediation and moderation concepts, with an emphasis on testing indirect and interaction hypotheses <em>in the same analysis</em>. You might also be surprised to learn that <a href="https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=6c841fdea3122bdbd49570fc2ee0efcd3aad9913">Judd and Kenny’s (1981) classic mediation paper</a> outlined the core causal assumptions necessary for valid mediation analysis and explicitly discussed exposure-mediator interactions. So, in some important ways, this entry is trying help get our field caught up to leading mediation advice published over 40 years ago. Unfortunately, for decades, researchers following the “Baron and Kenny” causal steps approach to mediation largely have ignored Judd and Kenny’s earlier discussions of causal assumptions pertaining to confounding or exposure-mediator interactions. <a href="https://davidakenny.net/cm/mediate.htm#id.3dy6vkm">David Kenny</a> suggests this might be partly due (among other important reasons) to the fact that Baron and Kenny’s highly cited paper “does not even mention confounding as an assumption”; rather, that paper did “discuss reliability and interaction” and it “suggests to the reader to consult Judd and Kenny (1981a) for more information about assumptions.” Sadly, you might <em>not</em> be surprised to learn that, according to Kenny, the “initial submission did discuss confounding, but the editor suggested cutting that section and unfortunately the authors complied.” Let’s focus on improving our analytic approaches to mediation and moderation for now, then work on problematic reviewer, editor, and publisher practices at a later date.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Upon close inspection of the full output for the <code>EMint=TRUE</code> model, you might also notice that the outcome model regression coefficients are equivalent to those generated by the linear interaction model used earlier to create prediction plots. This is because essentially the same underlying linear interaction model is used to estimate indirect effects and conduct total effect decomposition.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Invalid proportion estimates extending beyond expected bounds of 0 to 1 also can mess up axis scales when plotting; you can see this in some of the CMAverse “default” plots. Additionally, even in situations where proportion estimates are valid, I am skeptical that the proportion of a total effect that is attributable to specific underlying component is likely to be a very useful estimand of interest.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p><a href="https://bs1125.github.io/CMAverse/articles/overview.html">Table 1 here</a> provides descriptions of the various effect estimates generated by CMAverse in linear decomposition models.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p><a href="https://bs1125.github.io/CMAverse/articles/overview.html">See Table 2 here</a> for descriptions of the various causal estimates on the ratio scale that are output by CMAverse, and see the <a href="https://bs1125.github.io/CMAverse/reference/cmest.html"><code>cmest</code> documentation</a> for descriptions of which causal estimates are generated under different modeling specifications.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>To echo my recommendation from Part 1, <a href="https://sociologicalscience.com/download/vol-6/february/SocSci_v6_81to117.pdf">Trenton Mize’s (2019) paper</a> is an excellent resource for better understanding interactions in nonlinear models.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{brauer2024,
  author = {Brauer, Jon},
  title = {Moderator {Madness,} {Part} 3},
  date = {2024-02-26},
  url = {https://reluctantcriminologists.com/blog-posts/[11]/modmadness-pt3.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-brauer2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Brauer, Jon. 2024. <span>“Moderator Madness, Part 3.”</span> February
26, 2024. <a href="https://reluctantcriminologists.com/blog-posts/[11]/modmadness-pt3.html">https://reluctantcriminologists.com/blog-posts/[11]/modmadness-pt3.html</a>.
</div></div></section></div></main> <!-- /main -->
<div>

<hr>



<p> questions? feedback? want to connect? </p>




<table class="caption-top table" data-quarto-postprocess="true" width="100%" data-cellspacing="0" data-cellpadding="0">
<colgroup>
<col style="width: 100%">
</colgroup>
<tbody>
<tr class="odd">
<td><table class="caption-top table" data-quarto-postprocess="true" data-cellspacing="0" data-cellpadding="0">
<tbody>
<tr class="odd">
<td style="border-radius: 2px" data-bgcolor="#93c54b"><a href="mailto:reluctantcrim@gmail.com" target="_blank" style="padding: 8px 12px; border: 1px solid #93c54b;border-radius: 2px;font-family: Helvetica, Arial, sans-serif;font-size: 14px; color: #000000;text-decoration: none;font-weight:bold;display: inline-block;">send us an email</a></td>
</tr>
</tbody>
</table></td>
</tr>
</tbody>
</table>




<hr>

</div>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.reluctantcriminologists\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="jakeday4/reluctantcrim_comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://reluctantcriminologists.com/">
      <i class="bi bi-house-fill" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:reluctantcrim@gmail.com">
      <i class="bi bi-envelope-fill" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jakeday4/reluctantcrim_website">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/reluctantcrim">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>