<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Kansas City Community Survey - 7&nbsp; Annual Resident Survey Comparison</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./7_kc_comsurvey_conclusion.html" rel="next">
<link href="./5_kc_comsurvey_map-collective-efficacy.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./6_kc_comsurvey_resident-survey-comp.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Annual Resident Survey Comparison</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Kansas City Community Survey</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Kansas City Community Survey</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_kc_comsurvey_exec-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Executive Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_kc_comsurvey_introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_kc_comsurvey_duplicates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Quality Assessment</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4_kc_comsurvey_collective-efficacy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Measuring Collective Efficacy</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5_kc_comsurvey_map-collective-efficacy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Mapping Collective Efficacy</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6_kc_comsurvey_resident-survey-comp.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Annual Resident Survey Comparison</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7_kc_comsurvey_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./8_kc_comsurvey_appendix1-survey-data-clean.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Appendix I - Cleaning &amp; Wrangling the Survey Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./9_kc_comsurvey_appendix2-neighborhood-data-clean.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Appendix II - Cleaning &amp; Wrangling the Neighborhood Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_kc_comsurvey_appendix3-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Appendix III - Research Design</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_kc_comsurvey_appendix4-power.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Appendix IV - Power Analysis</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-kcrs" id="toc-sec-kcrs" class="nav-link active" data-scroll-target="#sec-kcrs"><span class="header-section-number">7.0.1</span> Introduction</a></li>
  <li><a href="#wrangle-the-data" id="toc-wrangle-the-data" class="nav-link" data-scroll-target="#wrangle-the-data"><span class="header-section-number">7.0.2</span> Wrangle the Data</a></li>
  <li><a href="#descriptive-statistics" id="toc-descriptive-statistics" class="nav-link" data-scroll-target="#descriptive-statistics"><span class="header-section-number">7.0.3</span> Descriptive Statistics</a></li>
  <li><a href="#sec-kcrs-plot" id="toc-sec-kcrs-plot" class="nav-link" data-scroll-target="#sec-kcrs-plot"><span class="header-section-number">7.0.4</span> KC Resident Survey Plots</a></li>
  <li><a href="#sec-kcrs-ineq" id="toc-sec-kcrs-ineq" class="nav-link" data-scroll-target="#sec-kcrs-ineq"><span class="header-section-number">7.0.5</span> Sampling Disparities: KC Resident vs Community Surveys</a></li>
  <li><a href="#sec-kcrs-compare" id="toc-sec-kcrs-compare" class="nav-link" data-scroll-target="#sec-kcrs-compare"><span class="header-section-number">7.0.6</span> Comparing Survey Results from Same Neighborhoods</a></li>
  <li><a href="#sec-kcrs-estimate" id="toc-sec-kcrs-estimate" class="nav-link" data-scroll-target="#sec-kcrs-estimate"><span class="header-section-number">7.0.7</span> Comparing response-level estimation across samples</a></li>
  <li><a href="#sec-kcrs-find" id="toc-sec-kcrs-find" class="nav-link" data-scroll-target="#sec-kcrs-find"><span class="header-section-number">7.0.8</span> Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Annual Resident Survey Comparison</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="sec-kcrs" class="level3" data-number="7.0.1">
<h3 data-number="7.0.1" class="anchored" data-anchor-id="sec-kcrs"><span class="header-section-number">7.0.1</span> Introduction</h3>
<p>The last thing we agreed to do regarding the KC community survey was a “reanalysis/comparison of KC Community Survey trends data (if available).” By <strong><em>community survey</em></strong> we meant the regular <strong><em>resident survey</em></strong> that is administered each fiscal year to a random sample of KC residents (see the KC government’s <a href="https://www.kcmo.gov/city-hall/departments/city-manager-s-office/datakc/citizen-and-business-satisfaction-survey-results">website</a> for more information). On the KC government’s website, they describe the resident survey as follows:</p>
<blockquote class="blockquote">
<p>Kansas City, Missouri administers an anonymous survey each fiscal year to a statistically significant random sample of its residents. The City’s goal is to understand residents’ level of satisfaction or dissatisfaction with City services, as well as their priorities for improvement. The surveys are collected via mail, phone, and online on a quarterly basis throughout the year, and the full results for the prior fiscal year are released each summer.</p>
</blockquote>
<p>Although they have yet to release the result for the 2024-25 fiscal year and the raw data for the resident survey is not located on the <a href="https://data.kcmo.org/browse?sortBy=relevance&amp;page=1&amp;pageSize=20">dataKC</a> website, they do publish an overview/descriptive report of the results each year. Additionally, Dr.&nbsp;Kotlaja gained access to the raw data from the 4th quarter of the fiscal year from 2023-2024 (n ~ 900). Below, we start by simply identifying the questions included in the community survey that were duplicated from the resident survey. Then, we compare the results of the community survey to the resident survey directly.</p>
</section>
<section id="wrangle-the-data" class="level3" data-number="7.0.2">
<h3 data-number="7.0.2" class="anchored" data-anchor-id="wrangle-the-data"><span class="header-section-number">7.0.2</span> Wrangle the Data</h3>
<p>There were 17 questions from the resident survey that were duplicated in the community survey. In the combined data, those questions are stored as <code>Q29_1</code> - <code>Q29_17</code>. This includes complete or partial question banks related to overall perceptions and and some specific issues related to respondents’ “Perceptions of the Community” (<code>Q29_1</code> - <code>Q29_8</code>), “Quality of City Services” (<code>Q29_9</code> and <code>Q29_10</code>), and “Police Services” (<code>Q29_11</code> - <code>Q29_17</code>). Each of these questions asked residents to rate their level of satisfaction among 5 potential answers: 1 = “Very satisfied,” 2 = “Satisfied,” 3 = “Neutral,” 4 = “Somewhat dissatisfied,” and 5 = “Dissatisfied.” It is important to note the imbalanced nature of the answer categories (e.g., “Very Satisfied” is more satisfied than “Dissatisfied” is dissatisfied) and that they technically don’t match the resident survey exactly which used a balanced answer scale (1 = “Very Satisfied” and 5 = “Very Dissatisfied”).</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>kc_combsurv_recode <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">here</span>(<span class="st">"Data"</span>, <span class="st">"kc_combsurv_recode.rds"</span>))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>kc_combsurv_geoid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">here</span>(<span class="st">"Data"</span>, <span class="st">"kc_combsurv_geoid.rds"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The first thing we are going to do is create more informative variable names and reverse code the variables so that larger values indicate higher degrees of satisfaction with the particular topic being asked. Since the questions fall into the three question banks listed above, in creating the new names we will prefix the informative variable names with their question bank: <code>percom_</code> = “Perceptions of the Community,” <code>qualserv_</code> = “Quality of City Services,” and <code>polserv_</code> = “Police Services.”</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>percom_old <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"Q29_"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>percom_new <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"percom_quallife"</span>, <span class="st">"percom_safenbhd"</span>, <span class="st">"percom_appear"</span>, <span class="st">"percom_image"</span>, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>               <span class="st">"percom_qualserv"</span>, <span class="st">"percom_value"</span>, <span class="st">"percom_safecity"</span>, <span class="st">"percom_qualeduc"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>qualserv_old <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Q29_9"</span>, <span class="st">"Q29_10"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>qualserv_new <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"qualserv_police"</span>, <span class="st">"qualserv_nbhd"</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>polserv_old <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"Q29_"</span>, <span class="dv">11</span><span class="sc">:</span><span class="dv">17</span>))</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>polserv_new <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"polserv_relate"</span>, <span class="st">"polserv_effective"</span>, <span class="st">"polserv_traffic"</span>, <span class="st">"polserv_parking"</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">"polserv_quick"</span>, <span class="st">"polserv_concerns"</span>, <span class="st">"polserv_prevcrime"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>kc_combsurv_ressurv <span class="ot">&lt;-</span> kc_combsurv_recode <span class="sc">%&gt;%</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">all_of</span>(percom_old), <span class="sc">~</span> <span class="dv">6</span> <span class="sc">-</span> .x, <span class="at">.names =</span> <span class="st">"{percom_new}"</span>),</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">all_of</span>(qualserv_old), <span class="sc">~</span> <span class="dv">6</span> <span class="sc">-</span> .x, <span class="at">.names =</span> <span class="st">"{qualserv_new}"</span>),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">all_of</span>(polserv_old), <span class="sc">~</span> <span class="dv">6</span> <span class="sc">-</span> .x, <span class="at">.names =</span> <span class="st">"{polserv_new}"</span>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, survey, NBHD,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>         <span class="fu">all_of</span>(percom_old), <span class="fu">all_of</span>(qualserv_old), <span class="fu">all_of</span>(polserv_old), </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>         <span class="fu">all_of</span>(percom_new), <span class="fu">all_of</span>(qualserv_new), <span class="fu">all_of</span>(polserv_new)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Function to check recodes</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>tabcheck <span class="ot">&lt;-</span> <span class="cf">function</span>(dat, var1, var2){</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(dat, {{var1}}, {{var2}}) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_title</span>() </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Uncomment to confirm coding worked:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># map2(percom_old, percom_new, ~ tabcheck(kc_combsurv_ressurv, !!sym(.x), !!sym(.y))) </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># map2(qualserv_old, qualserv_new, ~ tabcheck(kc_combsurv_ressurv, !!sym(.x), !!sym(.y))) </span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># map2(polserv_old, polserv_new, ~ tabcheck(kc_combsurv_ressurv, !!sym(.x), !!sym(.y))) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The next step is to do the same for the resident survey data from the 4th quarter of the fiscal year from 2023-2024.</p>
<section id="resident-survey-quarter-4-fiscal-year-2023-2024" class="level4" data-number="7.0.2.1">
<h4 data-number="7.0.2.1" class="anchored" data-anchor-id="resident-survey-quarter-4-fiscal-year-2023-2024"><span class="header-section-number">7.0.2.1</span> Resident Survey (Quarter 4, Fiscal Year 2023-2024)</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to rename the columns</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>rename_function <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the Q#[##] part</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  q_part <span class="ot">&lt;-</span> <span class="fu">str_extract</span>(name, <span class="st">"Q</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">]"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If q_part is found, format it; otherwise, keep the original name</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(q_part)) {</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove brackets and replace with underscore</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    new_name <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(q_part, <span class="st">"</span><span class="sc">\\</span><span class="st">["</span>, <span class="st">"_"</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    new_name <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(new_name, <span class="st">"</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(new_name)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(name) <span class="co"># Keep original name if pattern not found (e.g., "ID", "Method")</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load raw residential survey data</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>kc_ressurv_raw <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="fu">here</span>(<span class="st">"Data"</span>, <span class="st">"kcmo_ressurv_q4-2023-2024.xlsx"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ID...<span class="dv">226</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ID =</span> ID...<span class="dv">1</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">council_district =</span> <span class="st">`</span><span class="at">Council District</span><span class="st">`</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">block_lon =</span> <span class="st">`</span><span class="at">Block Lon</span><span class="st">`</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">block_lat =</span> <span class="st">`</span><span class="at">Block Lat</span><span class="st">`</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Create vector of variables to rename </span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>percom_resold <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Q2_01"</span>, <span class="st">"Q2_02"</span>, <span class="st">"Q2_03"</span>, <span class="st">"Q2_04"</span>, </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Q2_05"</span>, <span class="st">"Q2_06"</span>, <span class="st">"Q2_07"</span>, <span class="st">"Q2_08"</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>percom_resnew <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"percom_qualserv"</span>, <span class="st">"percom_value"</span>, <span class="st">"percom_image"</span>, <span class="st">"percom_quallife"</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"percom_safecity"</span>, <span class="st">"percom_safenbhd"</span>, <span class="st">"percom_qualeduc"</span>, <span class="st">"percom_appear"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>qualserv_resold <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Q3_01"</span>, <span class="st">"Q3_06"</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>qualserv_resnew <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"qualserv_police"</span>, <span class="st">"qualserv_nbhd"</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>polserv_resold <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Q5_01"</span>, <span class="st">"Q5_02"</span>, <span class="st">"Q5_03"</span>, <span class="st">"Q5_04"</span>,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Q5_05"</span>, <span class="st">"Q5_06"</span>, <span class="st">"Q5_07"</span>)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>polserv_resnew <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"polserv_effective"</span>, <span class="st">"polserv_relate"</span>, <span class="st">"polserv_prevcrime"</span>, <span class="st">"polserv_traffic"</span>, </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"polserv_parking"</span>, <span class="st">"polserv_quick"</span>, <span class="st">"polserv_concerns"</span>)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>kc_ressurv_trim <span class="ot">&lt;-</span> kc_ressurv_raw <span class="sc">%&gt;%</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~!</span><span class="fu">all</span>(<span class="fu">is.na</span>(.)))) <span class="sc">%&gt;%</span> <span class="co">#Remove columns where every value is NA (deals with duplicate names)</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">sapply</span>(., rename_function, <span class="at">USE.NAMES =</span> <span class="cn">FALSE</span>)) <span class="sc">%&gt;%</span> <span class="co">#rename similar to comm. survey</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Method, </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>         <span class="fu">all_of</span>(percom_resold), <span class="fu">all_of</span>(qualserv_resold), <span class="fu">all_of</span>(polserv_resold),</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>         Zip, council_district, block_lon, block_lat, Quarter</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">all_of</span>(percom_resold), <span class="sc">~</span> <span class="fu">ifelse</span>(.x <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA</span>, .x), <span class="at">.names =</span> <span class="st">"{percom_resnew}"</span>),</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">all_of</span>(qualserv_resold), <span class="sc">~</span> <span class="fu">ifelse</span>(.x <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA</span>, .x), <span class="at">.names =</span> <span class="st">"{qualserv_resnew}"</span>),</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">all_of</span>(polserv_resold), <span class="sc">~</span> <span class="fu">ifelse</span>(.x <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA</span>, .x), <span class="at">.names =</span> <span class="st">"{polserv_resnew}"</span>)</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="co">#Uncomment to confirm coding worked:</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="co"># map2(percom_resold, percom_resnew, ~ tabcheck(kc_ressurv_trim, !!sym(.x), !!sym(.y))) </span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="co"># map2(qualserv_resold, qualserv_resnew, ~ tabcheck(kc_ressurv_trim, !!sym(.x), !!sym(.y))) </span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="co"># map2(polserv_resold, polserv_resnew, ~ tabcheck(kc_ressurv_trim, !!sym(.x), !!sym(.y))) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In recoding and renaming the resident survey above, I coded “Don’t Know” responses as missing (<code>NA</code>). This aligns with how results of the survey are typically reported (there also weren’t any NA values already coded). The resident survey data did not need to be reverse coded as, according to the <a href="https://www.kcmo.gov/home/showpublisheddocument/15062/638820335192630000">report</a> for the 2023-2024 survey results, these questions were already coded so that higher levels of satisfaction were higher numerical values.</p>
<p>Now we can look at some basic descriptive statistics for these items.</p>
</section>
</section>
<section id="descriptive-statistics" class="level3" data-number="7.0.3">
<h3 data-number="7.0.3" class="anchored" data-anchor-id="descriptive-statistics"><span class="header-section-number">7.0.3</span> Descriptive Statistics</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Community Survey</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Resident Survey (4Q 2023-2024)</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div style="height: 500px; overflow-y: auto; border: 1px solid #ddd; padding: 10px;">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>kc_combsurv_ressurv <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">zap_formats</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">zap_labels</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">zap_label</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(percom_new, qualserv_new, polserv_new) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datasummary_skim</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_q62hammv7yai46wplqd4(i, j, css_id) {
          var table = document.getElementById("tinytable_q62hammv7yai46wplqd4");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_q62hammv7yai46wplqd4');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_q62hammv7yai46wplqd4(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_q62hammv7yai46wplqd4");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 4, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 12, j: 0 }, { i: 13, j: 0 }, { i: 1, j: 0 }, { i: 3, j: 0 }, { i: 16, j: 0 }, { i: 3, j: 3 }, { i: 5, j: 0 }, { i: 7, j: 0 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 2, j: 0 }, { i: 11, j: 0 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 15, j: 0 }, { i: 11, j: 1 }, { i: 12, j: 1 }, { i: 13, j: 1 }, { i: 1, j: 1 }, { i: 15, j: 1 }, { i: 16, j: 1 }, { i: 3, j: 4 }, { i: 5, j: 1 }, { i: 1, j: 2 }, { i: 2, j: 2 }, { i: 3, j: 2 }, { i: 4, j: 2 }, { i: 5, j: 2 }, { i: 6, j: 2 }, { i: 7, j: 2 }, { i: 8, j: 2 }, { i: 9, j: 2 }, { i: 6, j: 0 }, { i: 11, j: 2 }, { i: 12, j: 2 }, { i: 13, j: 2 }, { i: 10, j: 0 }, { i: 15, j: 2 }, { i: 16, j: 2 }, { i: 3, j: 5 }, { i: 14, j: 0 }, { i: 1, j: 3 }, { i: 2, j: 3 }, { i: 7, j: 5 }, { i: 4, j: 3 }, { i: 5, j: 3 }, { i: 6, j: 3 }, { i: 7, j: 3 }, { i: 8, j: 3 }, { i: 9, j: 3 }, { i: 6, j: 1 }, { i: 11, j: 3 }, { i: 12, j: 3 }, { i: 13, j: 3 }, { i: 10, j: 1 }, { i: 15, j: 3 }, { i: 16, j: 3 }, { i: 3, j: 6 }, { i: 14, j: 1 }, { i: 1, j: 4 }, { i: 2, j: 4 }, { i: 7, j: 6 }, { i: 4, j: 4 }, { i: 5, j: 4 }, { i: 6, j: 4 }, { i: 7, j: 4 }, { i: 8, j: 4 }, { i: 9, j: 4 }, { i: 10, j: 4 }, { i: 11, j: 4 }, { i: 12, j: 4 }, { i: 13, j: 4 }, { i: 10, j: 2 }, { i: 15, j: 4 }, { i: 16, j: 4 }, { i: 3, j: 7 }, { i: 14, j: 2 }, { i: 1, j: 5 }, { i: 2, j: 5 }, { i: 7, j: 7 }, { i: 4, j: 5 }, { i: 5, j: 5 }, { i: 6, j: 5 }, { i: 11, j: 7 }, { i: 8, j: 5 }, { i: 9, j: 5 }, { i: 10, j: 5 }, { i: 11, j: 5 }, { i: 12, j: 5 }, { i: 13, j: 5 }, { i: 10, j: 3 }, { i: 15, j: 5 }, { i: 16, j: 5 }, { i: 3, j: 8 }, { i: 14, j: 3 }, { i: 1, j: 6 }, { i: 2, j: 6 }, { i: 7, j: 8 }, { i: 4, j: 6 }, { i: 5, j: 6 }, { i: 6, j: 6 }, { i: 11, j: 8 }, { i: 8, j: 6 }, { i: 9, j: 6 }, { i: 10, j: 6 }, { i: 11, j: 6 }, { i: 12, j: 6 }, { i: 13, j: 6 }, { i: 14, j: 6 }, { i: 15, j: 6 }, { i: 16, j: 6 }, { i: 12, j: 7 }, { i: 14, j: 4 }, { i: 1, j: 7 }, { i: 2, j: 7 }, { i: 16, j: 7 }, { i: 4, j: 7 }, { i: 5, j: 7 }, { i: 6, j: 7 }, { i: 2, j: 8 }, { i: 8, j: 7 }, { i: 9, j: 7 }, { i: 10, j: 7 }, { i: 6, j: 8 }, { i: 15, j: 8 }, { i: 13, j: 7 }, { i: 14, j: 7 }, { i: 15, j: 7 }, { i: 10, j: 8 }, { i: 12, j: 8 }, { i: 14, j: 5 }, { i: 1, j: 8 }, { i: 14, j: 8 }, { i: 16, j: 8 }, { i: 4, j: 8 }, { i: 5, j: 8 }, { i: 8, j: 8 }, { i: 9, j: 8 }, { i: 13, j: 8 },  ], css_id: 'tinytable_css_mhtkxmqgs5cy81h6b0zc',}, 
          { positions: [ { i: 17, j: 6 }, { i: 17, j: 3 }, { i: 17, j: 4 }, { i: 17, j: 1 }, { i: 17, j: 7 }, { i: 17, j: 0 }, { i: 17, j: 2 }, { i: 17, j: 5 }, { i: 17, j: 8 },  ], css_id: 'tinytable_css_hzkme6bbmvg2c6va2dz2',}, 
          { positions: [ { i: 0, j: 0 }, { i: 0, j: 3 }, { i: 0, j: 6 }, { i: 0, j: 8 }, { i: 0, j: 1 }, { i: 0, j: 7 }, { i: 0, j: 4 }, { i: 0, j: 5 }, { i: 0, j: 2 },  ], css_id: 'tinytable_css_4ii8f58hb6pqcxjc3e0h',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_q62hammv7yai46wplqd4(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_mhtkxmqgs5cy81h6b0zc, .table th.tinytable_css_mhtkxmqgs5cy81h6b0zc { text-align: left; }
      .table td.tinytable_css_hzkme6bbmvg2c6va2dz2, .table th.tinytable_css_hzkme6bbmvg2c6va2dz2 { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_4ii8f58hb6pqcxjc3e0h, .table th.tinytable_css_4ii8f58hb6pqcxjc3e0h { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_q62hammv7yai46wplqd4" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">Unique</th>
                <th scope="col">Missing Pct.</th>
                <th scope="col">Mean</th>
                <th scope="col">SD</th>
                <th scope="col">Min</th>
                <th scope="col">Median</th>
                <th scope="col">Max</th>
                <th scope="col">Histogram</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>percom_quallife</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.5</td>
                  <td>1.0</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idkwvoj66cjsf9axq3ho1w.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_safenbhd</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.6</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idf8pqad1vt8h9mxpqsxbp.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_appear</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.4</td>
                  <td>1.3</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id1g5f4hm14gwkj757klxq.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_image</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.4</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id1g1ngkxq127hhpp7ne23.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_qualserv</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.1</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idkbnkwgk4p6dwflw7c1v4.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_value</td>
                  <td>6</td>
                  <td>8</td>
                  <td>2.6</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idfjot4jmbhwonein17b5f.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_safecity</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.0</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idv1os5gj3q72b3eel7uu9.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_qualeduc</td>
                  <td>6</td>
                  <td>14</td>
                  <td>2.7</td>
                  <td>1.3</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idq7r2v6312pyzr30wj731.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>qualserv_police</td>
                  <td>6</td>
                  <td>8</td>
                  <td>2.8</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/iduaggjg68pcumoeia1xt2.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>qualserv_nbhd</td>
                  <td>6</td>
                  <td>11</td>
                  <td>3.1</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id3bsyq403qlpin0ytv8ui.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_relate</td>
                  <td>6</td>
                  <td>11</td>
                  <td>3.1</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idqoi0211l2nq4pf7qrlgg.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_effective</td>
                  <td>6</td>
                  <td>8</td>
                  <td>3.0</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idsh76irjwzojy5cczpgj3.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_traffic</td>
                  <td>6</td>
                  <td>8</td>
                  <td>3.0</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idy9bkkm5lqzc3676paogu.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_parking</td>
                  <td>6</td>
                  <td>12</td>
                  <td>3.2</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idcsdpa6bqmw4l67dpfcz0.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_quick</td>
                  <td>6</td>
                  <td>13</td>
                  <td>2.8</td>
                  <td>1.3</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id1a3hc8v4trfxp7bc7fhv.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_concerns</td>
                  <td>6</td>
                  <td>12</td>
                  <td>2.9</td>
                  <td>1.3</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id87chq5en1igsfevehyew.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_prevcrime</td>
                  <td>6</td>
                  <td>8</td>
                  <td>2.6</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idpcp2qbgy9wqbq3s67c0h.png" style="height: 1em;"></td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div style="height: 500px; overflow-y: auto; border: 1px solid #ddd; padding: 10px;">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>kc_ressurv_trim <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">zap_formats</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">zap_labels</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">zap_label</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(percom_new, qualserv_new, polserv_new) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datasummary_skim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_6vuonr948iwoyr9kijck(i, j, css_id) {
          var table = document.getElementById("tinytable_6vuonr948iwoyr9kijck");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_6vuonr948iwoyr9kijck');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_6vuonr948iwoyr9kijck(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_6vuonr948iwoyr9kijck");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 0, j: 0 }, { i: 0, j: 3 }, { i: 0, j: 6 }, { i: 0, j: 8 }, { i: 0, j: 1 }, { i: 0, j: 7 }, { i: 0, j: 4 }, { i: 0, j: 5 }, { i: 0, j: 2 },  ], css_id: 'tinytable_css_m4izh7kd66l70qlqvrnx',}, 
          { positions: [ { i: 17, j: 6 }, { i: 17, j: 3 }, { i: 17, j: 4 }, { i: 17, j: 1 }, { i: 17, j: 7 }, { i: 17, j: 0 }, { i: 17, j: 2 }, { i: 17, j: 5 }, { i: 17, j: 8 },  ], css_id: 'tinytable_css_bvpip59umcsdm3jzbnzb',}, 
          { positions: [ { i: 4, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 12, j: 0 }, { i: 13, j: 0 }, { i: 1, j: 0 }, { i: 3, j: 0 }, { i: 16, j: 0 }, { i: 3, j: 3 }, { i: 5, j: 0 }, { i: 7, j: 0 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 2, j: 0 }, { i: 11, j: 0 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 15, j: 0 }, { i: 11, j: 1 }, { i: 12, j: 1 }, { i: 13, j: 1 }, { i: 1, j: 1 }, { i: 15, j: 1 }, { i: 16, j: 1 }, { i: 3, j: 4 }, { i: 5, j: 1 }, { i: 1, j: 2 }, { i: 2, j: 2 }, { i: 3, j: 2 }, { i: 4, j: 2 }, { i: 5, j: 2 }, { i: 6, j: 2 }, { i: 7, j: 2 }, { i: 8, j: 2 }, { i: 9, j: 2 }, { i: 6, j: 0 }, { i: 11, j: 2 }, { i: 12, j: 2 }, { i: 13, j: 2 }, { i: 10, j: 0 }, { i: 15, j: 2 }, { i: 16, j: 2 }, { i: 3, j: 5 }, { i: 14, j: 0 }, { i: 1, j: 3 }, { i: 2, j: 3 }, { i: 7, j: 5 }, { i: 4, j: 3 }, { i: 5, j: 3 }, { i: 6, j: 3 }, { i: 7, j: 3 }, { i: 8, j: 3 }, { i: 9, j: 3 }, { i: 6, j: 1 }, { i: 11, j: 3 }, { i: 12, j: 3 }, { i: 13, j: 3 }, { i: 10, j: 1 }, { i: 15, j: 3 }, { i: 16, j: 3 }, { i: 3, j: 6 }, { i: 14, j: 1 }, { i: 1, j: 4 }, { i: 2, j: 4 }, { i: 7, j: 6 }, { i: 4, j: 4 }, { i: 5, j: 4 }, { i: 6, j: 4 }, { i: 7, j: 4 }, { i: 8, j: 4 }, { i: 9, j: 4 }, { i: 10, j: 4 }, { i: 11, j: 4 }, { i: 12, j: 4 }, { i: 13, j: 4 }, { i: 10, j: 2 }, { i: 15, j: 4 }, { i: 16, j: 4 }, { i: 3, j: 7 }, { i: 14, j: 2 }, { i: 1, j: 5 }, { i: 2, j: 5 }, { i: 7, j: 7 }, { i: 4, j: 5 }, { i: 5, j: 5 }, { i: 6, j: 5 }, { i: 11, j: 7 }, { i: 8, j: 5 }, { i: 9, j: 5 }, { i: 10, j: 5 }, { i: 11, j: 5 }, { i: 12, j: 5 }, { i: 13, j: 5 }, { i: 10, j: 3 }, { i: 15, j: 5 }, { i: 16, j: 5 }, { i: 3, j: 8 }, { i: 14, j: 3 }, { i: 1, j: 6 }, { i: 2, j: 6 }, { i: 7, j: 8 }, { i: 4, j: 6 }, { i: 5, j: 6 }, { i: 6, j: 6 }, { i: 11, j: 8 }, { i: 8, j: 6 }, { i: 9, j: 6 }, { i: 10, j: 6 }, { i: 11, j: 6 }, { i: 12, j: 6 }, { i: 13, j: 6 }, { i: 14, j: 6 }, { i: 15, j: 6 }, { i: 16, j: 6 }, { i: 12, j: 7 }, { i: 14, j: 4 }, { i: 1, j: 7 }, { i: 2, j: 7 }, { i: 16, j: 7 }, { i: 4, j: 7 }, { i: 5, j: 7 }, { i: 6, j: 7 }, { i: 2, j: 8 }, { i: 8, j: 7 }, { i: 9, j: 7 }, { i: 10, j: 7 }, { i: 6, j: 8 }, { i: 15, j: 8 }, { i: 13, j: 7 }, { i: 14, j: 7 }, { i: 15, j: 7 }, { i: 10, j: 8 }, { i: 12, j: 8 }, { i: 14, j: 5 }, { i: 1, j: 8 }, { i: 14, j: 8 }, { i: 16, j: 8 }, { i: 4, j: 8 }, { i: 5, j: 8 }, { i: 8, j: 8 }, { i: 9, j: 8 }, { i: 13, j: 8 },  ], css_id: 'tinytable_css_5dwt6m29thiz66dxi2qm',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_6vuonr948iwoyr9kijck(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_m4izh7kd66l70qlqvrnx, .table th.tinytable_css_m4izh7kd66l70qlqvrnx { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_bvpip59umcsdm3jzbnzb, .table th.tinytable_css_bvpip59umcsdm3jzbnzb { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_5dwt6m29thiz66dxi2qm, .table th.tinytable_css_5dwt6m29thiz66dxi2qm { text-align: left; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_6vuonr948iwoyr9kijck" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">Unique</th>
                <th scope="col">Missing Pct.</th>
                <th scope="col">Mean</th>
                <th scope="col">SD</th>
                <th scope="col">Min</th>
                <th scope="col">Median</th>
                <th scope="col">Max</th>
                <th scope="col">Histogram</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>percom_quallife</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.4</td>
                  <td>1.0</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idqvkysljq2kj94uyk4pbn.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_safenbhd</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.3</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idi0dya6en09zcivvjt1fe.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_appear</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.3</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id7tzvz2xuw75j8qp3w3wd.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_image</td>
                  <td>6</td>
                  <td>2</td>
                  <td>3.2</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id2erexso8doqxkaxfh3fl.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_qualserv</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.1</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idj2mbc7tqmu48entljjg8.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_value</td>
                  <td>6</td>
                  <td>2</td>
                  <td>2.6</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idflah8vkrbmvzdu5bkc6g.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_safecity</td>
                  <td>6</td>
                  <td>1</td>
                  <td>2.5</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>2.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id7noa9pnlvlnmy7dg3bf9.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>percom_qualeduc</td>
                  <td>6</td>
                  <td>17</td>
                  <td>2.4</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>2.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idl9q25vk9s5m3ubwr8x4a.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>qualserv_police</td>
                  <td>6</td>
                  <td>5</td>
                  <td>2.9</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idodvj56gr3o5d2avoj9cr.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>qualserv_nbhd</td>
                  <td>6</td>
                  <td>9</td>
                  <td>2.9</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idw1tp8ycud5makyk13yp3.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_relate</td>
                  <td>6</td>
                  <td>12</td>
                  <td>3.2</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idxtwjhv3y9j7u4z3uk7ff.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_effective</td>
                  <td>6</td>
                  <td>8</td>
                  <td>2.9</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idimhcm2gwxyggehezo2vs.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_traffic</td>
                  <td>6</td>
                  <td>7</td>
                  <td>2.6</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idwymepl4om187bb6ml1if.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_parking</td>
                  <td>6</td>
                  <td>21</td>
                  <td>3.0</td>
                  <td>1.0</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idbm9dey3o30v7bf1nw0jt.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_quick</td>
                  <td>6</td>
                  <td>21</td>
                  <td>2.7</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id0kaqoqbmssyez3msjbji.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_concerns</td>
                  <td>6</td>
                  <td>18</td>
                  <td>2.7</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idiop8ju3bqqa3u8a1l9vd.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>polserv_prevcrime</td>
                  <td>6</td>
                  <td>5</td>
                  <td>2.2</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>2.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idf73zaefo9pc37e19kvls.png" style="height: 1em;"></td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</div>
</div>
</div>
</div>
<p>A few things are apparent from the descriptives for the community survey above. First, residents’ perception of the community are generally positive, with averages above the neutral option (3) and medians of 4 for their perceptions of the overall quality of life in the city, safety of their neighborhood, physical appearance of their neighborhood, and overall image of the city. Residents’ perception of the quality of services provided by KCMO, value received for city tax dollars and fees, and overall feelings of safety were somewhat lower, with averages about at the neutral option or lower and medians of 3 (neutral). The lowest average was for residents perceived “value received for city tax dollars and fees.” It was similar for the two questions regarding their overall feelings of safety in their city and their rating of the “quality of police services” with averages and median values around the neutral option. In terms of the questions specifically about “police services,” these too were generally “neutral” in terms of average and median values. The lowest average was for the question asking residents satisfaction with “the city’s overall efforts to prevent crime” while the highest average value was for residents satisfaction with “parking enforcement services.”</p>
<p>The descriptive results for the fourth quarter resident survey from 2023-2024 are very similar to the community survey. Respondents generally had positive perceptions of the community with average scores above the neutral option for their perceptions of the overall quality of life in the city, safety of their neighborhood, physical appearance of their neighborhood, overall image of the city, and quality of services provided by KCMO. Respondents also generally averaged lower values on value received for city tax dollars and fees, overall feelings of safety, and quality of education. Respondents to the community survey were, on average, more positive about the city than respondents in the resident survey. Results were also similar for the two questions regarding perceptions of the overall quality of neighborhood services and police services with averages at the “neutral” answer category (3). In terms of the questions specifically about “police services,” these too were similar to the community survey but with slightly lower averages. The biggest differences are found between the respondents satisfaction with police “enforcement of local traffic laws” and “the city’s overall efforts to prevent crime.”</p>
<p>Below we will compare the distributions directly, but before doing so, it’s important to recognize the higher missing data rates for the community survey, particularly for some police services questions (e.g., “Parking enforcement services”, “How quickly police respond”, and “Responsiveness to resident concerns”). The relatively large amounts of missing data may influence some of the distributional differences described below.</p>
</section>
<section id="sec-kcrs-plot" class="level3" data-number="7.0.4">
<h3 data-number="7.0.4" class="anchored" data-anchor-id="sec-kcrs-plot"><span class="header-section-number">7.0.4</span> KC Resident Survey Plots</h3>
<p>You can get a sense of the similarities and differences across the community and resident survey by looking at the descriptive statistics above, but visualizing their distributions has the potential to be more informative. To do this we will need to produce 17 bar charts with the values of each answer category across the two surveys plotted side-by-side. To make this process as streamlined as possible, we first combine the two data sets with an indicator variable for the survey each observation is associated with.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>kc_comres_merge <span class="ot">&lt;-</span> kc_combsurv_ressurv <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, percom_new, qualserv_new, polserv_new) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="st">"Community Survey (n = 385)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(kc_ressurv_trim <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(ID, percom_new, qualserv_new, polserv_new) <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">data =</span> <span class="st">"Resident Survey (n = 954)"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_fact =</span> <span class="fu">factor</span>(data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Function for creating a bar plot:</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>basic_dodgebar <span class="ot">&lt;-</span> <span class="cf">function</span>(data, </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                           var_name, </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                           fill_var,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">fill_colors =</span> <span class="fu">c</span>(<span class="st">"#0D0887FF"</span>, <span class="st">"#F0F921FF"</span>),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">title =</span> <span class="cn">NULL</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>                           <span class="at">subtitle =</span> <span class="cn">NULL</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                           <span class="at">xlab =</span> <span class="cn">NULL</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                           <span class="at">ylab =</span> <span class="cn">NULL</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                           <span class="at">fill_lab =</span> <span class="cn">NULL</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">x_label_angle =</span> <span class="dv">0</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>                           <span class="at">x_label_hjust =</span> <span class="dv">0</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                           <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                           <span class="at">legend_pos =</span> <span class="st">"bottom"</span>) {</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>plot_object <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(.data[[var_name]])) <span class="sc">%&gt;%</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[var_name]], <span class="at">fill =</span> .data[[fill_var]]), <span class="at">group =</span> .data[[fill_var]]) <span class="sc">+</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(prop)), <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> y_axis_limits) <span class="sc">+</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> fill_colors) <span class="sc">+</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> ylab,</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> xlab,</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> fill_lab,</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> title,</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> subtitle</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> x_label_angle, <span class="at">hjust =</span> x_label_hjust),</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> legend_pos,</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(plot_object)</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>general_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(percom_new, <span class="st">"qualserv_nbhd"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>general_titles <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Overall quality of life in city"</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Feeling of safety in neighborhood"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Physical appearance of neighborhood"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Overall image of city"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Quality of services by KCMO"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Value received for city tax dollars"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Overall feeling of safety in city"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Overall quality of education"</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Quality of neighborhood services"</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>police_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"qualserv_police"</span>, polserv_new)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>police_titles <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Quality of police services"</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Relationship btw. neighborhood &amp; police"</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Effectiveness of police protection"</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Enforcement of traffic laws"</span>,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Parking enforcement services"</span>,</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"How quickly police respond"</span>,</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Responsiveness to resident concerns"</span>,</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"City's overall efforts to prevent crime"</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>all_vars <span class="ot">=</span> <span class="fu">c</span>(general_vars, police_vars)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>all_titles <span class="ot">=</span> <span class="fu">c</span>(general_titles, police_titles)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>general_plots <span class="ot">&lt;-</span> <span class="fu">map2</span>(general_vars, general_titles, <span class="sc">~</span><span class="fu">basic_dodgebar</span>(</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_merge,</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_name =</span> .x,</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="st">"data"</span>,</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_lab =</span> <span class="st">"Data"</span>,</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> .y</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>police_plots <span class="ot">&lt;-</span> <span class="fu">map2</span>(police_vars, police_titles, <span class="sc">~</span><span class="fu">basic_dodgebar</span>(</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_merge,</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_name =</span> .x,</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="st">"data"</span>,</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_lab =</span> <span class="st">"Data"</span>,</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> .y</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>all_plots <span class="ot">&lt;-</span> <span class="fu">map2</span>(all_vars, all_titles, <span class="sc">~</span><span class="fu">basic_dodgebar</span>(</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_merge,</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_name =</span> .x,</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="st">"data"</span>,</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_lab =</span> <span class="st">"Data"</span>,</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> .y</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">General Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Policing Questions</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wrap_plots</span>(general_plots, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">axes =</span> <span class="st">"collect"</span>, <span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Resident Survey Comparison - General Questions"</span>) <span class="sc">&amp;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>)) <span class="sc">&amp;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-13-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="864"></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wrap_plots</span>(police_plots, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">axes =</span> <span class="st">"collect"</span>, <span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Resident Survey Comparison - Policing Questions"</span>) <span class="sc">&amp;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>)) <span class="sc">&amp;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-14-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="864"></a></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The plots above suggests that community survey respondents often reported higher satisfaction with quality of life and city image than resident survey respondents. The results were more similar between surveys across the questions dealing with policing. For example, “Quality of police services”, “Relationship between neighborhood &amp; police”, “Effectiveness of police protection”, and “How quickly police respond” questions show remarkably similar distributions across the two surveys. There do appear to be some difference in attitudes toward traffic enforcement. The “Enforcement of traffic laws” question shows community survey respondents slightly more satisfied than resident survey respondents (more category 4 responses) and the “Parking enforcement services” question shows resident survey with notably more category 3 responses, while community survey respondents answer in category 4 and 5 more. The “City’s overall efforts to prevent crime” question shows both samples concentrated in middle categories, but with community survey showing slightly more category 3 responses and resident survey more category 1 and 2 responses. This pattern reinforces the broader finding in the charts above. While both samples show moderate satisfaction overall, the resident survey respondents are somewhat more critical of the city’s crime prevention efforts, rating them in the lower categories more frequently than community survey respondents.</p>
</section>
<section id="sec-kcrs-ineq" class="level3" data-number="7.0.5">
<h3 data-number="7.0.5" class="anchored" data-anchor-id="sec-kcrs-ineq"><span class="header-section-number">7.0.5</span> Sampling Disparities: KC Resident vs Community Surveys</h3>
<p>The resident survey data includes two geography variables – <code>block_lon</code> and <code>block_lat</code>. These presumably refer to the longitude and latitude of the general location from where each observation resides. We should be able to connect these individual locations to the neighborhood using the “<a href="https://r-spatial.github.io/sf/">sf</a>” package. This will first require some additional data wrangling with the resident survey data (e.g., scaling the longitude and latitude variables to align with specific geographic coordinate system).</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load crime rate data</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>kcmo_crimerate_sf <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">here</span>(<span class="st">"Data"</span>, <span class="st">"kcmo_crimerate_sf.rds"</span>))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Scale resident survey geography indicators </span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>kc_ressurv_trimgeo <span class="ot">&lt;-</span> kc_ressurv_trim <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">block_lon_scale =</span> block_lon<span class="sc">/</span><span class="dv">1000000</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">block_lat_scale =</span> block_lat<span class="sc">/</span><span class="dv">1000000</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert resident geography data to sf</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>kc_ressurv_trimgeo_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(kc_ressurv_trimgeo, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"block_lon_scale"</span>, <span class="st">"block_lat_scale"</span>), <span class="at">crs =</span> <span class="dv">4326</span>) </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Check validity of geometry</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co"># st_is_valid(kc_ressurv_trimgeo_sf, reason = TRUE)</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># st_is_valid(kcmo_crimerate_sf, reason = TRUE)</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Repair invalid geometry</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>kcmo_crimerate_sf <span class="ot">&lt;-</span> <span class="fu">st_make_valid</span>(kcmo_crimerate_sf)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co"># st_is_valid(kcmo_crimerate_sf_valid, reason = TRUE)</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="co">#Join neighborhood and ressurv data by geography</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>kcmo_ressurv_crimegeo <span class="ot">&lt;-</span> <span class="fu">st_join</span>(kc_ressurv_trimgeo_sf, kcmo_crimerate_sf, <span class="at">join =</span> st_within)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>One of the first things we want to examine in the resident survey is how many respondents resided in the 40 neighborhoods included in the community survey. Also of particular interest is how many respondents from the 10 “high crime” neighborhoods responded. One of the goals of the community survey and its design (e.g., using community members as interviewers) was to increase participation from individuals that may be less likely to respond to more traditional surveys like the KC Resident Survey.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Resident Survey</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Community Survey</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>kcmo_ressurv_crimegeo <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(sample_fact) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> <span class="fu">round</span>(percent <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">valid_percent =</span> <span class="fu">round</span>(valid_percent <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">sample_factgeometry =</span> <span class="st">"Neighbhorhood Sample"</span>,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">percent =</span> <span class="st">"%"</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">valid_percent =</span> <span class="st">"Valid %"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Resident Survey Responses"</span>, </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"by Community Survey Neighborhood Sample"</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="xekxyjriol" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xekxyjriol table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xekxyjriol thead, #xekxyjriol tbody, #xekxyjriol tfoot, #xekxyjriol tr, #xekxyjriol td, #xekxyjriol th {
  border-style: none;
}

#xekxyjriol p {
  margin: 0;
  padding: 0;
}

#xekxyjriol .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xekxyjriol .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xekxyjriol .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xekxyjriol .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xekxyjriol .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xekxyjriol .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xekxyjriol .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xekxyjriol .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xekxyjriol .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xekxyjriol .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xekxyjriol .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xekxyjriol .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xekxyjriol .gt_spanner_row {
  border-bottom-style: hidden;
}

#xekxyjriol .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xekxyjriol .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xekxyjriol .gt_from_md > :first-child {
  margin-top: 0;
}

#xekxyjriol .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xekxyjriol .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xekxyjriol .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xekxyjriol .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xekxyjriol .gt_row_group_first td {
  border-top-width: 2px;
}

#xekxyjriol .gt_row_group_first th {
  border-top-width: 2px;
}

#xekxyjriol .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xekxyjriol .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xekxyjriol .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xekxyjriol .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xekxyjriol .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xekxyjriol .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xekxyjriol .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xekxyjriol .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xekxyjriol .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xekxyjriol .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xekxyjriol .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xekxyjriol .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xekxyjriol .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xekxyjriol .gt_left {
  text-align: left;
}

#xekxyjriol .gt_center {
  text-align: center;
}

#xekxyjriol .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xekxyjriol .gt_font_normal {
  font-weight: normal;
}

#xekxyjriol .gt_font_bold {
  font-weight: bold;
}

#xekxyjriol .gt_font_italic {
  font-style: italic;
}

#xekxyjriol .gt_super {
  font-size: 65%;
}

#xekxyjriol .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xekxyjriol .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xekxyjriol .gt_indent_1 {
  text-indent: 5px;
}

#xekxyjriol .gt_indent_2 {
  text-indent: 10px;
}

#xekxyjriol .gt_indent_3 {
  text-indent: 15px;
}

#xekxyjriol .gt_indent_4 {
  text-indent: 20px;
}

#xekxyjriol .gt_indent_5 {
  text-indent: 25px;
}

#xekxyjriol .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#xekxyjriol div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal">Resident Survey Responses</th>
</tr>
<tr class="odd gt_heading">
<th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">by Community Survey Neighborhood Sample</th>
</tr>
<tr class="header gt_col_headings">
<th id="sample_factgeometry" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Neighbhorhood Sample</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
<th id="percent" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="valid_percent" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Valid %</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="sample_factgeometry">Not Sampled</td>
<td class="gt_row gt_right" headers="n">692</td>
<td class="gt_row gt_right" headers="percent">72.54</td>
<td class="gt_row gt_right" headers="valid_percent">72.69</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="sample_factgeometry">Random Sample</td>
<td class="gt_row gt_right" headers="n">243</td>
<td class="gt_row gt_right" headers="percent">25.47</td>
<td class="gt_row gt_right" headers="valid_percent">25.53</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="sample_factgeometry">High Crime Sample</td>
<td class="gt_row gt_right" headers="n">17</td>
<td class="gt_row gt_right" headers="percent">1.78</td>
<td class="gt_row gt_right" headers="valid_percent">1.79</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="sample_factgeometry">NA</td>
<td class="gt_row gt_right" headers="n">2</td>
<td class="gt_row gt_right" headers="percent">0.21</td>
<td class="gt_row gt_right" headers="valid_percent">NA</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>kc_combsurv_ressurv_geo  <span class="ot">&lt;-</span> kc_combsurv_ressurv <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(kc_combsurv_geoid) </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>kc_combsurv_ressurv_geo <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(sample_fact) <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sample_fact <span class="sc">!=</span> <span class="st">"Not Sampled"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> <span class="fu">round</span>(percent <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">valid_percent =</span> <span class="fu">round</span>(valid_percent <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">sample_fact =</span> <span class="st">"Neighbhorhood Sample"</span>,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">percent =</span> <span class="st">"%"</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">valid_percent =</span> <span class="st">"Valid %"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Community Survey Responses"</span>, </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"by Community Survey Neighborhood Sample"</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="nhnznpkdlk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nhnznpkdlk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nhnznpkdlk thead, #nhnznpkdlk tbody, #nhnznpkdlk tfoot, #nhnznpkdlk tr, #nhnznpkdlk td, #nhnznpkdlk th {
  border-style: none;
}

#nhnznpkdlk p {
  margin: 0;
  padding: 0;
}

#nhnznpkdlk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nhnznpkdlk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nhnznpkdlk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nhnznpkdlk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nhnznpkdlk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nhnznpkdlk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nhnznpkdlk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nhnznpkdlk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nhnznpkdlk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nhnznpkdlk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nhnznpkdlk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nhnznpkdlk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nhnznpkdlk .gt_spanner_row {
  border-bottom-style: hidden;
}

#nhnznpkdlk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nhnznpkdlk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nhnznpkdlk .gt_from_md > :first-child {
  margin-top: 0;
}

#nhnznpkdlk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nhnznpkdlk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nhnznpkdlk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nhnznpkdlk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nhnznpkdlk .gt_row_group_first td {
  border-top-width: 2px;
}

#nhnznpkdlk .gt_row_group_first th {
  border-top-width: 2px;
}

#nhnznpkdlk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nhnznpkdlk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nhnznpkdlk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nhnznpkdlk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nhnznpkdlk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nhnznpkdlk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nhnznpkdlk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nhnznpkdlk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nhnznpkdlk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nhnznpkdlk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nhnznpkdlk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nhnznpkdlk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nhnznpkdlk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nhnznpkdlk .gt_left {
  text-align: left;
}

#nhnznpkdlk .gt_center {
  text-align: center;
}

#nhnznpkdlk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nhnznpkdlk .gt_font_normal {
  font-weight: normal;
}

#nhnznpkdlk .gt_font_bold {
  font-weight: bold;
}

#nhnznpkdlk .gt_font_italic {
  font-style: italic;
}

#nhnznpkdlk .gt_super {
  font-size: 65%;
}

#nhnznpkdlk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nhnznpkdlk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nhnznpkdlk .gt_indent_1 {
  text-indent: 5px;
}

#nhnznpkdlk .gt_indent_2 {
  text-indent: 10px;
}

#nhnznpkdlk .gt_indent_3 {
  text-indent: 15px;
}

#nhnznpkdlk .gt_indent_4 {
  text-indent: 20px;
}

#nhnznpkdlk .gt_indent_5 {
  text-indent: 25px;
}

#nhnznpkdlk .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#nhnznpkdlk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal">Community Survey Responses</th>
</tr>
<tr class="odd gt_heading">
<th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">by Community Survey Neighborhood Sample</th>
</tr>
<tr class="header gt_col_headings">
<th id="sample_fact" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Neighbhorhood Sample</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
<th id="percent" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="valid_percent" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Valid %</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="sample_fact">Random Sample</td>
<td class="gt_row gt_right" headers="n">284</td>
<td class="gt_row gt_right" headers="percent">73.77</td>
<td class="gt_row gt_right" headers="valid_percent">76.34</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="sample_fact">High Crime Sample</td>
<td class="gt_row gt_right" headers="n">88</td>
<td class="gt_row gt_right" headers="percent">22.86</td>
<td class="gt_row gt_right" headers="valid_percent">23.66</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
</div>
<p>As evident in the simple tables above, 17 total responses for the resident survey came from the “high crime” neighborhoods whereas about a quarter of the respondents are located in the randomly sampled neighborhoods from the community survey. Compare this to the Community survey where 88 total respondents (~ 23% of respondents) were from the “high crime” neighborhoods.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>What can these numbers tell us about our community engaged research design? Let’s dig in a little further.</p>
<section id="sampling-disparities-in-traditional-survey-methods" class="level4" data-number="7.0.5.1">
<h4 data-number="7.0.5.1" class="anchored" data-anchor-id="sampling-disparities-in-traditional-survey-methods"><span class="header-section-number">7.0.5.1</span> Sampling Disparities in Traditional Survey Methods</h4>
<p>Of the n=900 total participants in this KC Resident’s Survey quarterly sample, 260 were residents of the 40 neighborhoods in the community survey study. Recall, we classified 10 of these 40 neighborhoods as “high-crime” based on violent crime rates for purposes of stratified random sampling, while 30 were classified as “non-high-crime” sampling strata.</p>
<p>Given this, the sampling patterns show a stark disparity in representation in the KC Resident Survey’s geographic distribution across neighborhood types.</p>
<p><strong>KC Resident Survey sampling rates by neighborhood type:</strong></p>
<ul>
<li><em>High-crime neighborhoods</em>: 17 residents across 10 neighborhoods = 1.7 residents per neighborhood (0.65% of total sample per neighborhood)</li>
<li><em>Non-high-crime neighborhoods</em>: 243 residents across 30 neighborhoods = 8.1 residents per neighborhood (3.12% of total sample per neighborhood)</li>
</ul>
<p>This represents a 4.8-fold sampling disparity (3.12/0.65 = 4.8), with residents from non-high-crime neighborhoods being nearly five times more likely to participate than residents from high-crime neighborhoods. This pattern is consistent with well-documented challenges in survey research, where communities facing socioeconomic disadvantages, safety concerns, or institutional distrust typically experience lower response rates.</p>
<p><strong>Community Survey sampling rates by neighborhood type:</strong></p>
<ul>
<li><em>High-crime neighborhoods</em>: 88 residents across 10 neighborhoods = 8.8 residents per neighborhood (2.37% of total sample per neighborhood)</li>
<li><em>Non-high-crime neighborhoods</em>: 284 residents across 30 neighborhoods = 9.5 residents per neighborhood (2.55% of total sample per neighborhood)</li>
</ul>
<p>The community-engaged methodology demonstrates a markedly different sampling pattern that approaches geographic equity. Specifically, the community-engaged approach reduced the sampling disparity to just 1.08-fold, essentially achieving near-parity in representation. This represents a dramatic improvement in sampling equity, transforming a nearly 5-to-1 disparity into virtual equality.</p>
</section>
<section id="implications-for-research-validity-and-community-voice" class="level4" data-number="7.0.5.2">
<h4 data-number="7.0.5.2" class="anchored" data-anchor-id="implications-for-research-validity-and-community-voice"><span class="header-section-number">7.0.5.2</span> Implications for Research Validity and Community Voice</h4>
<p>This improvement in geographic representation has important implications for both research validity and democratic participation in municipal research. Traditional survey methods may systematically underrepresent the experiences and perspectives of residents from high-crime neighborhoods, which are precisely the communities most affected by public safety policies and urban challenges.</p>
<p>As desired from the outset, the community-engaged approach’s success in achieving equitable representation suggests that methodological choices significantly impact whose voices are included in research. By training community members as interviewers and building trust through authentic community engagement, the methodology might overcome barriers that limit participation in traditional surveys.</p>
<p><strong>Comparative sampling effectiveness:</strong></p>
<ul>
<li>Absolute improvement: 88 vs 17 residents from high-crime neighborhoods (5.2x more participants)</li>
<li>Relative probability improvement: 3.5x higher likelihood of participation for high-crime neighborhood residents (.0237/.0065 = 3.6)</li>
<li>Equity improvement: 4.8-fold disparity reduced to 1.08-fold disparity</li>
</ul>
</section>
<section id="quantifying-sampling-disparities-dissimilarity-index" class="level4" data-number="7.0.5.3">
<h4 data-number="7.0.5.3" class="anchored" data-anchor-id="quantifying-sampling-disparities-dissimilarity-index"><span class="header-section-number">7.0.5.3</span> Quantifying sampling disparities: Dissimilarity index</h4>
<p>The above figures are probably sufficient for most readers. Yet, bear with us as we get a bit more technical. Social scientists often rely on particular metrics for quantifying varying degrees of inequality (e.g., Gini coefficients; coefficient of variation). One of those is the “dissimilarity index,” which is commonly used to measure segregation and unequal distribution, and it has a pretty intuitive interpretation.</p>
<p><em>Dissimilarity Index Calculation:</em> Formula: D = (1/2) × Σ|Pi - Qi|</p>
<p>Where:</p>
<ul>
<li>Pi = proportion of total sample from group i</li>
<li>Qi = proportion that group i “should” have under equal distribution</li>
</ul>
<p><strong>KC Resident Survey:</strong></p>
<ul>
<li>High-crime neighborhoods: Should be 10/40 = 25% of community survey subsample, actually 6.5% (17 / 260 = 0.065)</li>
<li>Non-high-crime: Should be 30/40 = 75% of sample, actually 93.5%</li>
<li>D = 0.5 × (|6.5-25| + |93.5-75|) = 0.5 × (18.5 + 18.5) = 18.5</li>
</ul>
<p><strong>Community Survey:</strong></p>
<ul>
<li>High-crime: Should be 25%, actually 23.7%</li>
<li>Non-high-crime: Should be 75%, actually 76.3%</li>
<li>D = 0.5 × (|23.7-25| + |76.3-75|) = 0.5 × (1.3 + 1.3) = 1.3</li>
</ul>
<p><strong>Interpretation:</strong></p>
<ul>
<li>The index means 18.5% of the Resident sample and 1.3% of the Community sample would need to be redistributed to achieve perfect geographic proportionality</li>
<li>Dissimilarity reduced from 18.5 to 1.3 using community-engaged methods</li>
<li>93% reduction in geographic inequality (1 - 1.3/18.5 = 0.93)</li>
</ul>
<p><strong>Conclusion:</strong></p>
<p>This near-elimination of geographic sampling bias provides a more representative foundation for understanding neighborhood social processes and ensures that policy-relevant research reflects the experiences of all community members, not just those most easily reached through conventional methods.</p>
</section>
</section>
<section id="sec-kcrs-compare" class="level3" data-number="7.0.6">
<h3 data-number="7.0.6" class="anchored" data-anchor-id="sec-kcrs-compare"><span class="header-section-number">7.0.6</span> Comparing Survey Results from Same Neighborhoods</h3>
<p>Another thing we can do is use this information to provide a more direct comparison of the results from the community survey to the resident survey. Specifically, we can compare the community survey distribution on resident survey variables to the resident survey respondents who resided in the neighborhoods sampled in the community survey.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>kc_comres_mergetri <span class="ot">&lt;-</span> kc_combsurv_ressurv <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, percom_new, qualserv_new, polserv_new) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="st">"Community Survey (n = 385)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(kc_ressurv_trim <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(ID, percom_new, qualserv_new, polserv_new) <span class="sc">%&gt;%</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">data =</span> <span class="st">"Resident Survey (n = 954)"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(<span class="fu">as_tibble</span>(kcmo_ressurv_crimegeo) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(sample <span class="sc">&gt;=</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(ID, general_vars, police_vars) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">data =</span> <span class="st">"Resident Survey - Community Survey Neigh. (n = 252)"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_fact =</span> <span class="fu">factor</span>(data,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>                            <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Community Survey (n = 385)"</span>,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Resident Survey (n = 954)"</span>,</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Resident Survey - Community Survey Neigh. (n = 252)"</span>))</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>kc_comres_comsamp <span class="ot">&lt;-</span> kc_comres_mergetri <span class="sc">%&gt;%</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(data <span class="sc">!=</span> <span class="st">"Resident Survey (n = 954)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="height: 500px; overflow-y: auto; border: 1px solid #ddd; padding: 10px;">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>name_mapping <span class="ot">&lt;-</span> <span class="fu">setNames</span>(all_vars, all_titles)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>kc_comres_mergetri <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">zap_formats</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">zap_labels</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">zap_label</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">all_of</span>(name_mapping), data_fact) <span class="sc">%&gt;%</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(data_fact) <span class="sc">%&gt;%</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  modelsummary<span class="sc">::</span><span class="fu">datasummary_skim</span>(<span class="at">by =</span> <span class="st">"data_fact"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_lbrgt0qtn9io94orxkku(i, j, css_id) {
          var table = document.getElementById("tinytable_lbrgt0qtn9io94orxkku");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_lbrgt0qtn9io94orxkku');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_lbrgt0qtn9io94orxkku(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_lbrgt0qtn9io94orxkku");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 52, j: 0 }, { i: 52, j: 3 }, { i: 52, j: 1 }, { i: 52, j: 4 }, { i: 52, j: 7 }, { i: 52, j: 2 }, { i: 52, j: 5 }, { i: 52, j: 8 }, { i: 52, j: 6 }, { i: 52, j: 9 },  ], css_id: 'tinytable_css_w3t1ozu2tye5reacnfer',}, 
          { positions: [ { i: 0, j: 0 }, { i: 0, j: 3 }, { i: 0, j: 2 }, { i: 0, j: 1 }, { i: 0, j: 4 }, { i: 0, j: 7 }, { i: 0, j: 6 }, { i: 0, j: 5 }, { i: 0, j: 8 }, { i: 0, j: 9 },  ], css_id: 'tinytable_css_es5752ywgi0msz1dmzem',}, 
          { positions: [ { i: 55, j: 0 }, { i: 55, j: 1 }, { i: 55, j: 4 }, { i: 55, j: 3 }, { i: 55, j: 2 }, { i: 55, j: 5 }, { i: 55, j: 8 }, { i: 55, j: 7 }, { i: 55, j: 6 }, { i: 55, j: 9 },  ], css_id: 'tinytable_css_6f2qj1obh5nuz4umqvne',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_lbrgt0qtn9io94orxkku(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_w3t1ozu2tye5reacnfer, .table th.tinytable_css_w3t1ozu2tye5reacnfer { border-top: solid black 0.1em; }
      .table td.tinytable_css_es5752ywgi0msz1dmzem, .table th.tinytable_css_es5752ywgi0msz1dmzem { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_6f2qj1obh5nuz4umqvne, .table th.tinytable_css_6f2qj1obh5nuz4umqvne { border-bottom: solid #d3d8dc 0.1em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_lbrgt0qtn9io94orxkku" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">data_fact</th>
                <th scope="col">Unique</th>
                <th scope="col">Missing Pct.</th>
                <th scope="col">Mean</th>
                <th scope="col">SD</th>
                <th scope="col">Min</th>
                <th scope="col">Median</th>
                <th scope="col">Max</th>
                <th scope="col">Histogram</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>Overall quality of life in city</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.5</td>
                  <td>1.0</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id4cl36qlpspohyjkl6mkx.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.4</td>
                  <td>1.0</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idbv050n29xw2j2hiqogit.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.4</td>
                  <td>1.0</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idmlrf74ecpjwmmae9hdlr.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Feeling of safety in neighborhood</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.6</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idf6bm78sca8q8bkobojfl.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.3</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idtddh7pwd8f4xfwj9nrf9.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>0</td>
                  <td>3.4</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idtjk8rsuhy9oxej7k7mk3.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Physical appearance of neighborhood</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.4</td>
                  <td>1.3</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/ida9iucymodjzjci2hqle2.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.3</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idd2n3rh5keqh6spprz59y.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.5</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idp0e8jr8da70imj1zjczq.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Overall image of city</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.4</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>4.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id5y81ri68lhl1nww8h7tp.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>2</td>
                  <td>3.2</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/ideibviebpne48ywy9sdv7.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.2</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idlqo31i9zui1nzjb09aqr.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Quality of services by KCMO</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.1</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idzzzlrdrqb6yzx840nslz.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.1</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idik7co8m71oprg60834lm.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>3.1</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idx5437r7g7bezzbvdhc5q.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Value received for city tax dollars</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>8</td>
                  <td>2.6</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id1bjssit69kwqh93czyib.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>2</td>
                  <td>2.6</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id8nsgsc8nz9elxjklb5mn.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>2</td>
                  <td>2.6</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idzw61occ4mr3i9p0fwdhe.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Overall feeling of safety in city</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>5</td>
                  <td>3.0</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idy3uj4t7egv4gvc3o72lg.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>2.5</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>2.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id0a3rd2f7bmc2f2s9ev8n.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>1</td>
                  <td>2.5</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>2.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idqzx4do3bld8j4f6mmrl7.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Overall quality of education</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>14</td>
                  <td>2.7</td>
                  <td>1.3</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id2fidcgmleizr7odtihey.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>17</td>
                  <td>2.4</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>2.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idvlpbm338i8nx32hzidre.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>16</td>
                  <td>2.6</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/ide25r23xhiqvx6kksoxmv.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Quality of neighborhood services</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>11</td>
                  <td>3.1</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id2f4otbw4kebzuqq1h5n0.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>9</td>
                  <td>2.9</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idh2v9o6f01nlzpi9gzs01.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>7</td>
                  <td>2.9</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idbm3n24cxmpoz1m5xm7a3.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Quality of police services</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>8</td>
                  <td>2.8</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idpft0gaih83ay535ym8ob.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>5</td>
                  <td>2.9</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id6ydv6nci6s3blahxcahs.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>3</td>
                  <td>3.1</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idop4ac50rdjzvzclwi2so.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Relationship btw. neighborhood &amp; police</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>11</td>
                  <td>3.1</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id5h8ofbul62w93yqzdhwb.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>12</td>
                  <td>3.2</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/ida13n9kuelhrku94om0e9.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>12</td>
                  <td>3.3</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idfkwniv9bl3wifpybgm9i.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Effectiveness of police protection</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>8</td>
                  <td>3.0</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id8wxq39crl3tbhradgby6.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>8</td>
                  <td>2.9</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/iddxtr5pqilln5fv2j678n.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>8</td>
                  <td>3.1</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idbax2ntqfpchlj1kn00v3.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Enforcement of traffic laws</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>8</td>
                  <td>3.0</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idxidco4lzxtt70yn45my3.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>7</td>
                  <td>2.6</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/iduivvfj31zoa8hjhio21o.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>6</td>
                  <td>2.8</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idsllh0fgt6qk8xufdj5jm.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Parking enforcement services</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>12</td>
                  <td>3.2</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id2qikkekdbqlvjhtx9emb.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>21</td>
                  <td>3.0</td>
                  <td>1.0</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id8ac66j46v0mhp5geg69x.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>24</td>
                  <td>3.1</td>
                  <td>1.0</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idbyic0d5ehewgpp0tt2e0.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>How quickly police respond</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>13</td>
                  <td>2.8</td>
                  <td>1.3</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idkv6agt1e5tyfiwsi67d8.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>21</td>
                  <td>2.7</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/iduzag6nkyrc2lrlksyfyt.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>22</td>
                  <td>2.8</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idppforjb0jfw75ariwkjh.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>Responsiveness to resident concerns</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>12</td>
                  <td>2.9</td>
                  <td>1.3</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idq8s8nocfncg348nqlcwb.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>18</td>
                  <td>2.7</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idgmrqj3ur0xk9vuv3mrtd.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>17</td>
                  <td>2.9</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id8rf77l7e1kbvk7avuibc.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>City's overall efforts to prevent crime</td>
                  <td>Community Survey (n = 385)</td>
                  <td>6</td>
                  <td>8</td>
                  <td>2.6</td>
                  <td>1.2</td>
                  <td>1.0</td>
                  <td>3.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/idfkh7m1e34wzeu1n3rogu.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey (n = 954)</td>
                  <td>6</td>
                  <td>5</td>
                  <td>2.2</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>2.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/ideoclc3dwsytobhc0x8gw.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td></td>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>6</td>
                  <td>6</td>
                  <td>2.3</td>
                  <td>1.1</td>
                  <td>1.0</td>
                  <td>2.0</td>
                  <td>5.0</td>
                  <td><img src="./tinytable_assets/id8237u5ktknsoh72lwbvv.png" style="height: 1em;"></td>
                </tr>
                <tr>
                  <td>data_fact</td>
                  <td>N</td>
                  <td>%</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Community Survey (n = 385)</td>
                  <td>385</td>
                  <td>24.1</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Resident Survey (n = 954)</td>
                  <td>954</td>
                  <td>59.7</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Resident Survey - Community Survey Neigh. (n = 252)</td>
                  <td>260</td>
                  <td>16.3</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</div>
<p><br> The table above shows the descriptives by each sample (or subsample). The three (sub)samples show very similar community sentiment. Most variables show means within 0.1-0.3 points of each other. Where there are (small) differences, the community survey tends to show higher (more positive) mean values.</p>
<p>We can also plot these differences similar to what we did with the full resident survey sample above.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>general_triplots <span class="ot">&lt;-</span> <span class="fu">map2</span>(general_vars, general_titles, <span class="sc">~</span><span class="fu">basic_dodgebar</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_mergetri,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_name =</span> .x,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="st">"data_fact"</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_lab =</span> <span class="st">"Data"</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_colors =</span> <span class="fu">c</span>(<span class="st">"#0D0887FF"</span>, <span class="st">"#F0F921FF"</span>, <span class="st">"#CC4678FF"</span>),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> .y</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>police_triplots <span class="ot">&lt;-</span> <span class="fu">map2</span>(police_vars, police_titles, <span class="sc">~</span><span class="fu">basic_dodgebar</span>(</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_mergetri,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_name =</span> .x,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="st">"data_fact"</span>,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_lab =</span> <span class="st">"Data"</span>,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_colors =</span> <span class="fu">c</span>(<span class="st">"#0D0887FF"</span>, <span class="st">"#F0F921FF"</span>, <span class="st">"#CC4678FF"</span>),</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> .y</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>all_triplots <span class="ot">&lt;-</span> <span class="fu">map2</span>(all_vars, all_titles, <span class="sc">~</span><span class="fu">basic_dodgebar</span>(</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_mergetri,</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_name =</span> .x,</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="st">"data_fact"</span>,</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_lab =</span> <span class="st">"Data"</span>,</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_colors =</span> <span class="fu">c</span>(<span class="st">"#0D0887FF"</span>, <span class="st">"#F0F921FF"</span>, <span class="st">"#CC4678FF"</span>),</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> .y</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">General Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Policing Questions</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wrap_plots</span>(general_triplots, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">axes =</span> <span class="st">"collect"</span>, <span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Resident Survey Comparison - General Questions"</span>) <span class="sc">&amp;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>)) <span class="sc">&amp;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-21-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="864"></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wrap_plots</span>(police_triplots, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">axes =</span> <span class="st">"collect"</span>, <span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Resident Survey Comparison - Policing Questions"</span>) <span class="sc">&amp;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>)) <span class="sc">&amp;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-22-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="864"></a></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The plots above show the distributions of all three (sub)samples. They largely confirm the similarity across the different (sub)samples. Although there is some evidence that the community survey sample and sub-sample from the same neighborhoods in the residents survey are more similar to each other than the overall resident survey sample. They also tend to be somewhat more positive about the overall “quality of life” and “image of” the city as well as “feelings of safety” in and perceived “physical appearance” of their neighborhoods (Note the similar and larger peaks in values of 4 compared to the full resident survey). For the policing-related questions, there is some evidence that the resident survey sub-sample of community survey neighborhoods shows more positive perception of the overall “quality of police services,” “relationship between neighborhood and police,” and “quality of police protection.” Community-survey respondents tend to have slightly higher but perhaps more variation in their perception of traffic and parking enforcement services while the sub-sample of community survey neighborhoods from the resident survey is more concentrated in the middle value. For the questions regarding police response times and their responsiveness to resident concerns, the community survey shows a slightly more negative skew than the sub-sample from the resident survey where the opposite is true for the question regarding the city’s overall effort at crime prevention.</p>
<p>By plotting results for three different (sub)samples on the same plots, the figures above can be a little difficult to interpret. Given our main focus is to compare the results of the community survey to the results from the resident survey administered in the same neighborhoods, let’s just plot that comparison.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>general_comcomp_plots <span class="ot">&lt;-</span> <span class="fu">map2</span>(general_vars, general_titles, <span class="sc">~</span><span class="fu">basic_dodgebar</span>(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_comsamp,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_name =</span> .x,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="st">"data_fact"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_lab =</span> <span class="st">"Data"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_colors =</span> <span class="fu">c</span>(<span class="st">"#0D0887FF"</span>, <span class="st">"#CC4678FF"</span>),</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> .y</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>police_comcomp_plots <span class="ot">&lt;-</span> <span class="fu">map2</span>(police_vars, police_titles, <span class="sc">~</span><span class="fu">basic_dodgebar</span>(</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_comsamp,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_name =</span> .x,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="st">"data_fact"</span>,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_lab =</span> <span class="st">"Data"</span>,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_colors =</span> <span class="fu">c</span>(<span class="st">"#0D0887FF"</span>, <span class="st">"#CC4678FF"</span>),</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> .y</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>all_comcomp_plots <span class="ot">&lt;-</span> <span class="fu">map2</span>(all_vars, all_titles, <span class="sc">~</span><span class="fu">basic_dodgebar</span>(</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_comsamp,</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_name =</span> .x,</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="st">"data_fact"</span>,</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_lab =</span> <span class="st">"Data"</span>,</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_colors =</span> <span class="fu">c</span>(<span class="st">"#0D0887FF"</span>, <span class="st">"#CC4678FF"</span>),</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">y_axis_limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> .y</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">General Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Policing Questions</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wrap_plots</span>(general_comcomp_plots, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">axes =</span> <span class="st">"collect"</span>, <span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Resident Survey Comparison - General Questions"</span>) <span class="sc">&amp;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>)) <span class="sc">&amp;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-24-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="864"></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wrap_plots</span>(police_comcomp_plots, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">axes =</span> <span class="st">"collect"</span>, <span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Resident Survey Comparison - Policing Questions"</span>) <span class="sc">&amp;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>)) <span class="sc">&amp;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-25-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="864"></a></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="sec-kcrs-estimate" class="level3" data-number="7.0.7">
<h3 data-number="7.0.7" class="anchored" data-anchor-id="sec-kcrs-estimate"><span class="header-section-number">7.0.7</span> Comparing response-level estimation across samples</h3>
<p>Now, bear with us as we dig a little deeper. Specifically, we will compare our ability to precisely <em>estimate</em> basic univariate statistics - like the response proportions shown in the bar charts above - across the KC Community and Resident “random” and “high crime” samples. To do this, we will compare estimates and 95% confidence intervals derived from the Community survey and the quarterly Resident survey data separately for the 30 “random sample” neighborhoods and the 10 “high crime” neighborhoods using the same items we described above. This is important because it will allow us to further assess whether the community-engaged approach improved our ability to study residents in those high crime neighborhoods that were under-represented in the resident data generated using more traditional survey methods.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check cell counts by response category for each group</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># cell_counts_check &lt;- kc_comres_stratified %&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(all_of(general_vars), survey_strata_fact) %&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   pivot_longer(cols = all_of(general_vars), names_to = "variable", values_to = "value") %&gt;%</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(!is.na(value)) %&gt;%</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(variable, survey_strata_fact, value) %&gt;%</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarise(cell_count = n(), .groups = "drop") %&gt;%</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(variable, survey_strata_fact) %&gt;%</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co">#     total_n = sum(cell_count),</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co">#     proportion = cell_count / total_n</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   ) %&gt;%</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   ungroup()</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at a specific variable to see the pattern</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="co"># cell_counts_check %&gt;%</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(variable == "percom_quallife") %&gt;%</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   arrange(survey_strata_fact, value) %&gt;%</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(n = 50)</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of cell counts across all variables</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="co"># cell_counts_check %&gt;%</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(survey_strata_fact) %&gt;%</span></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarise(</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="co">#     min_cell_count = min(cell_count),</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="co">#     max_cell_count = max(cell_count),</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a><span class="co">#     median_cell_count = median(cell_count),</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a><span class="co">#     mean_cell_count = mean(cell_count),</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a><span class="co">#     .groups = "drop"</span></span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a><span class="co">#   )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Stratified dataset creation with factor levels</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>kc_comres_stratified <span class="ot">&lt;-</span> kc_combsurv_ressurv <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(kc_combsurv_geoid, <span class="at">by =</span> <span class="st">"NBHD"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, percom_new, qualserv_new, polserv_new, sample_fact) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sample_fact <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"High Crime Sample"</span>, <span class="st">"Random Sample"</span>)) <span class="sc">%&gt;%</span>  <span class="co"># Fixed level name</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="st">"Community Survey"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>(kcmo_ressurv_crimegeo) <span class="sc">%&gt;%</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(sample_fact <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"High Crime Sample"</span>, <span class="st">"Random Sample"</span>)) <span class="sc">%&gt;%</span>  <span class="co"># Fixed level name</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(ID, <span class="fu">all_of</span>(<span class="fu">c</span>(general_vars, police_vars)), sample_fact) <span class="sc">%&gt;%</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">data =</span> <span class="st">"Resident Survey"</span>)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">survey_strata =</span> <span class="fu">paste</span>(data, sample_fact, <span class="at">sep =</span> <span class="st">" - "</span>),</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">survey_strata_fact =</span> <span class="fu">factor</span>(survey_strata, </span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>                               <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Community Survey - Random Sample"</span>,</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"Resident Survey - Random Sample"</span>, </span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"Community Survey - High Crime Sample"</span>,  <span class="co"># Fixed level name</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"Resident Survey - High Crime Sample"</span>))  <span class="co"># Fixed level name</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the counts now</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(kc_comres_stratified<span class="sc">$</span>survey_strata_fact, <span class="at">useNA =</span> <span class="st">"always"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Community Survey - Random Sample      Resident Survey - Random Sample 
                                 284                                  243 
Community Survey - High Crime Sample  Resident Survey - High Crime Sample 
                                  88                                   17 
                                &lt;NA&gt; 
                                   0 </code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Updated plot function with correct labels</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>create_multinomial_uncertainty_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data, vars, titles, plot_title) {</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  prop_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">all_of</span>(vars), survey_strata_fact) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">all_of</span>(vars), <span class="at">names_to =</span> <span class="st">"variable"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value), <span class="sc">!</span><span class="fu">is.na</span>(survey_strata_fact)) <span class="sc">%&gt;%</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(variable, survey_strata_fact, value) <span class="sc">%&gt;%</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(variable, survey_strata_fact) <span class="sc">%&gt;%</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">total =</span> <span class="fu">sum</span>(count),</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">prop =</span> count <span class="sc">/</span> total,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">se =</span> <span class="fu">sqrt</span>(prop <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> prop) <span class="sc">/</span> total),</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">lower =</span> <span class="fu">pmax</span>(<span class="dv">0</span>, prop <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> se),</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">upper =</span> <span class="fu">pmin</span>(<span class="dv">1</span>, prop <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> se),</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">lower =</span> <span class="fu">pmax</span>(<span class="dv">0</span>, lower),</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">upper =</span> <span class="fu">pmin</span>(<span class="dv">1</span>, upper),</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">small_cell =</span> count <span class="sc">&lt;</span> <span class="dv">10</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable_label =</span> <span class="fu">recode</span>(variable, <span class="sc">!!!</span><span class="fu">setNames</span>(titles, vars)))</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(prop_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(value), <span class="at">y =</span> prop, <span class="at">color =</span> survey_strata_fact)) <span class="sc">+</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper, </span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>                        <span class="at">alpha =</span> <span class="fu">ifelse</span>(small_cell, <span class="fl">0.3</span>, <span class="fl">1.0</span>)),</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>                    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.4</span>),</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>                    <span class="at">size =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">factor</span>(variable_label, <span class="at">levels =</span> titles), <span class="at">scales =</span> <span class="st">"free"</span>, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#0D0887FF"</span>, <span class="st">"#CC4678FF"</span>, <span class="st">"#F0F921FF"</span>, <span class="st">"#7E03A8FF"</span>),</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Community - Random"</span>, <span class="st">"Resident - Random"</span>, </span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Community - High Crime"</span>, <span class="st">"Resident - High Crime"</span>),</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">drop =</span> <span class="cn">FALSE</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_alpha_identity</span>() <span class="sc">+</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> plot_title,</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Response Category"</span>, </span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"Proportion (with 95% CI)"</span>,</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"Survey - Neighborhood Type"</span>,</span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Multinomial 95% CIs; faded points indicate cell counts &lt; 10"</span></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the plots</span></span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a>general_multinomial_plot <span class="ot">&lt;-</span> <span class="fu">create_multinomial_uncertainty_plot</span>(</span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_stratified,</span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">vars =</span> general_vars,</span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">titles =</span> general_titles,</span>
<span id="cb29-58"><a href="#cb29-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot_title =</span> <span class="st">"General Community Perceptions: All Four Survey-Neighborhood Groups"</span></span>
<span id="cb29-59"><a href="#cb29-59" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-60"><a href="#cb29-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-61"><a href="#cb29-61" aria-hidden="true" tabindex="-1"></a>police_multinomial_plot <span class="ot">&lt;-</span> <span class="fu">create_multinomial_uncertainty_plot</span>(</span>
<span id="cb29-62"><a href="#cb29-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> kc_comres_stratified,</span>
<span id="cb29-63"><a href="#cb29-63" aria-hidden="true" tabindex="-1"></a>  <span class="at">vars =</span> police_vars,</span>
<span id="cb29-64"><a href="#cb29-64" aria-hidden="true" tabindex="-1"></a>  <span class="at">titles =</span> police_titles,</span>
<span id="cb29-65"><a href="#cb29-65" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot_title =</span> <span class="st">"Police Services Perceptions: All Four Survey-Neighborhood Groups"</span></span>
<span id="cb29-66"><a href="#cb29-66" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-67"><a href="#cb29-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-68"><a href="#cb29-68" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the plotted general perceptions data </span></span>
<span id="cb29-69"><a href="#cb29-69" aria-hidden="true" tabindex="-1"></a>general_plot_data <span class="ot">&lt;-</span> kc_comres_stratified <span class="sc">%&gt;%</span></span>
<span id="cb29-70"><a href="#cb29-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(general_vars), survey_strata_fact) <span class="sc">%&gt;%</span></span>
<span id="cb29-71"><a href="#cb29-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">all_of</span>(general_vars), <span class="at">names_to =</span> <span class="st">"variable"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-72"><a href="#cb29-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value), <span class="sc">!</span><span class="fu">is.na</span>(survey_strata_fact)) <span class="sc">%&gt;%</span></span>
<span id="cb29-73"><a href="#cb29-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(variable, survey_strata_fact, value) <span class="sc">%&gt;%</span></span>
<span id="cb29-74"><a href="#cb29-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-75"><a href="#cb29-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(variable, survey_strata_fact) <span class="sc">%&gt;%</span></span>
<span id="cb29-76"><a href="#cb29-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-77"><a href="#cb29-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(count),</span>
<span id="cb29-78"><a href="#cb29-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop =</span> count <span class="sc">/</span> total,</span>
<span id="cb29-79"><a href="#cb29-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">se =</span> <span class="fu">sqrt</span>(prop <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> prop) <span class="sc">/</span> total),</span>
<span id="cb29-80"><a href="#cb29-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower =</span> <span class="fu">pmax</span>(<span class="dv">0</span>, prop <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> se),</span>
<span id="cb29-81"><a href="#cb29-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper =</span> <span class="fu">pmin</span>(<span class="dv">1</span>, prop <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> se),</span>
<span id="cb29-82"><a href="#cb29-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">small_cell =</span> count <span class="sc">&lt;</span> <span class="dv">10</span></span>
<span id="cb29-83"><a href="#cb29-83" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb29-84"><a href="#cb29-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-85"><a href="#cb29-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">variable_label =</span> <span class="fu">recode</span>(variable, <span class="sc">!!!</span><span class="fu">setNames</span>(general_titles, general_vars)))</span>
<span id="cb29-86"><a href="#cb29-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-87"><a href="#cb29-87" aria-hidden="true" tabindex="-1"></a><span class="co"># general_plot_data %&gt;% gt()</span></span>
<span id="cb29-88"><a href="#cb29-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-89"><a href="#cb29-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-90"><a href="#cb29-90" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the plotted policing perceptions data </span></span>
<span id="cb29-91"><a href="#cb29-91" aria-hidden="true" tabindex="-1"></a>police_plot_data <span class="ot">&lt;-</span> kc_comres_stratified <span class="sc">%&gt;%</span></span>
<span id="cb29-92"><a href="#cb29-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(police_vars), survey_strata_fact) <span class="sc">%&gt;%</span></span>
<span id="cb29-93"><a href="#cb29-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">all_of</span>(police_vars), <span class="at">names_to =</span> <span class="st">"variable"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-94"><a href="#cb29-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value), <span class="sc">!</span><span class="fu">is.na</span>(survey_strata_fact)) <span class="sc">%&gt;%</span></span>
<span id="cb29-95"><a href="#cb29-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(variable, survey_strata_fact, value) <span class="sc">%&gt;%</span></span>
<span id="cb29-96"><a href="#cb29-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-97"><a href="#cb29-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(variable, survey_strata_fact) <span class="sc">%&gt;%</span></span>
<span id="cb29-98"><a href="#cb29-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-99"><a href="#cb29-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(count),</span>
<span id="cb29-100"><a href="#cb29-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop =</span> count <span class="sc">/</span> total,</span>
<span id="cb29-101"><a href="#cb29-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">se =</span> <span class="fu">sqrt</span>(prop <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> prop) <span class="sc">/</span> total),</span>
<span id="cb29-102"><a href="#cb29-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower =</span> <span class="fu">pmax</span>(<span class="dv">0</span>, prop <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> se),</span>
<span id="cb29-103"><a href="#cb29-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper =</span> <span class="fu">pmin</span>(<span class="dv">1</span>, prop <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> se),</span>
<span id="cb29-104"><a href="#cb29-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">small_cell =</span> count <span class="sc">&lt;</span> <span class="dv">10</span></span>
<span id="cb29-105"><a href="#cb29-105" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb29-106"><a href="#cb29-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-107"><a href="#cb29-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">variable_label =</span> <span class="fu">recode</span>(variable, <span class="sc">!!!</span><span class="fu">setNames</span>(police_titles, police_vars)))</span>
<span id="cb29-108"><a href="#cb29-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-109"><a href="#cb29-109" aria-hidden="true" tabindex="-1"></a><span class="co"># police_plot_data %&gt;% gt()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">General Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Policing Questions</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>general_multinomial_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-28-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>police_multinomial_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-29-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="6_kc_comsurvey_resident-survey-comp_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Above, we conducted a comparative analysis examining response patterns across four distinct survey-neighborhood groups: Community Survey from random sample neighborhoods (n=285), Resident Survey from random sample neighborhoods (n=243), Community Survey from high-crime neighborhoods (n=88), and Resident Survey from high-crime neighborhoods (n=17).<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Rather than simply comparing means, we calculated the proportion of responses in each category (1-5 on the satisfaction scale) for each group and estimated 95% confidence intervals around these proportions using multinomial standard errors.</p>
<p>The resulting plots display these proportions with confidence intervals as point-range estimates, positioned along the x-axis by response category and faceted by survey question. Points are color-coded by survey-neighborhood combination and faded when cell counts fall below 10 observations to indicate high uncertainty. This approach reveals not just differences in response patterns between groups, but also the reliability of those differences–showing, for example, that the Resident Survey high-crime group (with only 17 total respondents) produces much wider confidence intervals than the larger Community Survey groups, particularly for rare response categories. Overall, the visualizations provide both substantive insights about how survey methodology and neighborhood type affect resident perceptions, and methodological insights about where sample sizes are sufficient to support confident conclusions versus where uncertainty remains high.</p>
<p>First, perhaps the most immediately apparent (and anticipated) pattern is that the Resident survey - High Crime sample (n=15-17 across questions) shows dramatically wider confidence intervals than all other groups, with many intervals spanning 30-40 percentage points. Nearly every estimate for this group is flagged as a small cell (count &lt; 10), highlighting the fundamental uncertainty in these estimates. In comparison, the Community survey - High Crime sample typically generated much more precise estimates (i.e., narrower confidence intervals), even for low-prevalence response categories with small cell counts.</p>
<p>Second, this disaggregated analysis reveals patterns that are remarkably consistent across the other three survey sample/method conditions. When focusing specifically on the two comparable random sample groups (Community vs.&nbsp;Resident), the patterns are remarkably similar across most questions, with largely overlapping confidence intervals. For example, on “Overall quality of life in city,” both groups show their highest proportions in category 4 (Community: 50%, CI: 44-56%; Resident: 49%, CI: 42-55%), suggesting that the community-engaged survey approach produces minimal bias relative to the traditional Resident survey when neighborhood context is held constant. Similar convergence appears for “Physical appearance of neighborhood” and most policing-related questions, validating the community survey methodology.</p>
<p>With that said, though survey method effects appear minimal when neighborhood type is held constant, the Community Survey’s adequate sample sizes reveal potentially important differences between high-crime and random sample neighborhoods that the traditional resident survey could not reliably detect:</p>
<ul>
<li><p><strong>Neighborhood Safety Perceptions</strong>: “Feeling of safety in neighborhood” also reveals differences when examining individual response categories. Community Survey respondents in High-crime neighborhoods are more than twice as likely to report being very dissatisfied (category 1: 13%, CI: 6-21%) compared to random sample respondents (6%, CI: 3-9%). At the other extreme, residents of high-crime neighborhoods are much less likely to report being very satisfied (category 5: 13%, CI: 6-21%) compared to residents of randomly sampled neighborhoods (26%, CI: 20-31%)–essentially a complete reversal of proportions between the most and least satisfied categories. The modal response also differs meaningfully: random sample neighborhood residents most commonly choose category 4 (38%, CI: 32-44%), while high-crime neighborhood residents’ responses show a flatter distribution with category 4 still highest (47%, CI: 36-58%) but much higher proportions in categories 1-3 combined (53% vs.&nbsp;36% in random sample).</p></li>
<li><p><strong>Appearance of Physical Environment</strong>: Community Survey residents in high-crime neighborhoods report nearly twice the rate of strong dissatisfaction with neighborhood appearance (category 1: 19%, CI: 11-27%) compared to random sample residents (12%, CI: 8-16%), while showing much lower rates of high satisfaction (category 5: 7%, CI: 2-13%) versus random sample (24%, CI: 19-29%).</p></li>
<li><p><strong>Municipal Service Satisfaction</strong>: Two municipal service questions reveal perceived neighborhood-level disparities. On “Value received for city tax dollars,” 33% (CI: 23-44%) of Community Survey residents in high-crime neighborhoods reported the most dissatisfied category versus 24% (CI: 18-29%) in random neighborhoods–a difference with relatively low confidence interval overlap. Similarly, “Quality of neighborhood services” shows high-crime respondents reporting 23% in the most dissatisfied category (CI: 14-32%) compared to 11% in random neighborhoods (CI: 8-15%).</p></li>
<li><p><strong>Policing</strong>: Most policing questions show minimal differences across neighborhood types. For example, looking at “Relationship btw. neighborhood &amp; police,” the patterns are actually quite similar between high-crime and random neighborhoods in the Community Survey. High-crime respondents show 32% in category 4 (CI: 22-43%) compared to 31% in random sample (CI: 25-36%). The satisfaction levels (categories 4-5 combined) are 35% for high-crime vs.&nbsp;42% for random sample - a modest difference but with overlapping confidence intervals. Similarly, across “Effectiveness of police protection,” “How quickly police respond,” “Enforcement of traffic laws,” and “Parking enforcement services,” the differences between high-crime and random neighborhoods are generally small and confidence intervals overlap substantially. The “Quality of police services” item similarly shows comparable patterns - high-crime respondents have 30% in category 4 (CI: 20-40%) vs.&nbsp;27% in random sample (CI: 21-32%), with high-crime residents actually reporting slightly higher satisfaction in the top category. One possible exception is with crime prevention, where the “City’s overall efforts to prevent crime” item shows residents of high-crime neighborhoods are more likely to be in the most dissatisfied category (28% vs.&nbsp;22% in random sample), though confidence intervals still substantially overlap (CI: 18-37% vs.&nbsp;17-27%).</p></li>
</ul>
<p>These patterns suggest that Community Survey methodology not only provides more reliable estimates for high-crime neighborhoods but also reveals substantively important differences in resident experiences that traditional surveys cannot detect due to inadequate sample sizes. Interestingly, police-related satisfaction showed minimal differences between neighborhood types, contrasting sharply with differences observed in safety perceptions, physical appearance, and municipal services. Importantly, many apparent differences between survey methods in high-crime neighborhoods cannot be reliably assessed due to the inadequate Resident Survey sample size, underscoring how traditional survey approaches might systematically under-represent precisely those communities most affected by municipal policies.</p>
</section>
<section id="sec-kcrs-find" class="level3" data-number="7.0.8">
<h3 data-number="7.0.8" class="anchored" data-anchor-id="sec-kcrs-find"><span class="header-section-number">7.0.8</span> Conclusion</h3>
<p>This comparative analysis of the KC Community Survey and Resident Survey reveals both consistencies and meaningful differences in how Kansas City residents perceive their community and city services. The comparison demonstrates that the community survey methodology successfully captured resident sentiment that closely aligns with the established resident survey, while also providing valuable insights into previously underrepresented neighborhoods. Most importantly, the analysis appears to reveal fundamental limitations in the KC Resident Survey’s traditional survey methods’ ability to reliably capture perspectives from high-crime neighborhoods due to inadequate sample sizes–a limitation largely overcome by the KC Community Survey’s community-engaged methodology.</p>
<section id="key-findings" class="level4" data-number="7.0.8.1">
<h4 data-number="7.0.8.1" class="anchored" data-anchor-id="key-findings"><span class="header-section-number">7.0.8.1</span> Key Findings</h4>
<p>The most significant finding is the remarkable similarity in response patterns between the two surveys, particularly on policing-related questions. Items measuring “Quality of police services,” “Relationship between neighborhood &amp; police,” “Effectiveness of police protection,” and “How quickly police respond” showed very similar distributions across both surveys. This consistency validates the community survey’s ability to similarly capture resident perspectives on police services, which was a primary objective given the focus on high-crime neighborhoods. Notably, when examining neighborhood differences within the Community Survey, police-related satisfaction showed minimal variation between high-crime and random sample neighborhoods, contrasting with other domains where some neighborhood differences were observed.</p>
<p>However, notable differences emerged in residents’ perceptions of general community attributes. Community survey respondents consistently reported higher satisfaction with quality of life indicators, including overall quality of life in the city, the city’s image, and feelings of safety in their neighborhoods. These differences were most pronounced when comparing the community survey to the full resident survey sample, but persisted even when limiting the comparison to resident survey respondents from the same neighborhoods. The Community Survey’s adequate sample sizes revealed potentially meaningful neighborhood differences in areas such as safety perceptions, neighborhood physical appearance, and municipal services–differences that traditional surveys cannot reliably detect due to insufficient representation from high-crime neighborhoods.</p>
<p>Importantly, uncertainty analysis using confidence intervals around response proportions reveals that many apparent differences between survey methods in high-crime neighborhoods cannot be reliably assessed due to the Resident Survey’s inadequate sample sizes (n=15-17), which produced confidence intervals spanning 30-40 percentage points compared to the much more precise estimates from the Community Survey’s larger high-crime sample (n=88).</p>
</section>
<section id="geographic-and-methodological-implications" class="level4" data-number="7.0.8.2">
<h4 data-number="7.0.8.2" class="anchored" data-anchor-id="geographic-and-methodological-implications"><span class="header-section-number">7.0.8.2</span> Geographic and Methodological Implications</h4>
<p>The geographic analysis reveals an important achievement of the community survey design. While only 17 respondents from high-crime neighborhoods participated in the resident survey (representing a small fraction of the total sample), the community survey successfully engaged 88 respondents from these same neighborhoods—comprising nearly a quarter of all community survey responses. This demonstrates that the community-based interviewing approach effectively reached residents who may be less likely to participate in traditional mail, phone, and online surveys.</p>
<p>The similarity between the community survey results and the resident survey sub-sample from the same neighborhoods (n=252) further supports the community survey methodology. When controlling for geographic location, the two surveys produced remarkably consistent results, with most mean differences falling within 0.1-0.3 points on the 5-point scale and with uncertainty analysis showing remarkably similar response patterns. This consistency is particularly notable given that both random sample groups achieved sufficient sample sizes to produce reliable estimates with overlapping confidence intervals.</p>
</section>
<section id="limitations-and-considerations" class="level4" data-number="7.0.8.3">
<h4 data-number="7.0.8.3" class="anchored" data-anchor-id="limitations-and-considerations"><span class="header-section-number">7.0.8.3</span> Limitations and Considerations</h4>
<p>Several limitations should be acknowledged. The resident survey data represents only the fourth quarter of fiscal year 2023-2024 rather than the full annual sample, which may limit generalizability. Additionally, the community survey showed higher rates of missing data on certain police services questions, particularly for parking enforcement and police response times, which may reflect different levels of direct experience with these services across neighborhoods.</p>
<p>The slightly more positive responses in the community survey could reflect multiple factors: the face-to-face interview format may elicit more socially desirable responses, the community-based interviewers may have established better rapport with respondents, or residents in the sampled neighborhoods may genuinely have more positive perceptions than initially expected. However, uncertainty analysis suggests these differences are often within the range of statistical noise when sample sizes are small.</p>
</section>
<section id="implications-for-future-research-and-policy" class="level4" data-number="7.0.8.4">
<h4 data-number="7.0.8.4" class="anchored" data-anchor-id="implications-for-future-research-and-policy"><span class="header-section-number">7.0.8.4</span> Implications for Future Research and Policy</h4>
<p>These findings suggest that the community survey successfully accomplished its primary objectives: engaging residents from high-crime neighborhoods who are typically underrepresented in traditional surveys while maintaining methodological rigor that produces reliable, comparable data. The uncertainty analysis demonstrates that this is not merely a matter of inclusion, but of statistical necessity, as traditional surveys may be unable to provide policy-relevant insights about high-crime neighborhoods due to fundamental sample size limitations without explicit modification (e.g., purposive oversampling).</p>
<p>For future iterations, researchers should prioritize ensuring adequate sample sizes across all neighborhood types rather than relying on population-proportionate sampling that systematically underrepresents policy-critical communities. The methodology appears particularly well-suited for gathering authentic community input on sensitive topics like policing, where both representation and statistical precision are essential for evidence-based policymaking.</p>
</section>
<section id="final-thoughts" class="level4" data-number="7.0.8.5">
<h4 data-number="7.0.8.5" class="anchored" data-anchor-id="final-thoughts"><span class="header-section-number">7.0.8.5</span> Final Thoughts</h4>
<p>This analysis demonstrates that thoughtful survey design can successfully bridge the gap between rigorous social science methodology and authentic community engagement. The community survey not only validated existing resident survey findings but also provided crucial insights from neighborhoods that are often underrepresented in municipal decision-making processes. As Kansas City continues to address issues of public safety, community development, and municipal service delivery, this enhanced understanding of resident perspectives across all neighborhoods provides a more complete foundation for evidence-based policymaking.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-brauer_pursuing_2025" class="csl-entry" role="listitem">
Brauer, Jonathan, and Jacob Day. 2025. <span>“Pursuing <span>Precision</span> in <span>Criminology</span>: <span>Why</span> <span>Ordinal</span> <span>Data</span> <span>Demand</span> <span>Ordinal</span> <span>Methods</span>.”</span> OSF. <a href="https://doi.org/10.31235/osf.io/fet4d_v1">https://doi.org/10.31235/osf.io/fet4d_v1</a>.
</div>
<div id="ref-day_trust_2023" class="csl-entry" role="listitem">
Day, Jake, Jon Brauer, and Maja Kotlaja. 2023. <span>“Trust <span>Issues</span>: <span>Examining</span> <span>Near</span> <span>Duplicates</span> in <span>Survey</span> <span>Data</span>.”</span> <a href="https://reluctantcriminologists.com/blog-posts/%5B8%5D/dup-series/duplicates">https://reluctantcriminologists.com/blog-posts/%5B8%5D/dup-series/duplicates</a>.
</div>
<div id="ref-kuriakose_dont_2015" class="csl-entry" role="listitem">
Kuriakose, Noble, and Michael Robbins. 2015. <span>“Don’t <span>Get</span> <span>Duped</span>: <span>Fraud</span> Through <span>Duplication</span> in <span>Public</span> <span>Opinion</span> <span>Surveys</span>.”</span> {SSRN} {Scholarly} {Paper}. Rochester, NY: Social Science Research Network. <a href="https://papers.ssrn.com/abstract=2580502">https://papers.ssrn.com/abstract=2580502</a>.
</div>
<div id="ref-revelle_seductive_2024" class="csl-entry" role="listitem">
Revelle, William. 2024. <span>“The Seductive Beauty of Latent Variable Models: <span>Or</span> Why <span>I</span> Don’t Believe in the <span>Easter</span> <span>Bunny</span>.”</span> <em>Personality and Individual Differences</em> 221 (April): 112552. <a href="https://doi.org/10.1016/j.paid.2024.112552">https://doi.org/10.1016/j.paid.2024.112552</a>.
</div>
<div id="ref-sampson_neighborhoods_1997" class="csl-entry" role="listitem">
Sampson, Robert J., Stephen W. Raudenbush, and Felton Earls. 1997. <span>“Neighborhoods and <span>Violent</span> <span>Crime</span>: <span>A</span> <span>Multilevel</span> <span>Study</span> of <span>Collective</span> <span>Efficacy</span>.”</span> <em>Science</em> 277 (5328): 918–24. <a href="https://doi.org/10.1126/science.277.5328.918">https://doi.org/10.1126/science.277.5328.918</a>.
</div>
<div id="ref-wheeler_survey_2023" class="csl-entry" role="listitem">
Wheeler, Andrew. 2023. <span>“Survey Duplicates and Other Stuff.”</span> <em>Andrew Wheeler</em>. <a href="https://andrewpwheeler.com/2023/10/13/survey-duplicates-and-other-stuff/">https://andrewpwheeler.com/2023/10/13/survey-duplicates-and-other-stuff/</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p><em>Note</em>: in the table above, 13 respondents are excluded from the community survey frequencies. These 13 respondents are from the online version of the community survey who were coded with <code>NBHD = 43</code>, which did not have a corresponding official neighborhood.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Note that analytical sample sizes vary depending on missing data patterns.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./5_kc_comsurvey_map-collective-efficacy.html" class="pagination-link" aria-label="Mapping Collective Efficacy">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Mapping Collective Efficacy</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./7_kc_comsurvey_conclusion.html" class="pagination-link" aria-label="Conclusion">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Conclusion</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"openEffect":"zoom","loop":false,"closeEffect":"zoom","descPosition":"bottom","selector":".lightbox"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>